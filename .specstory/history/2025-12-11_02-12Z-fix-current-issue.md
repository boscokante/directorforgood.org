<!-- Generated by SpecStory, Markdown v2.1.0 -->

<!-- cursor Session 5c4b0c37-66a0-4480-b50e-e675865bbe2d (2025-12-11 02:12Z) -->

# Fix current issue (2025-12-11 02:12Z)

_**User (2025-12-09 10:50Z)**_

fix this issue

---

_**Agent (model claude-4.5-opus-high-thinking, mode Agent)**_

<think><details><summary>Thought Process</summary>
The error shows that `fs` module can't be resolved in a client component. The file `./lib/deck-content.ts` is using Node.js `fs` and `path` modules, but it's being imported in a client component context.

In Next.js, you can't use Node.js modules like `fs` in client components. The solution is to either:
1. Make the file server-only by adding `'use server'` or using it only in server components
2. Split the code so file system operations happen on the server side (API route or server component)

Let me look at the file to understand what it's doing.</details></think>

---

<tool-use data-tool-type="unknown" data-tool-name="read_file_v2">
<details>
<summary>Tool use: **read_file_v2**</summary>


Parameters:

```json
{
  "targetFile": "/Users/boskombp16/GitHub/directorforgood.org/lib/deck-content.ts",
  "charsLimit": 1000000,
  "effectiveUri": "/Users/boskombp16/GitHub/directorforgood.org/lib/deck-content.ts"
}
```
Result:

```json
{
  "contents": "// Shared content for both web and PDF pitch deck\n// Edit via the admin interface at /admin/deck\n\nimport fs from 'fs';\nimport path from 'path';\n\nexport interface SlideImage {\n  url?: string;  // Image URL (uploaded or external)\n  placeholder?: string;  // Description for AI generation or placeholder text\n  type: 'icon' | 'chart' | 'mockup' | 'infographic' | 'photo' | 'diagram';\n}\n\nexport interface TeamMemberInfo {\n  name: string;\n  role: string;\n  bio: string;\n  image: string;\n}\n\nexport interface SlideContent {\n  id: string;\n  title: string;\n  subtitle?: string;\n  sections?: {\n    heading?: string;\n    items?: string[];\n    text?: string;\n  }[];\n  teamMembers?: TeamMemberInfo[];\n  highlight?: string;\n  footnote?: string;\n  image?: SlideImage;\n}\n\nexport interface DeckContent {\n  cover: {\n    title: string;\n    tagline: string;\n    subtagline: string;\n    url: string;\n  };\n  slides: SlideContent[];\n  slideOrder?: string[]; // Array of slide IDs in display order\n  ask: {\n    amount: string;\n    items: string[];\n  };\n}\n\n// Default slide order with market moved after economics for better narrative flow\nexport const defaultSlideOrder: string[] = [\n  'problem-founders',\n  'problem-downshifted',\n  'customer-foundations',\n  'broken-options',\n  'what-we-are',\n  'fundraising-philosophy',\n  'director-pod',\n  'director-os',\n  'ai-agents',\n  'economics',\n  'market',           // Moved here from position 4 - show market after explaining the solution\n  'why-now',\n  'go-to-market',\n  'business-model',\n  'strategic-partners',\n  'team',\n  'current-customers',\n  'roadmap',\n];\n\nexport const defaultDeckContent: DeckContent = {\n  cover: {\n    title: \"Director\",\n    tagline: \"The AI-native operating system and forward-deployed backbone for nonprofits\",\n    subtagline: \"Turning under-resourced founders into fundable, operationally tight organizations\",\n    url: \"directorforgood.org\",\n  },\n  slides: [\n    {\n      id: \"problem-founders\",\n      title: \"Problem – Founders Are the Whole Leadership Team\",\n      subtitle: \"Nonprofit founders are carrying 5 jobs on 1 salary.\",\n      sections: [\n        {\n          heading: \"They're expected to:\",\n          items: [\n            \"Lead programs and vision\",\n            \"Raise money (major gifts, grants, events)\",\n            \"Run operations and finance\",\n            \"Own communications and storytelling\",\n            \"Manage staff, boards, and compliance\",\n          ],\n        },\n      ],\n      highlight: \"Promising orgs plateau at $300–600k or quietly shut down — not for lack of impact, but for lack of backbone.\",\n      footnote: \"When funding tightens and staff are cut, all of this collapses back onto one person.\",\n      image: {\n        type: 'infographic',\n        placeholder: 'Infographic showing one person juggling 5 different roles/hats',\n      },\n    },\n    {\n      id: \"problem-downshifted\",\n      title: \"Problem – Downshifted Orgs (Beachhead)\",\n      subtitle: \"Our initial focus: orgs that already proved they can raise $400k–$1M.\",\n      sections: [\n        {\n          heading: \"These orgs:\",\n          items: [\n            \"Have real donor and community relationships\",\n            \"Have a history of 7-figure budgets or close\",\n          ],\n        },\n        {\n          heading: \"But in the current funding environment:\",\n          items: [\n            \"They've laid off staff\",\n            \"The founder is back to doing everything\",\n            \"Many are considering shutting down despite strong demand\",\n          ],\n        },\n      ],\n      highlight: \"These leaders don't need another tool. They need a backbone.\",\n      footnote: \"This hits founders of color especially hard, as equity-era funding retrenches.\",\n      image: {\n        type: 'chart',\n        placeholder: 'Chart showing org budget trajectory: growth to $1M, then decline/plateau',\n      },\n    },\n    {\n      id: \"customer-foundations\",\n      title: \"Ideal Customer – Foundations as Buyers\",\n      subtitle: \"Foundations can sponsor multiple orgs at once.\",\n      sections: [\n        {\n          heading: \"The opportunity:\",\n          items: [\n            \"Foundations already fund capacity-building for grantees\",\n            \"They can purchase Director packages for 5–10 orgs\",\n            \"One contract, multiple organizations transformed\",\n          ],\n        },\n        {\n          heading: \"Why this works:\",\n          items: [\n            \"Foundations get measurable capacity ROI across portfolio\",\n            \"Orgs get backbone support they couldn't afford alone\",\n            \"Director gets predictable, larger contracts\",\n          ],\n        },\n      ],\n      highlight: \"A single foundation can unlock Director for an entire cohort of grantees.\",\n      image: {\n        type: 'diagram',\n        placeholder: 'Foundation at center connected to 5-10 nonprofit orgs, each with Director backbone',\n      },\n    },\n    {\n      id: \"market\",\n      title: \"Market Opportunity\",\n      subtitle: \"A massive, underserved market ready for AI-native solutions.\",\n      sections: [\n        {\n          heading: \"TAM: $164B – Total US Nonprofit Administrative Spending\",\n          items: [\n            \"1.8M nonprofits in the US (1.5M are 501(c)(3)s)\",\n            \"Nonprofit sector contributes $1.4 trillion to GDP\",\n            \"Administrative overhead averages 11.7% = $164B annually\",\n            \"This spending is ripe for AI automation\",\n          ],\n        },\n        {\n          heading: \"SAM: $3.5B – Small/Mid Nonprofits ($250k–$2M budgets)\",\n          items: [\n            \"~108,000 organizations in our target segment\",\n            \"92% of nonprofits operate under $1M/year\",\n            \"Current back-office spend: $32k–$200k per org\",\n            \"Existing solutions: $5.5B nonprofit software + $6.7B consulting market\",\n          ],\n        },\n        {\n          heading: \"SOM: $50M – 5-Year Obtainable Market\",\n          items: [\n            \"500 organizations at ~$100k/year\",\n            \"30–50 pods at 10–16 orgs each\",\n            \"Represents &lt;2% of SAM (credible capture rate)\",\n          ],\n        },\n      ],\n      highlight: \"68% of nonprofits now use AI (up from 58% in 2023). The market is ready for an AI-native backbone.\",\n      footnote: \"Sources: Independent Sector, Statista, NCCS, Google for Nonprofits Survey 2025, Intent Market Research\",\n      image: {\n        type: 'chart',\n        placeholder: 'TAM/SAM/SOM concentric circles: $164B → $3.5B → $50M',\n      },\n    },\n    {\n      id: \"broken-options\",\n      title: \"Broken Options\",\n      subtitle: \"Existing solutions don't fit this stage.\",\n      sections: [\n        {\n          heading: \"DIY SaaS stack\",\n          text: \"CRMs, grant tools, accounting, email… Founders don't have time to integrate and maintain them.\",\n        },\n        {\n          heading: \"Consultants &amp; agencies\",\n          text: \"Project-based, expensive, seen as \\\"overhead.\\\" Advice without ongoing responsibility.\",\n        },\n        {\n          heading: \"Rebuilding staff\",\n          items: [\n            \"ED: $100–150k\",\n            \"Ops/Finance: ~$100k\",\n            \"Development: ~$100k\",\n            \"Comms/Program ops: $60–100k\",\n          ],\n        },\n      ],\n      highlight: \"There is no integrated, AI-native backbone designed for $400k–$1M orgs that have real relationships but no team.\",\n      footnote: \"$360–450k/year for the backbone on a fragile budget.\",\n      image: {\n        type: 'diagram',\n        placeholder: 'Comparison diagram: scattered SaaS logos vs consultant icons vs expensive staff org chart',\n      },\n    },\n    {\n      id: \"what-we-are\",\n      title: \"Director – What We Are\",\n      subtitle: \"Director is an AI-native backbone and forward-deployed team for nonprofits.\",\n      sections: [\n        {\n          heading: \"Director OS – a vertical operating system for:\",\n          items: [\n            \"Revenue &amp; relationships\",\n            \"Runway &amp; finance\",\n            \"Ops &amp; compliance\",\n            \"Board &amp; funder narratives\",\n          ],\n        },\n        {\n          heading: \"Director Pod – shared leadership capacity:\",\n          items: [\n            \"Forward-Deployed Director (FDD)\",\n            \"Finance/ops leadership\",\n            \"Dedicated dev &amp; ops roles as we scale\",\n          ],\n        },\n      ],\n      highlight: \"We plug into an existing org and donor base and give them the leadership bench they can't afford to rebuild alone.\",\n      image: {\n        type: 'diagram',\n        placeholder: 'Two-part diagram: Director OS (software icon) + Director Pod (team icon) = Complete Backbone',\n      },\n    },\n    {\n      id: \"fundraising-philosophy\",\n      title: \"Fundraising Philosophy – Relationships First\",\n      subtitle: \"Director is built around major gifts and real relationships, not grant roulette.\",\n      sections: [\n        {\n          heading: \"Durable funding comes from:\",\n          items: [\n            \"Major donors\",\n            \"Anchor institutions\",\n            \"Long-term partners\",\n          ],\n        },\n        {\n          heading: \"Grants are part of the picture, but:\",\n          items: [\n            \"They are downstream of relationships\",\n            \"\\\"Open call\\\" grant-chasing is mostly a distraction for this segment\",\n          ],\n        },\n        {\n          heading: \"Director's focus:\",\n          items: [\n            \"Map and grow the major gifts pipeline\",\n            \"Prepare founders for high-stakes meetings\",\n            \"Use grants strategically once relationships exist\",\n          ],\n        },\n      ],\n      highlight: \"Director is a relationship and revenue engine, not a shot-in-the-dark grant factory.\",\n      image: {\n        type: 'diagram',\n        placeholder: 'Funnel diagram: Relationships → Major Gifts → Grants (showing priority order)',\n      },\n    },\n    {\n      id: \"director-pod\",\n      title: \"The Director Pod – Capacity Ramp\",\n      subtitle: \"Pods scale from 4 → 8 → 16 orgs as the OS and agents mature.\",\n      sections: [\n        {\n          heading: \"Year 1 – Proto-Pod Team:\",\n          items: [\n            \"Founder/CEO\",\n            \"1 Forward-Deployed Director\",\n            \"1 Finance Director\",\n            \"1 Founding Engineer\",\n          ],\n        },\n        {\n          heading: \"Phase 2 – 8 orgs\",\n          text: \"Mature core agents handle repetitive tasks. Same structure supports more orgs.\",\n        },\n        {\n          heading: \"Phase 3 – 16 orgs\",\n          text: \"2+ FDDs. Standardized playbooks. Agents do recurring work.\",\n        },\n      ],\n      image: {\n        type: 'infographic',\n        placeholder: 'Scaling diagram: 4 orgs → 8 orgs → 16 orgs with team growth visualization',\n      },\n    },\n    {\n      id: \"director-os\",\n      title: \"Director OS – Product Overview\",\n      subtitle: \"One pane of glass for an org's backbone.\",\n      sections: [\n        {\n          heading: \"Revenue &amp; Relationships\",\n          text: \"Major gifts map, warm pipeline, next-best actions\",\n        },\n        {\n          heading: \"Runway &amp; Finance\",\n          text: \"Live cash forecasts, budget vs actuals visibility\",\n        },\n        {\n          heading: \"Ops &amp; Compliance\",\n          text: \"Recurring task engine, checklists, playbooks\",\n        },\n        {\n          heading: \"Narratives &amp; Reporting\",\n          text: \"Board decks, funder reports, impact one-pagers\",\n        },\n      ],\n      footnote: \"Data flows in from email, calendar, finance systems, docs, and existing CRMs.\",\n      image: {\n        type: 'mockup',\n        placeholder: 'Dashboard mockup showing 4 quadrants: Revenue, Runway, Ops, Narratives',\n      },\n    },\n    {\n      id: \"ai-agents\",\n      title: \"AI Agents – How We 2–4x Human Capacity\",\n      subtitle: \"Specialized agents do the repetitive work; humans do the judgment.\",\n      sections: [\n        {\n          heading: \"Major Gifts Agent\",\n          items: [\n            \"Scans email, calendar, CRM\",\n            \"Maintains relationship maps\",\n            \"Drafts donor emails &amp; briefs\",\n          ],\n        },\n        {\n          heading: \"Finance &amp; Runway Agent\",\n          items: [\n            \"Pulls accounting data\",\n            \"Proposes categorizations\",\n            \"Raises runway alerts\",\n          ],\n        },\n        {\n          heading: \"Ops &amp; Compliance Agent\",\n          items: [\n            \"Runs recurring checklists\",\n            \"Generates reminders\",\n            \"Manages task lists\",\n          ],\n        },\n        {\n          heading: \"Board &amp; Reporting Agent\",\n          items: [\n            \"Assembles board decks\",\n            \"Creates funder reports\",\n            \"Keeps board-ready view\",\n          ],\n        },\n      ],\n      highlight: \"Agents explore, compile, and draft. FDDs and Directors review, edit, and decide.\",\n      image: {\n        type: 'diagram',\n        placeholder: '4 AI agent icons with workflow arrows showing data flow between them',\n      },\n    },\n    {\n      id: \"economics\",\n      title: \"Economics – Why This Makes Sense\",\n      subtitle: \"Director makes a serious backbone affordable and scalable.\",\n      sections: [\n        {\n          heading: \"Traditional backbone costs ($500-700k org):\",\n          items: [\n            \"ED: $100–150k\",\n            \"Ops/Finance: ~$100k\",\n            \"Dev: ~$100k\",\n            \"Comms/Program ops: $60–100k\",\n            \"Total: $360–450k/year\",\n          ],\n        },\n        {\n          heading: \"With Director:\",\n          items: [\n            \"ED/founder: $100–150k\",\n            \"Director Pod: ~$80–120k/year\",\n            \"Total backbone: $180–270k/year\",\n          ],\n        },\n      ],\n      highlight: \"Save $100-180k/year in backbone costs\",\n      footnote: \"As Pods scale, pod-level gross margins expand while keeping human leadership involvement high.\",\n      image: {\n        type: 'chart',\n        placeholder: 'Side-by-side bar chart: Traditional ($360-450k) vs Director ($180-270k)',\n      },\n    },\n    {\n      id: \"why-now\",\n      title: \"Why Now – AI Agents + Nonprofit Pressure\",\n      subtitle: \"Two timing curves are intersecting.\",\n      sections: [\n        {\n          heading: \"Agentic AI is production-ready:\",\n          items: [\n            \"\\\"AI coworkers\\\" already shipping in engineering, finance, and customer ops\",\n            \"Small human teams can manage far more complexity with agents\",\n          ],\n        },\n        {\n          heading: \"Nonprofits are under structural pressure:\",\n          items: [\n            \"Orgs with $1M+ budgets are losing staff\",\n            \"Funders want grantees with credible backbones and visibility\",\n          ],\n        },\n      ],\n      highlight: \"Director sits at this intersection: an AI-native backbone delivered by a lean, forward-deployed team to orgs that cannot justify rebuilding full in-house leadership.\",\n      image: {\n        type: 'chart',\n        placeholder: 'Two intersecting trend lines: AI capability (rising) meets nonprofit need (rising)',\n      },\n    },\n    {\n      id: \"go-to-market\",\n      title: \"Go-to-Market\",\n      subtitle: \"We start where we already have pull.\",\n      sections: [\n        {\n          heading: \"Existing relationships\",\n          text: \"First 2–4 orgs from founders you're already effectively \\\"directing.\\\"\",\n        },\n        {\n          heading: \"Downshifted $1M orgs\",\n          text: \"Target leaders who proved they can raise $400k–$1M but had to cut staff.\",\n        },\n        {\n          heading: \"Funder collaborations\",\n          text: \"Position Director as capacity-building that makes grantees more investable.\",\n        },\n        {\n          heading: \"Sales motion:\",\n          items: [\n            \"Short diagnostic: map \\\"today vs with Director\\\"\",\n            \"Demo Director OS + agents\",\n            \"Show what gets taken off the founder's plate\",\n            \"Close annual retainers\",\n            \"Expand scope over time\",\n          ],\n        },\n      ],\n      image: {\n        type: 'diagram',\n        placeholder: 'Concentric circles: Inner (existing relationships) → Middle (downshifted orgs) → Outer (funder partnerships)',\n      },\n    },\n    {\n      id: \"business-model\",\n      title: \"Business Model &amp; QSBS-Friendly Structure\",\n      subtitle: \"AI-native vertical SaaS with embedded forward-deployed team.\",\n      sections: [\n        {\n          heading: \"Revenue model\",\n          items: [\n            \"Annual retainers per org\",\n            \"Tied to budget band and complexity\",\n            \"Goal: multiple Pods, each supporting up to 16 orgs\",\n          ],\n        },\n        {\n          heading: \"Cost structure\",\n          items: [\n            \"Lean Pods (FDD + Finance Director)\",\n            \"Supported by agents and product\",\n            \"Engineering compounds across all clients\",\n          ],\n        },\n        {\n          heading: \"QSBS-aware design\",\n          items: [\n            \"U.S. C-corp\",\n            \"Product-centric operating business\",\n            \"Software &amp; data model assets\",\n          ],\n        },\n      ],\n      image: {\n        type: 'diagram',\n        placeholder: 'Business model flywheel: Retainers → Pod capacity → AI leverage → More orgs',\n      },\n    },\n    {\n      id: \"team\",\n      title: \"Team – Lean Year-1 Plan\",\n      subtitle: \"Small, high-leverage founding team with 12 months of runway.\",\n      sections: [\n        {\n          heading: \"Founder &amp; CEO\",\n          text: \"Vision, sales, fundraising, relationships\",\n        },\n        {\n          heading: \"Founding Engineer (hire #1)\",\n          text: \"Director OS + first wave of agents\",\n        },\n        {\n          heading: \"Forward-Deployed Director (hire #2)\",\n          text: \"Nonprofit ops + fundraising, embedded across first ~4 orgs\",\n        },\n        {\n          heading: \"Finance Director (hire #3)\",\n          text: \"Finance + ops across pod, designs playbooks\",\n        },\n      ],\n      footnote: \"Target raise: ~$800k–$1M for 12 months runway. Early org retainers reduce net burn.\",\n      image: {\n        type: 'photo',\n        placeholder: 'Team headshots or org chart showing 4 founding roles',\n      },\n    },\n    {\n      id: \"roadmap\",\n      title: \"Roadmap &amp; Ask\",\n      subtitle: \"\",\n      sections: [\n        {\n          heading: \"0–12 months (this raise):\",\n          items: [\n            \"Hire FDD, Finance Director, Founding Engineer\",\n            \"Onboard 2–4 orgs\",\n            \"Ship v1 Director OS and core agents\",\n            \"Prove: 4-org pod delivers revenue and stability lift\",\n          ],\n        },\n        {\n          heading: \"12–24 months:\",\n          items: [\n            \"Scale pod to 8 orgs\",\n            \"Harden agents and playbooks\",\n            \"Add additional FDD/finance/ops capacity\",\n          ],\n        },\n        {\n          heading: \"24+ months:\",\n          items: [\n            \"16-org pods on mature OS\",\n            \"Multiple pods focused on key verticals\",\n          ],\n        },\n      ],\n      image: {\n        type: 'infographic',\n        placeholder: 'Timeline roadmap: Year 1 (4 orgs) → Year 2 (8 orgs) → Year 3+ (16 orgs per pod)',\n      },\n    },\n  ],\n  slideOrder: defaultSlideOrder,\n  ask: {\n    amount: \"$800k–$1.0M\",\n    items: [\n      \"Fund 12+ months of lean team and product development\",\n      \"Prove the 4 → 8 → 16 org capacity story with real customers\",\n      \"Build Director into the AI-native backbone for the orgs that can least afford to lose theirs\",\n    ],\n  },\n};\n\n// Helper to get slides in the specified order\nexport function getOrderedSlides(content: DeckContent): SlideContent[] {\n  const order = content.slideOrder || defaultSlideOrder;\n  const slideMap = new Map(content.slides.map(s =&gt; [s.id, s]));\n  \n  // Get slides in order, filtering out any IDs that don't have matching slides\n  const orderedSlides = order\n    .map(id =&gt; slideMap.get(id))\n    .filter((s): s is SlideContent =&gt; s !== undefined);\n  \n  // Append any slides not in the order array (so nothing gets lost)\n  const orderedIds = new Set(order);\n  const remainingSlides = content.slides.filter(s =&gt; !orderedIds.has(s.id));\n  \n  return [...orderedSlides, ...remainingSlides];\n}\n\n// Path to the JSON file that stores deck content\nconst CONTENT_FILE_PATH = path.join(process.cwd(), 'data', 'deck-content.json');\n\n// Ensure the data directory exists\nfunction ensureDataDir() {\n  const dataDir = path.dirname(CONTENT_FILE_PATH);\n  if (!fs.existsSync(dataDir)) {\n    fs.mkdirSync(dataDir, { recursive: true });\n  }\n}\n\n// Load content from file, or return defaults if file doesn't exist\nexport function getDeckContent(): DeckContent {\n  try {\n    ensureDataDir();\n    if (fs.existsSync(CONTENT_FILE_PATH)) {\n      const fileContent = fs.readFileSync(CONTENT_FILE_PATH, 'utf-8');\n      return JSON.parse(fileContent) as DeckContent;\n    }\n  } catch (error) {\n    console.error('Error reading deck content file:', error);\n  }\n  return { ...defaultDeckContent };\n}\n\n// Save content to file\nexport function updateDeckContent(content: Partial&lt;DeckContent&gt;): DeckContent {\n  try {\n    ensureDataDir();\n    const currentContent = getDeckContent();\n    const updatedContent = { ...currentContent, ...content };\n    fs.writeFileSync(CONTENT_FILE_PATH, JSON.stringify(updatedContent, null, 2), 'utf-8');\n    return updatedContent;\n  } catch (error) {\n    console.error('Error writing deck content file:', error);\n    throw error;\n  }\n}\n\n// Reset content to defaults\nexport function resetDeckContent(): DeckContent {\n  try {\n    ensureDataDir();\n    fs.writeFileSync(CONTENT_FILE_PATH, JSON.stringify(defaultDeckContent, null, 2), 'utf-8');\n    return { ...defaultDeckContent };\n  } catch (error) {\n    console.error('Error resetting deck content file:', error);\n    throw error;\n  }\n}\n",
  "totalLinesInFile": 659
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="read_file_v2">
<details>
<summary>Tool use: **read_file_v2**</summary>


Parameters:

```json
{
  "targetFile": "/Users/boskombp16/GitHub/directorforgood.org/app/admin/deck/page.tsx",
  "charsLimit": 1000000,
  "effectiveUri": "/Users/boskombp16/GitHub/directorforgood.org/app/admin/deck/page.tsx"
}
```
Result:

```json
{
  "contents": "'use client';\n\nimport { useState, useEffect, useCallback, useRef } from 'react';\nimport Link from 'next/link';\nimport { Button } from '@/components/ui/button';\nimport { \n  ArrowLeft, Save, RotateCcw, Eye, Loader2, Plus, Trash2, \n  ChevronDown, ChevronRight, ChevronUp, ImageIcon, Upload, Undo2, Redo2,\n  Sparkles, X, Send, History, Clock, RotateCw, Command, GripVertical\n} from 'lucide-react';\nimport { DeckContent, SlideContent, SlideImage, defaultSlideOrder } from '@/lib/deck-content';\n\nconst MAX_HISTORY = 50;\n\ninterface ChatMessage {\n  id: string;\n  role: 'user' | 'assistant';\n  content: string;\n  timestamp: Date;\n  proposedContent?: DeckContent;\n  changes?: string[];\n  applied?: boolean;\n}\n\ninterface DeckVersionSummary {\n  id: number;\n  description: string | null;\n  createdBy: number | null;\n  createdAt: string;\n}\n\nexport default function DeckEditorPage() {\n  const [content, setContent] = useState&lt;DeckContent | null&gt;(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isSaving, setIsSaving] = useState(false);\n  const [expandedSlides, setExpandedSlides] = useState&lt;Set&lt;string&gt;&gt;(new Set());\n  const [hasChanges, setHasChanges] = useState(false);\n  \n  // Undo/Redo state\n  const [history, setHistory] = useState&lt;DeckContent[]&gt;([]);\n  const [historyIndex, setHistoryIndex] = useState(-1);\n  const isUndoRedo = useRef(false);\n\n  // Chat panel state\n  const [showChat, setShowChat] = useState(false);\n  const [chatMessages, setChatMessages] = useState&lt;ChatMessage[]&gt;([]);\n  const [chatInput, setChatInput] = useState('');\n  const [isAiLoading, setIsAiLoading] = useState(false);\n  const chatEndRef = useRef&lt;HTMLDivElement&gt;(null);\n\n  // Command bar state\n  const [showCommandBar, setShowCommandBar] = useState(false);\n  const [commandInput, setCommandInput] = useState('');\n  const commandInputRef = useRef&lt;HTMLInputElement&gt;(null);\n\n  // Version history state\n  const [showHistory, setShowHistory] = useState(false);\n  const [versions, setVersions] = useState&lt;DeckVersionSummary[]&gt;([]);\n  const [isLoadingVersions, setIsLoadingVersions] = useState(false);\n  const [previewVersion, setPreviewVersion] = useState&lt;DeckContent | null&gt;(null);\n\n  // Keyboard shortcuts\n  useEffect(() =&gt; {\n    const handleKeyDown = (e: KeyboardEvent) =&gt; {\n      // Undo/Redo\n      if ((e.metaKey || e.ctrlKey) &amp;&amp; e.key === 'z') {\n        e.preventDefault();\n        if (e.shiftKey) {\n          redo();\n        } else {\n          undo();\n        }\n      }\n      // Command bar (Cmd+K)\n      if ((e.metaKey || e.ctrlKey) &amp;&amp; e.key === 'k') {\n        e.preventDefault();\n        setShowCommandBar(true);\n        setTimeout(() =&gt; commandInputRef.current?.focus(), 100);\n      }\n      // Close panels on Escape\n      if (e.key === 'Escape') {\n        setShowCommandBar(false);\n        setShowChat(false);\n        setShowHistory(false);\n        setPreviewVersion(null);\n      }\n    };\n    \n    window.addEventListener('keydown', handleKeyDown);\n    return () =&gt; window.removeEventListener('keydown', handleKeyDown);\n  }, [historyIndex, history]);\n\n  // Scroll chat to bottom when new messages arrive\n  useEffect(() =&gt; {\n    chatEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [chatMessages]);\n\n  useEffect(() =&gt; {\n    fetchContent();\n  }, []);\n\n  const fetchContent = async () =&gt; {\n    setIsLoading(true);\n    try {\n      const response = await fetch('/api/deck-content');\n      const data = await response.json();\n      setContent(data);\n      setHistory([data]);\n      setHistoryIndex(0);\n    } catch (error) {\n      console.error('Failed to fetch content:', error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const fetchVersions = async () =&gt; {\n    setIsLoadingVersions(true);\n    try {\n      const response = await fetch('/api/deck-content/versions');\n      const data = await response.json();\n      setVersions(data);\n    } catch (error) {\n      console.error('Failed to fetch versions:', error);\n    } finally {\n      setIsLoadingVersions(false);\n    }\n  };\n\n  const previewVersionContent = async (versionId: number) =&gt; {\n    try {\n      const response = await fetch(&#96;/api/deck-content/versions/${versionId}&#96;);\n      const data = await response.json();\n      setPreviewVersion(data.content);\n    } catch (error) {\n      console.error('Failed to fetch version:', error);\n    }\n  };\n\n  const restoreVersion = async (versionId: number) =&gt; {\n    if (!confirm('Restore this version? Your current changes will be saved as a new version first.')) return;\n    \n    try {\n      // Save current state first\n      if (content &amp;&amp; hasChanges) {\n        await fetch('/api/deck-content', {\n          method: 'PUT',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({ content, description: 'Auto-save before restore' }),\n        });\n      }\n      \n      const response = await fetch(&#96;/api/deck-content/versions/${versionId}/restore&#96;, {\n        method: 'POST',\n      });\n      const data = await response.json();\n      \n      if (data.success) {\n        setContent(data.content);\n        setHistory([data.content]);\n        setHistoryIndex(0);\n        setHasChanges(false);\n        setPreviewVersion(null);\n        setShowHistory(false);\n        fetchVersions();\n      }\n    } catch (error) {\n      console.error('Failed to restore version:', error);\n    }\n  };\n\n  const pushToHistory = useCallback((newContent: DeckContent) =&gt; {\n    if (isUndoRedo.current) {\n      isUndoRedo.current = false;\n      return;\n    }\n    \n    setHistory(prev =&gt; {\n      const newHistory = prev.slice(0, historyIndex + 1);\n      newHistory.push(newContent);\n      if (newHistory.length &gt; MAX_HISTORY) {\n        newHistory.shift();\n        return newHistory;\n      }\n      return newHistory;\n    });\n    setHistoryIndex(prev =&gt; Math.min(prev + 1, MAX_HISTORY - 1));\n  }, [historyIndex]);\n\n  const undo = useCallback(() =&gt; {\n    if (historyIndex &gt; 0) {\n      isUndoRedo.current = true;\n      const newIndex = historyIndex - 1;\n      setHistoryIndex(newIndex);\n      setContent(history[newIndex]);\n      setHasChanges(true);\n    }\n  }, [historyIndex, history]);\n\n  const redo = useCallback(() =&gt; {\n    if (historyIndex &lt; history.length - 1) {\n      isUndoRedo.current = true;\n      const newIndex = historyIndex + 1;\n      setHistoryIndex(newIndex);\n      setContent(history[newIndex]);\n      setHasChanges(true);\n    }\n  }, [historyIndex, history]);\n\n  const canUndo = historyIndex &gt; 0;\n  const canRedo = historyIndex &lt; history.length - 1;\n\n  const saveContent = async (description?: string) =&gt; {\n    if (!content) return;\n    setIsSaving(true);\n    try {\n      const response = await fetch('/api/deck-content', {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ content, description }),\n      });\n      if (response.ok) {\n        setHasChanges(false);\n      }\n    } catch (error) {\n      console.error('Failed to save content:', error);\n      alert('Failed to save content');\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  const resetContent = async () =&gt; {\n    if (!confirm('Reset all content to defaults? This cannot be undone.')) return;\n    try {\n      const response = await fetch('/api/deck-content', { method: 'DELETE' });\n      const data = await response.json();\n      setContent(data);\n      setHistory([data]);\n      setHistoryIndex(0);\n      setHasChanges(false);\n    } catch (error) {\n      console.error('Failed to reset content:', error);\n    }\n  };\n\n  // AI Chat functions\n  const sendChatMessage = async (message: string) =&gt; {\n    if (!message.trim() || !content) return;\n    \n    const userMessage: ChatMessage = {\n      id: Date.now().toString(),\n      role: 'user',\n      content: message,\n      timestamp: new Date(),\n    };\n    \n    setChatMessages(prev =&gt; [...prev, userMessage]);\n    setChatInput('');\n    setIsAiLoading(true);\n    \n    try {\n      const response = await fetch('/api/deck/ai-edit', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          instruction: message,\n          currentContent: content,\n        }),\n      });\n      \n      const data = await response.json();\n      \n      const assistantMessage: ChatMessage = {\n        id: (Date.now() + 1).toString(),\n        role: 'assistant',\n        content: data.success \n          ? &#96;${data.description}\\n\\nChanges:\\n${data.changes?.map((c: string) =&gt; &#96;• ${c}&#96;).join('\\n') || 'Content updated'}&#96;\n          : &#96;Sorry, I couldn't complete that request: ${data.error}&#96;,\n        timestamp: new Date(),\n        proposedContent: data.success ? data.content : undefined,\n        changes: data.changes,\n        applied: false,\n      };\n      \n      setChatMessages(prev =&gt; [...prev, assistantMessage]);\n    } catch (error) {\n      const errorMessage: ChatMessage = {\n        id: (Date.now() + 1).toString(),\n        role: 'assistant',\n        content: 'Sorry, there was an error processing your request. Please try again.',\n        timestamp: new Date(),\n      };\n      setChatMessages(prev =&gt; [...prev, errorMessage]);\n    } finally {\n      setIsAiLoading(false);\n    }\n  };\n\n  const applyProposedChanges = (messageId: string) =&gt; {\n    const message = chatMessages.find(m =&gt; m.id === messageId);\n    if (!message?.proposedContent) return;\n    \n    setContent(message.proposedContent);\n    pushToHistory(message.proposedContent);\n    setHasChanges(true);\n    \n    setChatMessages(prev =&gt; prev.map(m =&gt; \n      m.id === messageId ? { ...m, applied: true } : m\n    ));\n  };\n\n  const handleCommandSubmit = async () =&gt; {\n    if (!commandInput.trim()) return;\n    \n    const command = commandInput.trim();\n    setShowCommandBar(false);\n    setCommandInput('');\n    \n    // Open chat and send the command\n    setShowChat(true);\n    await sendChatMessage(command);\n  };\n\n  const updateCover = (field: keyof DeckContent['cover'], value: string) =&gt; {\n    if (!content) return;\n    const newContent = { ...content, cover: { ...content.cover, [field]: value } };\n    setContent(newContent);\n    pushToHistory(newContent);\n    setHasChanges(true);\n  };\n\n  const updateSlide = (index: number, updates: Partial&lt;SlideContent&gt;) =&gt; {\n    if (!content) return;\n    const newSlides = [...content.slides];\n    newSlides[index] = { ...newSlides[index], ...updates };\n    const newContent = { ...content, slides: newSlides };\n    setContent(newContent);\n    pushToHistory(newContent);\n    setHasChanges(true);\n  };\n\n  const updateSlideSection = (slideIndex: number, sectionIndex: number, updates: Partial&lt;NonNullable&lt;SlideContent['sections']&gt;[0]&gt;) =&gt; {\n    if (!content) return;\n    const newSlides = [...content.slides];\n    const newSections = [...(newSlides[slideIndex].sections || [])];\n    newSections[sectionIndex] = { ...newSections[sectionIndex], ...updates };\n    newSlides[slideIndex] = { ...newSlides[slideIndex], sections: newSections };\n    const newContent = { ...content, slides: newSlides };\n    setContent(newContent);\n    pushToHistory(newContent);\n    setHasChanges(true);\n  };\n\n  const updateSectionItems = (slideIndex: number, sectionIndex: number, items: string[]) =&gt; {\n    updateSlideSection(slideIndex, sectionIndex, { items });\n  };\n\n  const addSectionItem = (slideIndex: number, sectionIndex: number) =&gt; {\n    if (!content) return;\n    const currentItems = content.slides[slideIndex].sections?.[sectionIndex]?.items || [];\n    updateSectionItems(slideIndex, sectionIndex, [...currentItems, '']);\n  };\n\n  const removeSectionItem = (slideIndex: number, sectionIndex: number, itemIndex: number) =&gt; {\n    if (!content) return;\n    const currentItems = content.slides[slideIndex].sections?.[sectionIndex]?.items || [];\n    updateSectionItems(slideIndex, sectionIndex, currentItems.filter((_, i) =&gt; i !== itemIndex));\n  };\n\n  const updateAsk = (field: 'amount' | 'items', value: string | string[]) =&gt; {\n    if (!content) return;\n    const newContent = { ...content, ask: { ...content.ask, [field]: value } };\n    setContent(newContent);\n    pushToHistory(newContent);\n    setHasChanges(true);\n  };\n\n  const toggleSlide = (slideId: string) =&gt; {\n    const newExpanded = new Set(expandedSlides);\n    if (newExpanded.has(slideId)) {\n      newExpanded.delete(slideId);\n    } else {\n      newExpanded.add(slideId);\n    }\n    setExpandedSlides(newExpanded);\n  };\n\n  // Get slides in the current order\n  const getOrderedSlides = () =&gt; {\n    if (!content) return [];\n    const order = content.slideOrder || defaultSlideOrder;\n    const slideMap = new Map(content.slides.map(s =&gt; [s.id, s]));\n    \n    // Get slides in order\n    const ordered = order\n      .map(id =&gt; slideMap.get(id))\n      .filter((s): s is SlideContent =&gt; s !== undefined);\n    \n    // Append any slides not in the order\n    const orderedIds = new Set(order);\n    const remaining = content.slides.filter(s =&gt; !orderedIds.has(s.id));\n    \n    return [...ordered, ...remaining];\n  };\n\n  // Move a slide up or down in the order\n  const moveSlide = (slideId: string, direction: 'up' | 'down') =&gt; {\n    if (!content) return;\n    \n    const currentOrder = content.slideOrder || defaultSlideOrder;\n    const index = currentOrder.indexOf(slideId);\n    \n    if (index === -1) return;\n    if (direction === 'up' &amp;&amp; index === 0) return;\n    if (direction === 'down' &amp;&amp; index === currentOrder.length - 1) return;\n    \n    const newOrder = [...currentOrder];\n    const swapIndex = direction === 'up' ? index - 1 : index + 1;\n    [newOrder[index], newOrder[swapIndex]] = [newOrder[swapIndex], newOrder[index]];\n    \n    const newContent = { ...content, slideOrder: newOrder };\n    setContent(newContent);\n    pushToHistory(newContent);\n    setHasChanges(true);\n  };\n\n  const updateSlideImage = (slideIndex: number, image: SlideImage | undefined) =&gt; {\n    if (!content) return;\n    const newSlides = [...content.slides];\n    newSlides[slideIndex] = { ...newSlides[slideIndex], image };\n    const newContent = { ...content, slides: newSlides };\n    setContent(newContent);\n    pushToHistory(newContent);\n    setHasChanges(true);\n  };\n\n  const handleImageDrop = async (slideIndex: number, e: React.DragEvent&lt;HTMLDivElement&gt;) =&gt; {\n    e.preventDefault();\n    const file = e.dataTransfer.files[0];\n    if (!file || !file.type.startsWith('image/')) return;\n    \n    const reader = new FileReader();\n    reader.onload = () =&gt; {\n      const currentImage = content?.slides[slideIndex]?.image;\n      updateSlideImage(slideIndex, {\n        ...currentImage,\n        type: currentImage?.type || 'infographic',\n        url: reader.result as string,\n        placeholder: currentImage?.placeholder,\n      });\n    };\n    reader.readAsDataURL(file);\n  };\n\n  const handleImageUpload = async (slideIndex: number, e: React.ChangeEvent&lt;HTMLInputElement&gt;) =&gt; {\n    const file = e.target.files?.[0];\n    if (!file || !file.type.startsWith('image/')) return;\n    \n    const reader = new FileReader();\n    reader.onload = () =&gt; {\n      const currentImage = content?.slides[slideIndex]?.image;\n      updateSlideImage(slideIndex, {\n        ...currentImage,\n        type: currentImage?.type || 'infographic',\n        url: reader.result as string,\n        placeholder: currentImage?.placeholder,\n      });\n    };\n    reader.readAsDataURL(file);\n  };\n\n  const removeSlideImage = (slideIndex: number) =&gt; {\n    if (!content) return;\n    const currentImage = content.slides[slideIndex]?.image;\n    if (currentImage) {\n      updateSlideImage(slideIndex, { ...currentImage, url: undefined });\n    }\n  };\n\n  if (isLoading) {\n    return (\n      &lt;div className=\"min-h-screen bg-gray-950 text-white flex items-center justify-center\"&gt;\n        &lt;Loader2 className=\"w-8 h-8 animate-spin\" /&gt;\n      &lt;/div&gt;\n    );\n  }\n\n  if (!content) {\n    return (\n      &lt;div className=\"min-h-screen bg-gray-950 text-white flex items-center justify-center\"&gt;\n        &lt;p&gt;Failed to load content&lt;/p&gt;\n      &lt;/div&gt;\n    );\n  }\n\n  return (\n    &lt;div className=\"min-h-screen bg-gray-950 text-white\"&gt;\n      {/* Command Bar Modal */}\n      {showCommandBar &amp;&amp; (\n        &lt;div className=\"fixed inset-0 z-50 flex items-start justify-center pt-32 bg-black/50\" onClick={() =&gt; setShowCommandBar(false)}&gt;\n          &lt;div \n            className=\"w-full max-w-xl bg-gray-900 rounded-lg shadow-2xl border border-gray-700\"\n            onClick={e =&gt; e.stopPropagation()}\n          &gt;\n            &lt;div className=\"flex items-center gap-3 px-4 py-3 border-b border-gray-700\"&gt;\n              &lt;Command className=\"w-5 h-5 text-gray-400\" /&gt;\n              &lt;input\n                ref={commandInputRef}\n                type=\"text\"\n                value={commandInput}\n                onChange={e =&gt; setCommandInput(e.target.value)}\n                onKeyDown={e =&gt; {\n                  if (e.key === 'Enter') handleCommandSubmit();\n                  if (e.key === 'Escape') setShowCommandBar(false);\n                }}\n                placeholder=\"Describe what you want to change... (e.g., 'add a slide about partnerships')\"\n                className=\"flex-1 bg-transparent text-white placeholder-gray-500 outline-none\"\n                autoFocus\n              /&gt;\n            &lt;/div&gt;\n            &lt;div className=\"px-4 py-2 text-xs text-gray-500\"&gt;\n              Press Enter to submit • Escape to close\n            &lt;/div&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n      )}\n\n      {/* Version History Panel */}\n      {showHistory &amp;&amp; (\n        &lt;div className=\"fixed right-0 top-0 bottom-0 w-96 bg-gray-900 border-l border-gray-700 z-40 flex flex-col\"&gt;\n          &lt;div className=\"flex items-center justify-between px-4 py-3 border-b border-gray-700\"&gt;\n            &lt;h3 className=\"font-semibold flex items-center gap-2\"&gt;\n              &lt;History className=\"w-4 h-4\" /&gt;\n              Version History\n            &lt;/h3&gt;\n            &lt;button onClick={() =&gt; { setShowHistory(false); setPreviewVersion(null); }} className=\"text-gray-400 hover:text-white\"&gt;\n              &lt;X className=\"w-5 h-5\" /&gt;\n            &lt;/button&gt;\n          &lt;/div&gt;\n          \n          {previewVersion ? (\n            &lt;div className=\"flex-1 overflow-auto p-4\"&gt;\n              &lt;div className=\"mb-4 flex gap-2\"&gt;\n                &lt;Button size=\"sm\" variant=\"outline\" onClick={() =&gt; setPreviewVersion(null)} className=\"border-gray-600\"&gt;\n                  Back to List\n                &lt;/Button&gt;\n              &lt;/div&gt;\n              &lt;div className=\"bg-gray-800 rounded-lg p-4 text-sm\"&gt;\n                &lt;h4 className=\"font-medium mb-2\"&gt;Preview&lt;/h4&gt;\n                &lt;p className=\"text-gray-400 mb-2\"&gt;Title: {previewVersion.cover.title}&lt;/p&gt;\n                &lt;p className=\"text-gray-400 mb-2\"&gt;Slides: {previewVersion.slides.length}&lt;/p&gt;\n                &lt;p className=\"text-gray-400\"&gt;Ask: {previewVersion.ask.amount}&lt;/p&gt;\n              &lt;/div&gt;\n            &lt;/div&gt;\n          ) : (\n            &lt;div className=\"flex-1 overflow-auto\"&gt;\n              {isLoadingVersions ? (\n                &lt;div className=\"flex items-center justify-center py-8\"&gt;\n                  &lt;Loader2 className=\"w-6 h-6 animate-spin\" /&gt;\n                &lt;/div&gt;\n              ) : versions.length === 0 ? (\n                &lt;div className=\"text-center py-8 text-gray-500\"&gt;\n                  No saved versions yet\n                &lt;/div&gt;\n              ) : (\n                &lt;div className=\"divide-y divide-gray-800\"&gt;\n                  {versions.map(version =&gt; (\n                    &lt;div key={version.id} className=\"p-4 hover:bg-gray-800/50\"&gt;\n                      &lt;div className=\"flex items-start justify-between mb-2\"&gt;\n                        &lt;div className=\"flex items-center gap-2 text-sm text-gray-400\"&gt;\n                          &lt;Clock className=\"w-3 h-3\" /&gt;\n                          {new Date(version.createdAt).toLocaleString()}\n                        &lt;/div&gt;\n                        &lt;span className=\"text-xs text-gray-500\"&gt;#{version.id}&lt;/span&gt;\n                      &lt;/div&gt;\n                      &lt;p className=\"text-sm mb-3\"&gt;{version.description || 'No description'}&lt;/p&gt;\n                      &lt;div className=\"flex gap-2\"&gt;\n                        &lt;Button \n                          size=\"sm\" \n                          variant=\"outline\" \n                          className=\"text-xs border-gray-600\"\n                          onClick={() =&gt; previewVersionContent(version.id)}\n                        &gt;\n                          &lt;Eye className=\"w-3 h-3 mr-1\" /&gt;\n                          Preview\n                        &lt;/Button&gt;\n                        &lt;Button \n                          size=\"sm\" \n                          variant=\"outline\"\n                          className=\"text-xs border-gray-600\"\n                          onClick={() =&gt; restoreVersion(version.id)}\n                        &gt;\n                          &lt;RotateCw className=\"w-3 h-3 mr-1\" /&gt;\n                          Restore\n                        &lt;/Button&gt;\n                      &lt;/div&gt;\n                    &lt;/div&gt;\n                  ))}\n                &lt;/div&gt;\n              )}\n            &lt;/div&gt;\n          )}\n        &lt;/div&gt;\n      )}\n\n      {/* AI Chat Panel */}\n      {showChat &amp;&amp; (\n        &lt;div className=\"fixed right-0 top-0 bottom-0 w-96 bg-gray-900 border-l border-gray-700 z-40 flex flex-col\"&gt;\n          &lt;div className=\"flex items-center justify-between px-4 py-3 border-b border-gray-700\"&gt;\n            &lt;h3 className=\"font-semibold flex items-center gap-2\"&gt;\n              &lt;Sparkles className=\"w-4 h-4 text-purple-400\" /&gt;\n              AI Assistant\n            &lt;/h3&gt;\n            &lt;button onClick={() =&gt; setShowChat(false)} className=\"text-gray-400 hover:text-white\"&gt;\n              &lt;X className=\"w-5 h-5\" /&gt;\n            &lt;/button&gt;\n          &lt;/div&gt;\n          \n          &lt;div className=\"flex-1 overflow-auto p-4 space-y-4\"&gt;\n            {chatMessages.length === 0 &amp;&amp; (\n              &lt;div className=\"text-center py-8 text-gray-500\"&gt;\n                &lt;Sparkles className=\"w-8 h-8 mx-auto mb-3 text-purple-400/50\" /&gt;\n                &lt;p className=\"mb-2\"&gt;Ask me to edit your deck&lt;/p&gt;\n                &lt;p className=\"text-sm\"&gt;Try: &amp;quot;Add a slide about our team&amp;quot; or &amp;quot;Make the tagline more compelling&amp;quot;&lt;/p&gt;\n              &lt;/div&gt;\n            )}\n            \n            {chatMessages.map(message =&gt; (\n              &lt;div key={message.id} className={&#96;flex ${message.role === 'user' ? 'justify-end' : 'justify-start'}&#96;}&gt;\n                &lt;div className={&#96;max-w-[85%] rounded-lg px-3 py-2 ${\n                  message.role === 'user' \n                    ? 'bg-purple-600 text-white' \n                    : 'bg-gray-800 text-gray-100'\n                }&#96;}&gt;\n                  &lt;p className=\"text-sm whitespace-pre-wrap\"&gt;{message.content}&lt;/p&gt;\n                  \n                  {message.proposedContent &amp;&amp; !message.applied &amp;&amp; (\n                    &lt;div className=\"mt-3 pt-2 border-t border-gray-700\"&gt;\n                      &lt;Button\n                        size=\"sm\"\n                        onClick={() =&gt; applyProposedChanges(message.id)}\n                        className=\"bg-green-600 hover:bg-green-700 text-white text-xs\"\n                      &gt;\n                        Apply Changes\n                      &lt;/Button&gt;\n                    &lt;/div&gt;\n                  )}\n                  \n                  {message.applied &amp;&amp; (\n                    &lt;div className=\"mt-2 text-xs text-green-400 flex items-center gap-1\"&gt;\n                      &lt;svg className=\"w-3 h-3\" fill=\"currentColor\" viewBox=\"0 0 20 20\"&gt;\n                        &lt;path fillRule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clipRule=\"evenodd\" /&gt;\n                      &lt;/svg&gt;\n                      Applied\n                    &lt;/div&gt;\n                  )}\n                &lt;/div&gt;\n              &lt;/div&gt;\n            ))}\n            \n            {isAiLoading &amp;&amp; (\n              &lt;div className=\"flex justify-start\"&gt;\n                &lt;div className=\"bg-gray-800 rounded-lg px-3 py-2\"&gt;\n                  &lt;Loader2 className=\"w-4 h-4 animate-spin text-purple-400\" /&gt;\n                &lt;/div&gt;\n              &lt;/div&gt;\n            )}\n            \n            &lt;div ref={chatEndRef} /&gt;\n          &lt;/div&gt;\n          \n          &lt;div className=\"p-4 border-t border-gray-700\"&gt;\n            &lt;div className=\"flex gap-2\"&gt;\n              &lt;input\n                type=\"text\"\n                value={chatInput}\n                onChange={e =&gt; setChatInput(e.target.value)}\n                onKeyDown={e =&gt; {\n                  if (e.key === 'Enter' &amp;&amp; !e.shiftKey) {\n                    e.preventDefault();\n                    sendChatMessage(chatInput);\n                  }\n                }}\n                placeholder=\"Describe your changes...\"\n                className=\"flex-1 bg-gray-800 border border-gray-700 rounded px-3 py-2 text-sm text-white placeholder-gray-500\"\n                disabled={isAiLoading}\n              /&gt;\n              &lt;Button\n                size=\"sm\"\n                onClick={() =&gt; sendChatMessage(chatInput)}\n                disabled={!chatInput.trim() || isAiLoading}\n                className=\"bg-purple-600 hover:bg-purple-700\"\n              &gt;\n                &lt;Send className=\"w-4 h-4\" /&gt;\n              &lt;/Button&gt;\n            &lt;/div&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n      )}\n\n      {/* Header */}\n      &lt;div className=\"sticky top-0 z-10 bg-gray-900 border-b border-gray-800\"&gt;\n        &lt;div className=\"container px-4 py-4 flex items-center justify-between\"&gt;\n          &lt;div className=\"flex items-center gap-4\"&gt;\n            &lt;Link href=\"/admin\" className=\"text-gray-400 hover:text-white\"&gt;\n              &lt;ArrowLeft className=\"w-5 h-5\" /&gt;\n            &lt;/Link&gt;\n            &lt;h1 className=\"text-xl font-bold\"&gt;Edit Pitch Deck&lt;/h1&gt;\n            {hasChanges &amp;&amp; (\n              &lt;span className=\"text-xs bg-yellow-600 px-2 py-1 rounded\"&gt;Unsaved changes&lt;/span&gt;\n            )}\n          &lt;/div&gt;\n          \n          &lt;div className=\"flex items-center gap-2\"&gt;\n            &lt;Button\n              onClick={undo}\n              disabled={!canUndo}\n              variant=\"outline\"\n              size=\"sm\"\n              className=\"border-gray-700 text-gray-300 disabled:opacity-30\"\n              title=\"Undo (Cmd+Z)\"\n            &gt;\n              &lt;Undo2 className=\"w-4 h-4\" /&gt;\n            &lt;/Button&gt;\n            &lt;Button\n              onClick={redo}\n              disabled={!canRedo}\n              variant=\"outline\"\n              size=\"sm\"\n              className=\"border-gray-700 text-gray-300 disabled:opacity-30\"\n              title=\"Redo (Cmd+Shift+Z)\"\n            &gt;\n              &lt;Redo2 className=\"w-4 h-4\" /&gt;\n            &lt;/Button&gt;\n            &lt;div className=\"w-px h-6 bg-gray-700 mx-1\" /&gt;\n            &lt;Button\n              onClick={() =&gt; { setShowHistory(true); fetchVersions(); }}\n              variant=\"outline\"\n              size=\"sm\"\n              className=\"border-gray-700 text-gray-300\"\n              title=\"Version History\"\n            &gt;\n              &lt;History className=\"w-4 h-4\" /&gt;\n            &lt;/Button&gt;\n            &lt;Button\n              onClick={() =&gt; setShowChat(true)}\n              variant=\"outline\"\n              size=\"sm\"\n              className=\"border-gray-700 text-gray-300\"\n              title=\"AI Assistant\"\n            &gt;\n              &lt;Sparkles className=\"w-4 h-4\" /&gt;\n            &lt;/Button&gt;\n            &lt;Button\n              onClick={() =&gt; setShowCommandBar(true)}\n              variant=\"outline\"\n              size=\"sm\"\n              className=\"border-gray-700 text-gray-300\"\n              title=\"Quick Command (Cmd+K)\"\n            &gt;\n              &lt;Command className=\"w-4 h-4\" /&gt;\n            &lt;/Button&gt;\n            &lt;div className=\"w-px h-6 bg-gray-700 mx-1\" /&gt;\n            &lt;Button\n              onClick={resetContent}\n              variant=\"outline\"\n              size=\"sm\"\n              className=\"border-gray-700 text-gray-300\"\n            &gt;\n              &lt;RotateCcw className=\"w-4 h-4 mr-2\" /&gt;\n              Reset\n            &lt;/Button&gt;\n            &lt;Link href=\"/deck\" target=\"_blank\"&gt;\n              &lt;Button variant=\"outline\" size=\"sm\" className=\"border-gray-700 text-gray-300\"&gt;\n                &lt;Eye className=\"w-4 h-4 mr-2\" /&gt;\n                Preview\n              &lt;/Button&gt;\n            &lt;/Link&gt;\n            &lt;Button\n              onClick={() =&gt; saveContent()}\n              disabled={isSaving || !hasChanges}\n              size=\"sm\"\n              className=\"bg-white text-black hover:bg-gray-200\"\n            &gt;\n              {isSaving ? &lt;Loader2 className=\"w-4 h-4 mr-2 animate-spin\" /&gt; : &lt;Save className=\"w-4 h-4 mr-2\" /&gt;}\n              Save\n            &lt;/Button&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n\n      &lt;div className={&#96;container px-4 py-8 max-w-4xl transition-all ${showChat || showHistory ? 'mr-96' : ''}&#96;}&gt;\n        {/* Cover Section */}\n        &lt;section className=\"mb-8\"&gt;\n          &lt;h2 className=\"text-lg font-semibold mb-4 text-gray-300\"&gt;Slides&lt;/h2&gt;\n          &lt;div className=\"bg-gray-900 rounded-lg overflow-hidden mb-2\"&gt;\n            &lt;button\n              onClick={() =&gt; toggleSlide('cover')}\n              className=\"w-full px-4 py-3 flex items-center justify-between hover:bg-gray-800 transition-colors\"\n            &gt;\n              &lt;span className=\"font-medium\"&gt;1. Cover Slide&lt;/span&gt;\n              {expandedSlides.has('cover') ? (\n                &lt;ChevronDown className=\"w-5 h-5 text-gray-400\" /&gt;\n              ) : (\n                &lt;ChevronRight className=\"w-5 h-5 text-gray-400\" /&gt;\n              )}\n            &lt;/button&gt;\n            \n            {expandedSlides.has('cover') &amp;&amp; (\n              &lt;div className=\"px-4 pb-4 space-y-4 border-t border-gray-800\"&gt;\n                &lt;div className=\"pt-4\"&gt;\n                  &lt;label className=\"block text-sm text-gray-400 mb-1\"&gt;Title&lt;/label&gt;\n                  &lt;input\n                    type=\"text\"\n                    value={content.cover.title}\n                    onChange={(e) =&gt; updateCover('title', e.target.value)}\n                    className=\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\"\n                  /&gt;\n                &lt;/div&gt;\n                &lt;div&gt;\n                  &lt;label className=\"block text-sm text-gray-400 mb-1\"&gt;Tagline&lt;/label&gt;\n                  &lt;textarea\n                    value={content.cover.tagline}\n                    onChange={(e) =&gt; updateCover('tagline', e.target.value)}\n                    rows={2}\n                    className=\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\"\n                  /&gt;\n                &lt;/div&gt;\n                &lt;div&gt;\n                  &lt;label className=\"block text-sm text-gray-400 mb-1\"&gt;Subtagline&lt;/label&gt;\n                  &lt;input\n                    type=\"text\"\n                    value={content.cover.subtagline}\n                    onChange={(e) =&gt; updateCover('subtagline', e.target.value)}\n                    className=\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\"\n                  /&gt;\n                &lt;/div&gt;\n                &lt;div&gt;\n                  &lt;label className=\"block text-sm text-gray-400 mb-1\"&gt;URL&lt;/label&gt;\n                  &lt;input\n                    type=\"text\"\n                    value={content.cover.url}\n                    onChange={(e) =&gt; updateCover('url', e.target.value)}\n                    className=\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\"\n                  /&gt;\n                &lt;/div&gt;\n              &lt;/div&gt;\n            )}\n          &lt;/div&gt;\n\n          {getOrderedSlides().map((slide, orderIndex) =&gt; {\n            // Find original index in content.slides for updates\n            const originalIndex = content.slides.findIndex(s =&gt; s.id === slide.id);\n            const currentOrder = content.slideOrder || defaultSlideOrder;\n            const isFirst = currentOrder.indexOf(slide.id) === 0;\n            const isLast = currentOrder.indexOf(slide.id) === currentOrder.length - 1;\n            \n            return (\n              &lt;div key={slide.id} className=\"bg-gray-900 rounded-lg overflow-hidden mb-2\"&gt;\n                &lt;div className=\"flex items-center\"&gt;\n                  {/* Reorder buttons */}\n                  &lt;div className=\"flex flex-col border-r border-gray-800\"&gt;\n                    &lt;button\n                      onClick={(e) =&gt; { e.stopPropagation(); moveSlide(slide.id, 'up'); }}\n                      disabled={isFirst}\n                      className=\"px-2 py-1 text-gray-400 hover:text-white hover:bg-gray-800 disabled:opacity-30 disabled:cursor-not-allowed transition-colors\"\n                      title=\"Move up\"\n                    &gt;\n                      &lt;ChevronUp className=\"w-4 h-4\" /&gt;\n                    &lt;/button&gt;\n                    &lt;button\n                      onClick={(e) =&gt; { e.stopPropagation(); moveSlide(slide.id, 'down'); }}\n                      disabled={isLast}\n                      className=\"px-2 py-1 text-gray-400 hover:text-white hover:bg-gray-800 disabled:opacity-30 disabled:cursor-not-allowed transition-colors\"\n                      title=\"Move down\"\n                    &gt;\n                      &lt;ChevronDown className=\"w-4 h-4\" /&gt;\n                    &lt;/button&gt;\n                  &lt;/div&gt;\n                  \n                  {/* Slide header */}\n                  &lt;button\n                    onClick={() =&gt; toggleSlide(slide.id)}\n                    className=\"flex-1 px-4 py-3 flex items-center justify-between hover:bg-gray-800 transition-colors\"\n                  &gt;\n                    &lt;span className=\"font-medium\"&gt;\n                      {orderIndex + 2}. {slide.title}\n                    &lt;/span&gt;\n                    {expandedSlides.has(slide.id) ? (\n                      &lt;ChevronDown className=\"w-5 h-5 text-gray-400\" /&gt;\n                    ) : (\n                      &lt;ChevronRight className=\"w-5 h-5 text-gray-400\" /&gt;\n                    )}\n                  &lt;/button&gt;\n                &lt;/div&gt;\n                \n                {expandedSlides.has(slide.id) &amp;&amp; (\n                  &lt;div className=\"px-4 pb-4 space-y-4 border-t border-gray-800\"&gt;\n                    &lt;div className=\"pt-4\"&gt;\n                      &lt;label className=\"block text-sm text-gray-400 mb-1\"&gt;Title&lt;/label&gt;\n                      &lt;input\n                        type=\"text\"\n                        value={slide.title}\n                        onChange={(e) =&gt; updateSlide(originalIndex, { title: e.target.value })}\n                        className=\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\"\n                      /&gt;\n                    &lt;/div&gt;\n                    \n                    &lt;div&gt;\n                      &lt;label className=\"block text-sm text-gray-400 mb-1\"&gt;Subtitle&lt;/label&gt;\n                      &lt;input\n                        type=\"text\"\n                        value={slide.subtitle || ''}\n                        onChange={(e) =&gt; updateSlide(originalIndex, { subtitle: e.target.value })}\n                        className=\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\"\n                      /&gt;\n                    &lt;/div&gt;\n\n                    {/* Sections */}\n                    {slide.sections?.map((section, sectionIndex) =&gt; (\n                      &lt;div key={sectionIndex} className=\"bg-gray-800 rounded p-3 space-y-3\"&gt;\n                        &lt;div&gt;\n                          &lt;label className=\"block text-xs text-gray-500 mb-1\"&gt;Section Heading&lt;/label&gt;\n                          &lt;input\n                            type=\"text\"\n                            value={section.heading || ''}\n                            onChange={(e) =&gt; updateSlideSection(originalIndex, sectionIndex, { heading: e.target.value })}\n                            className=\"w-full bg-gray-700 border border-gray-600 rounded px-2 py-1 text-sm text-white\"\n                          /&gt;\n                        &lt;/div&gt;\n                        \n                        {section.text !== undefined &amp;&amp; (\n                          &lt;div&gt;\n                            &lt;label className=\"block text-xs text-gray-500 mb-1\"&gt;Text&lt;/label&gt;\n                            &lt;textarea\n                              value={section.text}\n                              onChange={(e) =&gt; updateSlideSection(originalIndex, sectionIndex, { text: e.target.value })}\n                              rows={2}\n                              className=\"w-full bg-gray-700 border border-gray-600 rounded px-2 py-1 text-sm text-white\"\n                            /&gt;\n                          &lt;/div&gt;\n                        )}\n                        \n                        {section.items &amp;&amp; (\n                          &lt;div&gt;\n                            &lt;label className=\"block text-xs text-gray-500 mb-1\"&gt;Bullet Points&lt;/label&gt;\n                            {section.items.map((item, itemIndex) =&gt; (\n                              &lt;div key={itemIndex} className=\"flex gap-2 mb-1\"&gt;\n                                &lt;input\n                                  type=\"text\"\n                                  value={item}\n                                  onChange={(e) =&gt; {\n                                    const newItems = [...section.items!];\n                                    newItems[itemIndex] = e.target.value;\n                                    updateSectionItems(originalIndex, sectionIndex, newItems);\n                                  }}\n                                  className=\"flex-1 bg-gray-700 border border-gray-600 rounded px-2 py-1 text-sm text-white\"\n                                /&gt;\n                                &lt;button\n                                  onClick={() =&gt; removeSectionItem(originalIndex, sectionIndex, itemIndex)}\n                                  className=\"text-red-400 hover:text-red-300 p-1\"\n                                &gt;\n                                  &lt;Trash2 className=\"w-4 h-4\" /&gt;\n                                &lt;/button&gt;\n                              &lt;/div&gt;\n                            ))}\n                            &lt;button\n                              onClick={() =&gt; addSectionItem(originalIndex, sectionIndex)}\n                              className=\"text-xs text-gray-400 hover:text-white flex items-center gap-1 mt-1\"\n                            &gt;\n                              &lt;Plus className=\"w-3 h-3\" /&gt; Add item\n                            &lt;/button&gt;\n                          &lt;/div&gt;\n                        )}\n                      &lt;/div&gt;\n                    ))}\n\n                    {slide.highlight &amp;&amp; (\n                      &lt;div&gt;\n                        &lt;label className=\"block text-sm text-gray-400 mb-1\"&gt;Highlight Box&lt;/label&gt;\n                        &lt;textarea\n                          value={slide.highlight}\n                          onChange={(e) =&gt; updateSlide(originalIndex, { highlight: e.target.value })}\n                          rows={2}\n                          className=\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\"\n                        /&gt;\n                      &lt;/div&gt;\n                    )}\n\n                    {slide.footnote &amp;&amp; (\n                      &lt;div&gt;\n                        &lt;label className=\"block text-sm text-gray-400 mb-1\"&gt;Footnote&lt;/label&gt;\n                        &lt;input\n                          type=\"text\"\n                          value={slide.footnote}\n                          onChange={(e) =&gt; updateSlide(originalIndex, { footnote: e.target.value })}\n                          className=\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\"\n                        /&gt;\n                      &lt;/div&gt;\n                    )}\n\n                    {/* Image Section */}\n                    &lt;div className=\"border-t border-gray-700 pt-4 mt-4\"&gt;\n                      &lt;label className=\"block text-sm text-gray-400 mb-2\"&gt;Slide Image&lt;/label&gt;\n                      \n                      {slide.image?.url ? (\n                        &lt;div className=\"relative\"&gt;\n                          &lt;div className=\"relative w-full h-48 bg-gray-800 rounded-lg overflow-hidden\"&gt;\n                            &lt;img\n                              src={slide.image.url}\n                              alt={slide.image.placeholder || 'Slide image'}\n                              className=\"w-full h-full object-contain\"\n                            /&gt;\n                          &lt;/div&gt;\n                          &lt;button\n                            onClick={() =&gt; removeSlideImage(originalIndex)}\n                            className=\"absolute top-2 right-2 bg-red-600 hover:bg-red-700 text-white p-1 rounded\"\n                          &gt;\n                            &lt;Trash2 className=\"w-4 h-4\" /&gt;\n                          &lt;/button&gt;\n                          &lt;p className=\"text-xs text-gray-500 mt-1\"&gt;{slide.image.placeholder}&lt;/p&gt;\n                        &lt;/div&gt;\n                      ) : (\n                        &lt;div\n                          onDrop={(e) =&gt; handleImageDrop(originalIndex, e)}\n                          onDragOver={(e) =&gt; e.preventDefault()}\n                          className=\"border-2 border-dashed border-gray-600 rounded-lg p-6 text-center hover:border-gray-500 transition-colors\"\n                        &gt;\n                          &lt;ImageIcon className=\"w-12 h-12 mx-auto text-gray-500 mb-3\" /&gt;\n                          &lt;p className=\"text-sm text-gray-400 mb-2\"&gt;\n                            {slide.image?.placeholder || 'Drag &amp; drop image here'}\n                          &lt;/p&gt;\n                          &lt;p className=\"text-xs text-gray-500 mb-3\"&gt;\n                            Type: {slide.image?.type || 'Not set'}\n                          &lt;/p&gt;\n                          &lt;label className=\"cursor-pointer\"&gt;\n                            &lt;span className=\"inline-flex items-center gap-2 px-3 py-1.5 bg-gray-700 hover:bg-gray-600 rounded text-sm text-white\"&gt;\n                              &lt;Upload className=\"w-4 h-4\" /&gt;\n                              Upload Image\n                            &lt;/span&gt;\n                            &lt;input\n                              type=\"file\"\n                              accept=\"image/*\"\n                              onChange={(e) =&gt; handleImageUpload(originalIndex, e)}\n                              className=\"hidden\"\n                            /&gt;\n                          &lt;/label&gt;\n                        &lt;/div&gt;\n                      )}\n                      \n                      &lt;div className=\"mt-2\"&gt;\n                        &lt;label className=\"block text-xs text-gray-500 mb-1\"&gt;Image Description (for AI generation)&lt;/label&gt;\n                        &lt;input\n                          type=\"text\"\n                          value={slide.image?.placeholder || ''}\n                          onChange={(e) =&gt; updateSlideImage(originalIndex, {\n                            ...slide.image,\n                            type: slide.image?.type || 'infographic',\n                            placeholder: e.target.value,\n                          })}\n                          placeholder=\"Describe the image you want...\"\n                          className=\"w-full bg-gray-700 border border-gray-600 rounded px-2 py-1 text-sm text-white\"\n                        /&gt;\n                      &lt;/div&gt;\n                      \n                      &lt;div className=\"mt-2\"&gt;\n                        &lt;label className=\"block text-xs text-gray-500 mb-1\"&gt;Image Type&lt;/label&gt;\n                        &lt;select\n                          value={slide.image?.type || 'infographic'}\n                          onChange={(e) =&gt; updateSlideImage(originalIndex, {\n                            ...slide.image,\n                            type: e.target.value as SlideImage['type'],\n                            placeholder: slide.image?.placeholder,\n                          })}\n                          className=\"w-full bg-gray-700 border border-gray-600 rounded px-2 py-1 text-sm text-white\"\n                        &gt;\n                          &lt;option value=\"icon\"&gt;Icon&lt;/option&gt;\n                          &lt;option value=\"chart\"&gt;Chart&lt;/option&gt;\n                          &lt;option value=\"mockup\"&gt;Mockup&lt;/option&gt;\n                          &lt;option value=\"infographic\"&gt;Infographic&lt;/option&gt;\n                          &lt;option value=\"photo\"&gt;Photo&lt;/option&gt;\n                          &lt;option value=\"diagram\"&gt;Diagram&lt;/option&gt;\n                        &lt;/select&gt;\n                      &lt;/div&gt;\n                    &lt;/div&gt;\n                  &lt;/div&gt;\n                )}\n              &lt;/div&gt;\n            );\n          })}\n        &lt;/section&gt;\n\n        {/* Ask Section */}\n        &lt;section className=\"mb-8\"&gt;\n          &lt;h2 className=\"text-lg font-semibold mb-4 text-gray-300\"&gt;The Ask&lt;/h2&gt;\n          &lt;div className=\"bg-gray-900 rounded-lg p-4 space-y-4\"&gt;\n            &lt;div&gt;\n              &lt;label className=\"block text-sm text-gray-400 mb-1\"&gt;Amount&lt;/label&gt;\n              &lt;input\n                type=\"text\"\n                value={content.ask.amount}\n                onChange={(e) =&gt; updateAsk('amount', e.target.value)}\n                className=\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\"\n              /&gt;\n            &lt;/div&gt;\n            &lt;div&gt;\n              &lt;label className=\"block text-sm text-gray-400 mb-1\"&gt;What we&amp;apos;ll do with the funding&lt;/label&gt;\n              {content.ask.items.map((item, index) =&gt; (\n                &lt;div key={index} className=\"flex gap-2 mb-2\"&gt;\n                  &lt;input\n                    type=\"text\"\n                    value={item}\n                    onChange={(e) =&gt; {\n                      const newItems = [...content.ask.items];\n                      newItems[index] = e.target.value;\n                      updateAsk('items', newItems);\n                    }}\n                    className=\"flex-1 bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\"\n                  /&gt;\n                  &lt;button\n                    onClick={() =&gt; {\n                      const newItems = content.ask.items.filter((_, i) =&gt; i !== index);\n                      updateAsk('items', newItems);\n                    }}\n                    className=\"text-red-400 hover:text-red-300 p-2\"\n                  &gt;\n                    &lt;Trash2 className=\"w-4 h-4\" /&gt;\n                  &lt;/button&gt;\n                &lt;/div&gt;\n              ))}\n              &lt;button\n                onClick={() =&gt; updateAsk('items', [...content.ask.items, ''])}\n                className=\"text-sm text-gray-400 hover:text-white flex items-center gap-1\"\n              &gt;\n                &lt;Plus className=\"w-4 h-4\" /&gt; Add item\n              &lt;/button&gt;\n            &lt;/div&gt;\n          &lt;/div&gt;\n        &lt;/section&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  );\n}\n",
  "totalLinesInFile": 1145
}
```
Status: **completed**


</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
The problem is clear: `deck-content.ts` uses Node.js `fs` and `path` modules, but it's being imported in the client-side component `app/admin/deck/page.tsx` (which has `'use client'` at the top).

The client component only imports types and `defaultSlideOrder` from the file, which don't actually require `fs`/`path`. However, since the file imports `fs` and `path` at the top level, the bundler tries to include them, which fails in the browser context.

The solution is to split this file:
1. Create a separate file for types and constants that can be used in client components
2. Keep the server-side functions (that use `fs`) in a separate file marked as server-only

Or simpler: just move the types, constants, and pure functions to a separate file that doesn't import `fs`/`path`, and keep the file operations in the original file or a server-only module.

Let me look at what the client component actually imports:
```typescript
import { DeckContent, SlideContent, SlideImage, defaultSlideOrder } from '@/lib/deck-content';
```

It only needs:
- `DeckContent` (type)
- `SlideContent` (type) 
- `SlideImage` (type)
- `defaultSlideOrder` (constant)

So the fix is to split the file - create a `deck-content-types.ts` or `deck-content-shared.ts` that has the types and constants without `fs`/`path`, and keep the server-side file operations in the original file or another server-only module.

Let me create the fix.</details></think>

---

The issue is that `lib/deck-content.ts` imports Node.js `fs` and `path` modules, but the client component only needs the types and constants. I'll split this into two files:

1. A shared file with types/constants (safe for client)
2. The server-only file with filesystem operations

---

Cancelled

---

_**User (2025-12-09 10:50Z)**_

not fixed

---

_**Agent (model claude-4.5-opus-high-thinking, mode Agent)**_

<think><details><summary>Thought Process</summary>
The issue is that `lib/deck-content.ts` uses Node.js `fs` and `path` modules, but it's being imported by a client component (`app/admin/deck/page.tsx` which has `'use client'`). 

The client component only imports types and `defaultSlideOrder` from `deck-content.ts`, but since the file has `fs` and `path` imports at the top level, it breaks.

The solution is to split the file:
1. Keep types and default content in a file that can be used on both client and server
2. Move the file system operations (`getDeckContent`, `updateDeckContent`, `resetDeckContent`) to a server-only file

Let me split `lib/deck-content.ts` into two files:
1. `lib/deck-content.ts` - types, defaults, and pure functions (no fs/path)
2. `lib/deck-content-server.ts` - file system operations (server-only)

Then I need to update any imports of the server functions to use the new file.</details></think>

---

The issue is that `deck-content.ts` imports `fs` and `path` at the top level, but the admin page is a client component that imports from it. Need to split the file.

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "/Users/boskombp16/GitHub/directorforgood.org/lib/deck-content.ts"
}
```
Additional data:

```json
{
  "codeblockId": "4bf10e5a-355d-4b54-a716-93a206a53050"
}
```
Status: **completed**


</details>
</tool-use>

---

_**User (2025-12-09 10:50Z)**_

<think><details><summary>Thought Process</summary>
The user sent an empty message. The workspace changed. Let me continue fixing the issue - I need to remove the fs-related functions from deck-content.ts and move them to a server-only file.</details></think>

---

_**Agent (model claude-4.5-opus-high-thinking, mode Agent)**_

<tool-use data-tool-type="unknown" data-tool-name="read_file_v2">
<details>
<summary>Tool use: **read_file_v2**</summary>


Parameters:

```json
{
  "targetFile": "/Users/boskombp16/GitHub/directorforgood.org/lib/deck-content.ts",
  "charsLimit": 1000000,
  "effectiveUri": "/Users/boskombp16/GitHub/directorforgood.org/lib/deck-content.ts"
}
```
Result:

```json
{
  "contents": "// Shared content for both web and PDF pitch deck\n// Edit via the admin interface at /admin/deck\n\nexport interface SlideImage {\n  url?: string;  // Image URL (uploaded or external)\n  placeholder?: string;  // Description for AI generation or placeholder text\n  type: 'icon' | 'chart' | 'mockup' | 'infographic' | 'photo' | 'diagram';\n}\n\nexport interface TeamMemberInfo {\n  name: string;\n  role: string;\n  bio: string;\n  image: string;\n}\n\nexport interface SlideContent {\n  id: string;\n  title: string;\n  subtitle?: string;\n  sections?: {\n    heading?: string;\n    items?: string[];\n    text?: string;\n  }[];\n  teamMembers?: TeamMemberInfo[];\n  highlight?: string;\n  footnote?: string;\n  image?: SlideImage;\n}\n\nexport interface DeckContent {\n  cover: {\n    title: string;\n    tagline: string;\n    subtagline: string;\n    url: string;\n  };\n  slides: SlideContent[];\n  slideOrder?: string[]; // Array of slide IDs in display order\n  ask: {\n    amount: string;\n    items: string[];\n  };\n}\n\n// Default slide order with market moved after economics for better narrative flow\nexport const defaultSlideOrder: string[] = [\n  'problem-founders',\n  'problem-downshifted',\n  'customer-foundations',\n  'broken-options',\n  'what-we-are',\n  'fundraising-philosophy',\n  'director-pod',\n  'director-os',\n  'ai-agents',\n  'economics',\n  'market',           // Moved here from position 4 - show market after explaining the solution\n  'why-now',\n  'go-to-market',\n  'business-model',\n  'strategic-partners',\n  'team',\n  'current-customers',\n  'roadmap',\n];\n\nexport const defaultDeckContent: DeckContent = {\n  cover: {\n    title: \"Director\",\n    tagline: \"The AI-native operating system and forward-deployed backbone for nonprofits\",\n    subtagline: \"Turning under-resourced founders into fundable, operationally tight organizations\",\n    url: \"directorforgood.org\",\n  },\n  slides: [\n    {\n      id: \"problem-founders\",\n      title: \"Problem – Founders Are the Whole Leadership Team\",\n      subtitle: \"Nonprofit founders are carrying 5 jobs on 1 salary.\",\n      sections: [\n        {\n          heading: \"They're expected to:\",\n          items: [\n            \"Lead programs and vision\",\n            \"Raise money (major gifts, grants, events)\",\n            \"Run operations and finance\",\n            \"Own communications and storytelling\",\n            \"Manage staff, boards, and compliance\",\n          ],\n        },\n      ],\n      highlight: \"Promising orgs plateau at $300–600k or quietly shut down — not for lack of impact, but for lack of backbone.\",\n      footnote: \"When funding tightens and staff are cut, all of this collapses back onto one person.\",\n      image: {\n        type: 'infographic',\n        placeholder: 'Infographic showing one person juggling 5 different roles/hats',\n      },\n    },\n    {\n      id: \"problem-downshifted\",\n      title: \"Problem – Downshifted Orgs (Beachhead)\",\n      subtitle: \"Our initial focus: orgs that already proved they can raise $400k–$1M.\",\n      sections: [\n        {\n          heading: \"These orgs:\",\n          items: [\n            \"Have real donor and community relationships\",\n            \"Have a history of 7-figure budgets or close\",\n          ],\n        },\n        {\n          heading: \"But in the current funding environment:\",\n          items: [\n            \"They've laid off staff\",\n            \"The founder is back to doing everything\",\n            \"Many are considering shutting down despite strong demand\",\n          ],\n        },\n      ],\n      highlight: \"These leaders don't need another tool. They need a backbone.\",\n      footnote: \"This hits founders of color especially hard, as equity-era funding retrenches.\",\n      image: {\n        type: 'chart',\n        placeholder: 'Chart showing org budget trajectory: growth to $1M, then decline/plateau',\n      },\n    },\n    {\n      id: \"customer-foundations\",\n      title: \"Ideal Customer – Foundations as Buyers\",\n      subtitle: \"Foundations can sponsor multiple orgs at once.\",\n      sections: [\n        {\n          heading: \"The opportunity:\",\n          items: [\n            \"Foundations already fund capacity-building for grantees\",\n            \"They can purchase Director packages for 5–10 orgs\",\n            \"One contract, multiple organizations transformed\",\n          ],\n        },\n        {\n          heading: \"Why this works:\",\n          items: [\n            \"Foundations get measurable capacity ROI across portfolio\",\n            \"Orgs get backbone support they couldn't afford alone\",\n            \"Director gets predictable, larger contracts\",\n          ],\n        },\n      ],\n      highlight: \"A single foundation can unlock Director for an entire cohort of grantees.\",\n      image: {\n        type: 'diagram',\n        placeholder: 'Foundation at center connected to 5-10 nonprofit orgs, each with Director backbone',\n      },\n    },\n    {\n      id: \"market\",\n      title: \"Market Opportunity\",\n      subtitle: \"A massive, underserved market ready for AI-native solutions.\",\n      sections: [\n        {\n          heading: \"TAM: $164B – Total US Nonprofit Administrative Spending\",\n          items: [\n            \"1.8M nonprofits in the US (1.5M are 501(c)(3)s)\",\n            \"Nonprofit sector contributes $1.4 trillion to GDP\",\n            \"Administrative overhead averages 11.7% = $164B annually\",\n            \"This spending is ripe for AI automation\",\n          ],\n        },\n        {\n          heading: \"SAM: $3.5B – Small/Mid Nonprofits ($250k–$2M budgets)\",\n          items: [\n            \"~108,000 organizations in our target segment\",\n            \"92% of nonprofits operate under $1M/year\",\n            \"Current back-office spend: $32k–$200k per org\",\n            \"Existing solutions: $5.5B nonprofit software + $6.7B consulting market\",\n          ],\n        },\n        {\n          heading: \"SOM: $50M – 5-Year Obtainable Market\",\n          items: [\n            \"500 organizations at ~$100k/year\",\n            \"30–50 pods at 10–16 orgs each\",\n            \"Represents &lt;2% of SAM (credible capture rate)\",\n          ],\n        },\n      ],\n      highlight: \"68% of nonprofits now use AI (up from 58% in 2023). The market is ready for an AI-native backbone.\",\n      footnote: \"Sources: Independent Sector, Statista, NCCS, Google for Nonprofits Survey 2025, Intent Market Research\",\n      image: {\n        type: 'chart',\n        placeholder: 'TAM/SAM/SOM concentric circles: $164B → $3.5B → $50M',\n      },\n    },\n    {\n      id: \"broken-options\",\n      title: \"Broken Options\",\n      subtitle: \"Existing solutions don't fit this stage.\",\n      sections: [\n        {\n          heading: \"DIY SaaS stack\",\n          text: \"CRMs, grant tools, accounting, email… Founders don't have time to integrate and maintain them.\",\n        },\n        {\n          heading: \"Consultants &amp; agencies\",\n          text: \"Project-based, expensive, seen as \\\"overhead.\\\" Advice without ongoing responsibility.\",\n        },\n        {\n          heading: \"Rebuilding staff\",\n          items: [\n            \"ED: $100–150k\",\n            \"Ops/Finance: ~$100k\",\n            \"Development: ~$100k\",\n            \"Comms/Program ops: $60–100k\",\n          ],\n        },\n      ],\n      highlight: \"There is no integrated, AI-native backbone designed for $400k–$1M orgs that have real relationships but no team.\",\n      footnote: \"$360–450k/year for the backbone on a fragile budget.\",\n      image: {\n        type: 'diagram',\n        placeholder: 'Comparison diagram: scattered SaaS logos vs consultant icons vs expensive staff org chart',\n      },\n    },\n    {\n      id: \"what-we-are\",\n      title: \"Director – What We Are\",\n      subtitle: \"Director is an AI-native backbone and forward-deployed team for nonprofits.\",\n      sections: [\n        {\n          heading: \"Director OS – a vertical operating system for:\",\n          items: [\n            \"Revenue &amp; relationships\",\n            \"Runway &amp; finance\",\n            \"Ops &amp; compliance\",\n            \"Board &amp; funder narratives\",\n          ],\n        },\n        {\n          heading: \"Director Pod – shared leadership capacity:\",\n          items: [\n            \"Forward-Deployed Director (FDD)\",\n            \"Finance/ops leadership\",\n            \"Dedicated dev &amp; ops roles as we scale\",\n          ],\n        },\n      ],\n      highlight: \"We plug into an existing org and donor base and give them the leadership bench they can't afford to rebuild alone.\",\n      image: {\n        type: 'diagram',\n        placeholder: 'Two-part diagram: Director OS (software icon) + Director Pod (team icon) = Complete Backbone',\n      },\n    },\n    {\n      id: \"fundraising-philosophy\",\n      title: \"Fundraising Philosophy – Relationships First\",\n      subtitle: \"Director is built around major gifts and real relationships, not grant roulette.\",\n      sections: [\n        {\n          heading: \"Durable funding comes from:\",\n          items: [\n            \"Major donors\",\n            \"Anchor institutions\",\n            \"Long-term partners\",\n          ],\n        },\n        {\n          heading: \"Grants are part of the picture, but:\",\n          items: [\n            \"They are downstream of relationships\",\n            \"\\\"Open call\\\" grant-chasing is mostly a distraction for this segment\",\n          ],\n        },\n        {\n          heading: \"Director's focus:\",\n          items: [\n            \"Map and grow the major gifts pipeline\",\n            \"Prepare founders for high-stakes meetings\",\n            \"Use grants strategically once relationships exist\",\n          ],\n        },\n      ],\n      highlight: \"Director is a relationship and revenue engine, not a shot-in-the-dark grant factory.\",\n      image: {\n        type: 'diagram',\n        placeholder: 'Funnel diagram: Relationships → Major Gifts → Grants (showing priority order)',\n      },\n    },\n    {\n      id: \"director-pod\",\n      title: \"The Director Pod – Capacity Ramp\",\n      subtitle: \"Pods scale from 4 → 8 → 16 orgs as the OS and agents mature.\",\n      sections: [\n        {\n          heading: \"Year 1 – Proto-Pod Team:\",\n          items: [\n            \"Founder/CEO\",\n            \"1 Forward-Deployed Director\",\n            \"1 Finance Director\",\n            \"1 Founding Engineer\",\n          ],\n        },\n        {\n          heading: \"Phase 2 – 8 orgs\",\n          text: \"Mature core agents handle repetitive tasks. Same structure supports more orgs.\",\n        },\n        {\n          heading: \"Phase 3 – 16 orgs\",\n          text: \"2+ FDDs. Standardized playbooks. Agents do recurring work.\",\n        },\n      ],\n      image: {\n        type: 'infographic',\n        placeholder: 'Scaling diagram: 4 orgs → 8 orgs → 16 orgs with team growth visualization',\n      },\n    },\n    {\n      id: \"director-os\",\n      title: \"Director OS – Product Overview\",\n      subtitle: \"One pane of glass for an org's backbone.\",\n      sections: [\n        {\n          heading: \"Revenue &amp; Relationships\",\n          text: \"Major gifts map, warm pipeline, next-best actions\",\n        },\n        {\n          heading: \"Runway &amp; Finance\",\n          text: \"Live cash forecasts, budget vs actuals visibility\",\n        },\n        {\n          heading: \"Ops &amp; Compliance\",\n          text: \"Recurring task engine, checklists, playbooks\",\n        },\n        {\n          heading: \"Narratives &amp; Reporting\",\n          text: \"Board decks, funder reports, impact one-pagers\",\n        },\n      ],\n      footnote: \"Data flows in from email, calendar, finance systems, docs, and existing CRMs.\",\n      image: {\n        type: 'mockup',\n        placeholder: 'Dashboard mockup showing 4 quadrants: Revenue, Runway, Ops, Narratives',\n      },\n    },\n    {\n      id: \"ai-agents\",\n      title: \"AI Agents – How We 2–4x Human Capacity\",\n      subtitle: \"Specialized agents do the repetitive work; humans do the judgment.\",\n      sections: [\n        {\n          heading: \"Major Gifts Agent\",\n          items: [\n            \"Scans email, calendar, CRM\",\n            \"Maintains relationship maps\",\n            \"Drafts donor emails &amp; briefs\",\n          ],\n        },\n        {\n          heading: \"Finance &amp; Runway Agent\",\n          items: [\n            \"Pulls accounting data\",\n            \"Proposes categorizations\",\n            \"Raises runway alerts\",\n          ],\n        },\n        {\n          heading: \"Ops &amp; Compliance Agent\",\n          items: [\n            \"Runs recurring checklists\",\n            \"Generates reminders\",\n            \"Manages task lists\",\n          ],\n        },\n        {\n          heading: \"Board &amp; Reporting Agent\",\n          items: [\n            \"Assembles board decks\",\n            \"Creates funder reports\",\n            \"Keeps board-ready view\",\n          ],\n        },\n      ],\n      highlight: \"Agents explore, compile, and draft. FDDs and Directors review, edit, and decide.\",\n      image: {\n        type: 'diagram',\n        placeholder: '4 AI agent icons with workflow arrows showing data flow between them',\n      },\n    },\n    {\n      id: \"economics\",\n      title: \"Economics – Why This Makes Sense\",\n      subtitle: \"Director makes a serious backbone affordable and scalable.\",\n      sections: [\n        {\n          heading: \"Traditional backbone costs ($500-700k org):\",\n          items: [\n            \"ED: $100–150k\",\n            \"Ops/Finance: ~$100k\",\n            \"Dev: ~$100k\",\n            \"Comms/Program ops: $60–100k\",\n            \"Total: $360–450k/year\",\n          ],\n        },\n        {\n          heading: \"With Director:\",\n          items: [\n            \"ED/founder: $100–150k\",\n            \"Director Pod: ~$80–120k/year\",\n            \"Total backbone: $180–270k/year\",\n          ],\n        },\n      ],\n      highlight: \"Save $100-180k/year in backbone costs\",\n      footnote: \"As Pods scale, pod-level gross margins expand while keeping human leadership involvement high.\",\n      image: {\n        type: 'chart',\n        placeholder: 'Side-by-side bar chart: Traditional ($360-450k) vs Director ($180-270k)',\n      },\n    },\n    {\n      id: \"why-now\",\n      title: \"Why Now – AI Agents + Nonprofit Pressure\",\n      subtitle: \"Two timing curves are intersecting.\",\n      sections: [\n        {\n          heading: \"Agentic AI is production-ready:\",\n          items: [\n            \"\\\"AI coworkers\\\" already shipping in engineering, finance, and customer ops\",\n            \"Small human teams can manage far more complexity with agents\",\n          ],\n        },\n        {\n          heading: \"Nonprofits are under structural pressure:\",\n          items: [\n            \"Orgs with $1M+ budgets are losing staff\",\n            \"Funders want grantees with credible backbones and visibility\",\n          ],\n        },\n      ],\n      highlight: \"Director sits at this intersection: an AI-native backbone delivered by a lean, forward-deployed team to orgs that cannot justify rebuilding full in-house leadership.\",\n      image: {\n        type: 'chart',\n        placeholder: 'Two intersecting trend lines: AI capability (rising) meets nonprofit need (rising)',\n      },\n    },\n    {\n      id: \"go-to-market\",\n      title: \"Go-to-Market\",\n      subtitle: \"We start where we already have pull.\",\n      sections: [\n        {\n          heading: \"Existing relationships\",\n          text: \"First 2–4 orgs from founders you're already effectively \\\"directing.\\\"\",\n        },\n        {\n          heading: \"Downshifted $1M orgs\",\n          text: \"Target leaders who proved they can raise $400k–$1M but had to cut staff.\",\n        },\n        {\n          heading: \"Funder collaborations\",\n          text: \"Position Director as capacity-building that makes grantees more investable.\",\n        },\n        {\n          heading: \"Sales motion:\",\n          items: [\n            \"Short diagnostic: map \\\"today vs with Director\\\"\",\n            \"Demo Director OS + agents\",\n            \"Show what gets taken off the founder's plate\",\n            \"Close annual retainers\",\n            \"Expand scope over time\",\n          ],\n        },\n      ],\n      image: {\n        type: 'diagram',\n        placeholder: 'Concentric circles: Inner (existing relationships) → Middle (downshifted orgs) → Outer (funder partnerships)',\n      },\n    },\n    {\n      id: \"business-model\",\n      title: \"Business Model &amp; QSBS-Friendly Structure\",\n      subtitle: \"AI-native vertical SaaS with embedded forward-deployed team.\",\n      sections: [\n        {\n          heading: \"Revenue model\",\n          items: [\n            \"Annual retainers per org\",\n            \"Tied to budget band and complexity\",\n            \"Goal: multiple Pods, each supporting up to 16 orgs\",\n          ],\n        },\n        {\n          heading: \"Cost structure\",\n          items: [\n            \"Lean Pods (FDD + Finance Director)\",\n            \"Supported by agents and product\",\n            \"Engineering compounds across all clients\",\n          ],\n        },\n        {\n          heading: \"QSBS-aware design\",\n          items: [\n            \"U.S. C-corp\",\n            \"Product-centric operating business\",\n            \"Software &amp; data model assets\",\n          ],\n        },\n      ],\n      image: {\n        type: 'diagram',\n        placeholder: 'Business model flywheel: Retainers → Pod capacity → AI leverage → More orgs',\n      },\n    },\n    {\n      id: \"team\",\n      title: \"Team – Lean Year-1 Plan\",\n      subtitle: \"Small, high-leverage founding team with 12 months of runway.\",\n      sections: [\n        {\n          heading: \"Founder &amp; CEO\",\n          text: \"Vision, sales, fundraising, relationships\",\n        },\n        {\n          heading: \"Founding Engineer (hire #1)\",\n          text: \"Director OS + first wave of agents\",\n        },\n        {\n          heading: \"Forward-Deployed Director (hire #2)\",\n          text: \"Nonprofit ops + fundraising, embedded across first ~4 orgs\",\n        },\n        {\n          heading: \"Finance Director (hire #3)\",\n          text: \"Finance + ops across pod, designs playbooks\",\n        },\n      ],\n      footnote: \"Target raise: ~$800k–$1M for 12 months runway. Early org retainers reduce net burn.\",\n      image: {\n        type: 'photo',\n        placeholder: 'Team headshots or org chart showing 4 founding roles',\n      },\n    },\n    {\n      id: \"roadmap\",\n      title: \"Roadmap &amp; Ask\",\n      subtitle: \"\",\n      sections: [\n        {\n          heading: \"0–12 months (this raise):\",\n          items: [\n            \"Hire FDD, Finance Director, Founding Engineer\",\n            \"Onboard 2–4 orgs\",\n            \"Ship v1 Director OS and core agents\",\n            \"Prove: 4-org pod delivers revenue and stability lift\",\n          ],\n        },\n        {\n          heading: \"12–24 months:\",\n          items: [\n            \"Scale pod to 8 orgs\",\n            \"Harden agents and playbooks\",\n            \"Add additional FDD/finance/ops capacity\",\n          ],\n        },\n        {\n          heading: \"24+ months:\",\n          items: [\n            \"16-org pods on mature OS\",\n            \"Multiple pods focused on key verticals\",\n          ],\n        },\n      ],\n      image: {\n        type: 'infographic',\n        placeholder: 'Timeline roadmap: Year 1 (4 orgs) → Year 2 (8 orgs) → Year 3+ (16 orgs per pod)',\n      },\n    },\n  ],\n  slideOrder: defaultSlideOrder,\n  ask: {\n    amount: \"$800k–$1.0M\",\n    items: [\n      \"Fund 12+ months of lean team and product development\",\n      \"Prove the 4 → 8 → 16 org capacity story with real customers\",\n      \"Build Director into the AI-native backbone for the orgs that can least afford to lose theirs\",\n    ],\n  },\n};\n\n// Helper to get slides in the specified order\nexport function getOrderedSlides(content: DeckContent): SlideContent[] {\n  const order = content.slideOrder || defaultSlideOrder;\n  const slideMap = new Map(content.slides.map(s =&gt; [s.id, s]));\n  \n  // Get slides in order, filtering out any IDs that don't have matching slides\n  const orderedSlides = order\n    .map(id =&gt; slideMap.get(id))\n    .filter((s): s is SlideContent =&gt; s !== undefined);\n  \n  // Append any slides not in the order array (so nothing gets lost)\n  const orderedIds = new Set(order);\n  const remainingSlides = content.slides.filter(s =&gt; !orderedIds.has(s.id));\n  \n  return [...orderedSlides, ...remainingSlides];\n}\n\n// Path to the JSON file that stores deck content\nconst CONTENT_FILE_PATH = path.join(process.cwd(), 'data', 'deck-content.json');\n\n// Ensure the data directory exists\nfunction ensureDataDir() {\n  const dataDir = path.dirname(CONTENT_FILE_PATH);\n  if (!fs.existsSync(dataDir)) {\n    fs.mkdirSync(dataDir, { recursive: true });\n  }\n}\n\n// Load content from file, or return defaults if file doesn't exist\nexport function getDeckContent(): DeckContent {\n  try {\n    ensureDataDir();\n    if (fs.existsSync(CONTENT_FILE_PATH)) {\n      const fileContent = fs.readFileSync(CONTENT_FILE_PATH, 'utf-8');\n      return JSON.parse(fileContent) as DeckContent;\n    }\n  } catch (error) {\n    console.error('Error reading deck content file:', error);\n  }\n  return { ...defaultDeckContent };\n}\n\n// Save content to file\nexport function updateDeckContent(content: Partial&lt;DeckContent&gt;): DeckContent {\n  try {\n    ensureDataDir();\n    const currentContent = getDeckContent();\n    const updatedContent = { ...currentContent, ...content };\n    fs.writeFileSync(CONTENT_FILE_PATH, JSON.stringify(updatedContent, null, 2), 'utf-8');\n    return updatedContent;\n  } catch (error) {\n    console.error('Error writing deck content file:', error);\n    throw error;\n  }\n}\n\n// Reset content to defaults\nexport function resetDeckContent(): DeckContent {\n  try {\n    ensureDataDir();\n    fs.writeFileSync(CONTENT_FILE_PATH, JSON.stringify(defaultDeckContent, null, 2), 'utf-8');\n    return { ...defaultDeckContent };\n  } catch (error) {\n    console.error('Error resetting deck content file:', error);\n    throw error;\n  }\n}\n",
  "totalLinesInFile": 656
}
```
Status: **completed**


</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
I see, the fs/path references are still there in the functions at the bottom. I removed the imports but not the code that uses them. I need to:
1. Remove the server-side functions from this file (getDeckContent, updateDeckContent, resetDeckContent, ensureDataDir, CONTENT_FILE_PATH)
2. Create a new server-only file with these functions

Let me remove the server code from deck-content.ts and create a new file for server operations.</details></think>

---

The fs/path code is still at the bottom. Let me remove it and create a server-only file:

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "/Users/boskombp16/GitHub/directorforgood.org/lib/deck-content.ts"
}
```
Additional data:

```json
{
  "codeblockId": "1a4c0bcf-c610-4493-a453-fd2798031cb3"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "/Users/boskombp16/GitHub/directorforgood.org/lib/deck-content-server.ts"
}
```
Additional data:

```json
{
  "codeblockId": "f284e5d2-f481-4ee5-b6b0-5d3eb4d13ed3"
}
```
Status: **completed**


</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
Now I need to find all files that import `getDeckContent`, `updateDeckContent`, or `resetDeckContent` from `deck-content.ts` and update them to import from `deck-content-server.ts` instead.</details></think>

---

Now I need to update any imports of those server functions. Let me find them:

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "from ['\"]@?/?lib/deck-content['\"]",
  "path": "/Users/boskombp16/GitHub/directorforgood.org",
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "from ['\"]@?/?lib/deck-content['\"]",
    "path": "/Users/boskombp16/GitHub/directorforgood.org",
    "outputMode": "content",
    "workspaceResults": {
      "/Users/boskombp16/GitHub/directorforgood.org": {
        "content": {
          "matches": [
            {
              "file": "./.specstory/history/2025-12-11_02-12Z-fix-current-issue.md",
              "matches": [
                {
                  "lineNumber": 74,
                  "content": "  \"contents\": \"'use client';\\n\\nimport { useState, useEffect, useCallback, useRef } from 'react';\\nimport Link from 'next/link';\\nimport { Button } from '@/components/ui/button';\\nimport { \\n  ArrowLeft, Save, RotateCcw, Eye, Loader2, Plus, Trash2, \\n  ChevronDown, ChevronRight, ChevronUp, ImageIcon, Upload, Undo2, Redo2,\\n  Sparkles, X, Send, History, Clock, RotateCw, Command, GripVertical\\n} from 'lucide-react';\\nimport { DeckContent, SlideContent, SlideImage, defaultSlideOrder } from '@/lib/deck-content';\\n\\nconst MAX_HISTORY = 50;\\n\\ninterface ChatMessage {\\n  id: string;\\n  role: 'user' | 'assistant';\\n  content: string;\\n  timestamp: Date;\\n  proposedContent?: DeckContent;\\n  changes?: string[];\\n  applied?: boolean;\\n}\\n\\ninterface DeckVersionSummary {\\n  id: number;\\n  description: string | null;\\n  createdBy: number | null;\\n  createdAt: string;\\n}\\n\\nexport default function DeckEditorPage() {\\n  const [content, setContent] = useState&amp;lt;DeckContent | null&amp;gt;(null);\\n  const [isLoading, setIsLoading] = useState(true);\\n  const [isSaving, setIsSaving] = useState(false);\\n  const [expandedSlides, setExpandedSlides] = useState&amp;lt;Set&amp;lt;string&amp;gt;&amp;gt;(new Set());\\n  const [hasChanges, setHasChanges] = useState(false);\\n  \\n  // Undo/Redo state\\n  const [history, setHistory] = useState&amp;lt;DeckContent[]&amp;gt;([]);\\n  const [historyIndex, setHistoryIndex] = useState(-1);\\n  const isUndoRedo = useRef(false);\\n\\n  // Chat panel state\\n  const [showChat, setShowChat] = useState(false);\\n  const [chatMessages, setChatMessages] = useState&amp;lt;ChatMessage[]&amp;gt;([]);\\n  const [chatInput, setChatInput] = useState('');\\n  const [isAiLoading, setIsAiLoading] = useState(false);\\n  const chatEndRef = useRef&amp;lt;HTMLDivElement&amp;gt;(null);\\n\\n  // Command bar state\\n  const [showCommandBar, setShowCommandBar] = useState(false);\\n  const [commandInput, setCommandInput] = useState('');\\n  const commandInputRef = useRef&amp;lt;HTMLInputElement&amp;gt;(null);\\n\\n  // Version history state\\n  const [showHistory, setShowHistory] = useState(false);\\n  const [versions, setVersions] = useState&amp;lt;DeckVersionSummary[]&amp;gt;([]);\\n  const [isLoadingVersions, setIsLoadingVersions] = useState(false);\\n  const [previewVersion, setPreviewVersion] = useState&amp;lt;DeckContent | null&amp;gt;(null);\\n\\n  // Keyboard shortcuts\\n  useEffect(() =&amp;gt; {\\n    const handleKeyDown = (e: KeyboardEvent) =&amp;gt; {\\n      // Undo/Redo\\n      if ((e.metaKey || e.ctrlKey) &amp;amp;&amp;amp; e.key === 'z') {\\n        e.preventDefault();\\n        if (e.shiftKey) {\\n          redo();\\n        } else {\\n          undo();\\n        }\\n      }\\n      // Command bar (Cmd+K)\\n      if ((e.metaKey || e.ctrlKey) &amp;amp;&amp;amp; e.key === 'k') {\\n        e.preventDefault();\\n        setShowCommandBar(true);\\n        setTimeout(() =&amp;gt; commandInputRef.current?.focus(), 100);\\n      }\\n      // Close panels on Escape\\n      if (e.key === 'Escape') {\\n        setShowCommandBar(false);\\n        setShowChat(false);\\n        setShowHistory(false);\\n        setPreviewVersion(null);\\n      }\\n    };\\n    \\n    window.addEventListener('keydown', handleKeyDown);\\n    return () =&amp;gt; window.removeEventListener('keydown', handleKeyDown);\\n  }, [historyIndex, history]);\\n\\n  // Scroll chat to bottom when new messages arrive\\n  useEffect(() =&amp;gt; {\\n    chatEndRef.current?.scrollIntoView({ behavior: 'smooth' });\\n  }, [chatMessages]);\\n\\n  useEffect(() =&amp;gt; {\\n    fetchContent();\\n  }, []);\\n\\n  const fetchContent = async () =&amp;gt; {\\n    setIsLoading(true);\\n    try {\\n      const response = await fetch('/api/deck-content');\\n      const data = await response.json();\\n      setContent(data);\\n      setHistory([data]);\\n      setHistoryIndex(0);\\n    } catch (error) {\\n      console.error('Failed to fetch content:', error);\\n    } finally {\\n      setIsLoading(false);\\n    }\\n  };\\n\\n  const fetchVersions = async () =&amp;gt; {\\n    setIsLoadingVersions(true);\\n    try {\\n      const response = await fetch('/api/deck-content/versions');\\n      const data = await response.json();\\n      setVersions(data);\\n    } catch (error) {\\n      console.error('Failed to fetch versions:', error);\\n    } finally {\\n      setIsLoadingVersions(false);\\n    }\\n  };\\n\\n  const previewVersionContent = async (versionId: number) =&amp;gt; {\\n    try {\\n      const response = await fetch(&amp;#96;/api/deck-content/versions/${versionId}&amp;#96;);\\n      const data = await response.json();\\n      setPreviewVersion(data.content);\\n    } catch (error) {\\n      console.error('Failed to fetch version:', error);\\n    }\\n  };\\n\\n  const restoreVersion = async (versionId: number) =&amp;gt; {\\n    if (!confirm('Restore this version? Your current changes will be saved as a new version first.')) return;\\n    \\n    try {\\n      // Save current state first\\n      if (content &amp;amp;&amp;amp; hasChanges) {\\n        await fetch('/api/deck-content', {\\n          method: 'PUT',\\n          headers: { 'Content-Type': 'application/json' },\\n          body: JSON.stringify({ content, description: 'Auto-save before restore' }),\\n        });\\n      }\\n      \\n      const response = await fetch(&amp;#96;/api/deck-content/versions/${versionId}/restore&amp;#96;, {\\n        method: 'POST',\\n      });\\n      const data = await response.json();\\n      \\n      if (data.success) {\\n        setContent(data.content);\\n        setHistory([data.content]);\\n        setHistoryIndex(0);\\n        setHasChanges(false);\\n        setPreviewVersion(null);\\n        setShowHistory(false);\\n        fetchVersions();\\n      }\\n    } catch (error) {\\n      console.error('Failed to restore version:', error);\\n    }\\n  };\\n\\n  const pushToHistory = useCallback((newContent: DeckContent) =&amp;gt; {\\n    if (isUndoRedo.current) {\\n      isUndoRedo.current = false;\\n      return;\\n    }\\n    \\n    setHistory(prev =&amp;gt; {\\n      const newHistory = prev.slice(0, historyIndex + 1);\\n      newHistory.push(newContent);\\n      if (newHistory.length &amp;gt; MAX_HISTORY) {\\n        newHistory.shift();\\n        return newHistory;\\n      }\\n      return newHistory;\\n    });\\n    setHistoryIndex(prev =&amp;gt; Math.min(prev + 1, MAX_HISTORY - 1));\\n  }, [historyIndex]);\\n\\n  const undo = useCallback(() =&amp;gt; {\\n    if (historyIndex &amp;gt; 0) {\\n      isUndoRedo.current = true;\\n      const newIndex = historyIndex - 1;\\n      setHistoryIndex(newIndex);\\n      setContent(history[newIndex]);\\n      setHasChanges(true);\\n    }\\n  }, [historyIndex, history]);\\n\\n  const redo = useCallback(() =&amp;gt; {\\n    if (historyIndex &amp;lt; history.length - 1) {\\n      isUndoRedo.current = true;\\n      const newIndex = historyIndex + 1;\\n      setHistoryIndex(newIndex);\\n      setContent(history[newIndex]);\\n      setHasChanges(true);\\n    }\\n  }, [historyIndex, history]);\\n\\n  const canUndo = historyIndex &amp;gt; 0;\\n  const canRedo = historyIndex &amp;lt; history.length - 1;\\n\\n  const saveContent = async (description?: string) =&amp;gt; {\\n    if (!content) return;\\n    setIsSaving(true);\\n    try {\\n      const response = await fetch('/api/deck-content', {\\n        method: 'PUT',\\n        headers: { 'Content-Type': 'application/json' },\\n        body: JSON.stringify({ content, description }),\\n      });\\n      if (response.ok) {\\n        setHasChanges(false);\\n      }\\n    } catch (error) {\\n      console.error('Failed to save content:', error);\\n      alert('Failed to save content');\\n    } finally {\\n      setIsSaving(false);\\n    }\\n  };\\n\\n  const resetContent = async () =&amp;gt; {\\n    if (!confirm('Reset all content to defaults? This cannot be undone.')) return;\\n    try {\\n      const response = await fetch('/api/deck-content', { method: 'DELETE' });\\n      const data = await response.json();\\n      setContent(data);\\n      setHistory([data]);\\n      setHistoryIndex(0);\\n      setHasChanges(false);\\n    } catch (error) {\\n      console.error('Failed to reset content:', error);\\n    }\\n  };\\n\\n  // AI Chat functions\\n  const sendChatMessage = async (message: string) =&amp;gt; {\\n    if (!message.trim() || !content) return;\\n    \\n    const userMessage: ChatMessage = {\\n      id: Date.now().toString(),\\n      role: 'user',\\n      content: message,\\n      timestamp: new Date(),\\n    };\\n    \\n    setChatMessages(prev =&amp;gt; [...prev, userMessage]);\\n    setChatInput('');\\n    setIsAiLoading(true);\\n    \\n    try {\\n      const response = await fetch('/api/deck/ai-edit', {\\n        method: 'POST',\\n        headers: { 'Content-Type': 'application/json' },\\n        body: JSON.stringify({\\n          instruction: message,\\n          currentContent: content,\\n        }),\\n      });\\n      \\n      const data = await response.json();\\n      \\n      const assistantMessage: ChatMessage = {\\n        id: (Date.now() + 1).toString(),\\n        role: 'assistant',\\n        content: data.success \\n          ? &amp;#96;${data.description}\\\\n\\\\nChanges:\\\\n${data.changes?.map((c: string) =&amp;gt; &amp;#96;• ${c}&amp;#96;).join('\\\\n') || 'Content updated'}&amp;#96;\\n          : &amp;#96;Sorry, I couldn't complete that request: ${data.error}&amp;#96;,\\n        timestamp: new Date(),\\n        proposedContent: data.success ? data.content : undefined,\\n        changes: data.changes,\\n        applied: false,\\n      };\\n      \\n      setChatMessages(prev =&amp;gt; [...prev, assistantMessage]);\\n    } catch (error) {\\n      const errorMessage: ChatMessage = {\\n        id: (Date.now() + 1).toString(),\\n        role: 'assistant',\\n        content: 'Sorry, there was an error processing your request. Please try again.',\\n        timestamp: new Date(),\\n      };\\n      setChatMessages(prev =&amp;gt; [...prev, errorMessage]);\\n    } finally {\\n      setIsAiLoading(false);\\n    }\\n  };\\n\\n  const applyProposedChanges = (messageId: string) =&amp;gt; {\\n    const message = chatMessages.find(m =&amp;gt; m.id === messageId);\\n    if (!message?.proposedContent) return;\\n    \\n    setContent(message.proposedContent);\\n    pushToHistory(message.proposedContent);\\n    setHasChanges(true);\\n    \\n    setChatMessages(prev =&amp;gt; prev.map(m =&amp;gt; \\n      m.id === messageId ? { ...m, applied: true } : m\\n    ));\\n  };\\n\\n  const handleCommandSubmit = async () =&amp;gt; {\\n    if (!commandInput.trim()) return;\\n    \\n    const command = commandInput.trim();\\n    setShowCommandBar(false);\\n    setCommandInput('');\\n    \\n    // Open chat and send the command\\n    setShowChat(true);\\n    await sendChatMessage(command);\\n  };\\n\\n  const updateCover = (field: keyof DeckContent['cover'], value: string) =&amp;gt; {\\n    if (!content) return;\\n    const newContent = { ...content, cover: { ...content.cover, [field]: value } };\\n    setContent(newContent);\\n    pushToHistory(newContent);\\n    setHasChanges(true);\\n  };\\n\\n  const updateSlide = (index: number, updates: Partial&amp;lt;SlideContent&amp;gt;) =&amp;gt; {\\n    if (!content) return;\\n    const newSlides = [...content.slides];\\n    newSlides[index] = { ...newSlides[index], ...updates };\\n    const newContent = { ...content, slides: newSlides };\\n    setContent(newContent);\\n    pushToHistory(newContent);\\n    setHasChanges(true);\\n  };\\n\\n  const updateSlideSection = (slideIndex: number, sectionIndex: number, updates: Partial&amp;lt;NonNullable&amp;lt;SlideContent['sections']&amp;gt;[0]&amp;gt;) =&amp;gt; {\\n    if (!content) return;\\n    const newSlides = [...content.slides];\\n    const newSections = [...(newSlides[slideIndex].sections || [])];\\n    newSections[sectionIndex] = { ...newSections[sectionIndex], ...updates };\\n    newSlides[slideIndex] = { ...newSlides[slideIndex], sections: newSections };\\n    const newContent = { ...content, slides: newSlides };\\n    setContent(newContent);\\n    pushToHistory(newContent);\\n    setHasChanges(true);\\n  };\\n\\n  const updateSectionItems = (slideIndex: number, sectionIndex: number, items: string[]) =&amp;gt; {\\n    updateSlideSection(slideIndex, sectionIndex, { items });\\n  };\\n\\n  const addSectionItem = (slideIndex: number, sectionIndex: number) =&amp;gt; {\\n    if (!content) return;\\n    const currentItems = content.slides[slideIndex].sections?.[sectionIndex]?.items || [];\\n    updateSectionItems(slideIndex, sectionIndex, [...currentItems, '']);\\n  };\\n\\n  const removeSectionItem = (slideIndex: number, sectionIndex: number, itemIndex: number) =&amp;gt; {\\n    if (!content) return;\\n    const currentItems = content.slides[slideIndex].sections?.[sectionIndex]?.items || [];\\n    updateSectionItems(slideIndex, sectionIndex, currentItems.filter((_, i) =&amp;gt; i !== itemIndex));\\n  };\\n\\n  const updateAsk = (field: 'amount' | 'items', value: string | string[]) =&amp;gt; {\\n    if (!content) return;\\n    const newContent = { ...content, ask: { ...content.ask, [field]: value } };\\n    setContent(newContent);\\n    pushToHistory(newContent);\\n    setHasChanges(true);\\n  };\\n\\n  const toggleSlide = (slideId: string) =&amp;gt; {\\n    const newExpanded = new Set(expandedSlides);\\n    if (newExpanded.has(slideId)) {\\n      newExpanded.delete(slideId);\\n    } else {\\n      newExpanded.add(slideId);\\n    }\\n    setExpandedSlides(newExpanded);\\n  };\\n\\n  // Get slides in the current order\\n  const getOrderedSlides = () =&amp;gt; {\\n    if (!content) return [];\\n    const order = content.slideOrder || defaultSlideOrder;\\n    const slideMap = new Map(content.slides.map(s =&amp;gt; [s.id, s]));\\n    \\n    // Get slides in order\\n    const ordered = order\\n      .map(id =&amp;gt; slideMap.get(id))\\n      .filter((s): s is SlideContent =&amp;gt; s !== undefined);\\n    \\n    // Append any slides not in the order\\n    const orderedIds = new Set(order);\\n    const remaining = content.slides.filter(s =&amp;gt; !orderedIds.has(s.id));\\n    \\n    return [...ordered, ...remaining];\\n  };\\n\\n  // Move a slide up or down in the order\\n  const moveSlide = (slideId: string, direction: 'up' | 'down') =&amp;gt; {\\n    if (!content) return;\\n    \\n    const currentOrder = content.slideOrder || defaultSlideOrder;\\n    const index = currentOrder.indexOf(slideId);\\n    \\n    if (index === -1) return;\\n    if (direction === 'up' &amp;amp;&amp;amp; index === 0) return;\\n    if (direction === 'down' &amp;amp;&amp;amp; index === currentOrder.length - 1) return;\\n    \\n    const newOrder = [...currentOrder];\\n    const swapIndex = direction === 'up' ? index - 1 : index + 1;\\n    [newOrder[index], newOrder[swapIndex]] = [newOrder[swapIndex], newOrder[index]];\\n    \\n    const newContent = { ...content, slideOrder: newOrder };\\n    setContent(newContent);\\n    pushToHistory(newContent);\\n    setHasChanges(true);\\n  };\\n\\n  const updateSlideImage = (slideIndex: number, image: SlideImage | undefined) =&amp;gt; {\\n    if (!content) return;\\n    const newSlides = [...content.slides];\\n    newSlides[slideIndex] = { ...newSlides[slideIndex], image };\\n    const newContent = { ...content, slides: newSlides };\\n    setContent(newContent);\\n    pushToHistory(newContent);\\n    setHasChanges(true);\\n  };\\n\\n  const handleImageDrop = async (slideIndex: number, e: React.DragEvent&amp;lt;HTMLDivElement&amp;gt;) =&amp;gt; {\\n    e.preventDefault();\\n    const file = e.dataTransfer.files[0];\\n    if (!file || !file.type.startsWith('image/')) return;\\n    \\n    const reader = new FileReader();\\n    reader.onload = () =&amp;gt; {\\n      const currentImage = content?.slides[slideIndex]?.image;\\n      updateSlideImage(slideIndex, {\\n        ...currentImage,\\n        type: currentImage?.type || 'infographic',\\n        url: reader.result as string,\\n        placeholder: currentImage?.placeholder,\\n      });\\n    };\\n    reader.readAsDataURL(file);\\n  };\\n\\n  const handleImageUpload = async (slideIndex: number, e: React.ChangeEvent&amp;lt;HTMLInputElement&amp;gt;) =&amp;gt; {\\n    const file = e.target.files?.[0];\\n    if (!file || !file.type.startsWith('image/')) return;\\n    \\n    const reader = new FileReader();\\n    reader.onload = () =&amp;gt; {\\n      const currentImage = content?.slides[slideIndex]?.image;\\n      updateSlideImage(slideIndex, {\\n        ...currentImage,\\n        type: currentImage?.type || 'infographic',\\n        url: reader.result as string,\\n        placeholder: currentImage?.placeholder,\\n      });\\n    };\\n    reader.readAsDataURL(file);\\n  };\\n\\n  const removeSlideImage = (slideIndex: number) =&amp;gt; {\\n    if (!content) return;\\n    const currentImage = content.slides[slideIndex]?.image;\\n    if (currentImage) {\\n      updateSlideImage(slideIndex, { ...currentImage, url: undefined });\\n    }\\n  };\\n\\n  if (isLoading) {\\n    return (\\n      &amp;lt;div className=\\\"min-h-screen bg-gray-950 text-white flex items-center justify-center\\\"&amp;gt;\\n        &amp;lt;Loader2 className=\\\"w-8 h-8 animate-spin\\\" /&amp;gt;\\n      &amp;lt;/div&amp;gt;\\n    );\\n  }\\n\\n  if (!content) {\\n    return (\\n      &amp;lt;div className=\\\"min-h-screen bg-gray-950 text-white flex items-center justify-center\\\"&amp;gt;\\n        &amp;lt;p&amp;gt;Failed to load content&amp;lt;/p&amp;gt;\\n      &amp;lt;/div&amp;gt;\\n    );\\n  }\\n\\n  return (\\n    &amp;lt;div className=\\\"min-h-screen bg-gray-950 text-white\\\"&amp;gt;\\n      {/* Command Bar Modal */}\\n      {showCommandBar &amp;amp;&amp;amp; (\\n        &amp;lt;div className=\\\"fixed inset-0 z-50 flex items-start justify-center pt-32 bg-black/50\\\" onClick={() =&amp;gt; setShowCommandBar(false)}&amp;gt;\\n          &amp;lt;div \\n            className=\\\"w-full max-w-xl bg-gray-900 rounded-lg shadow-2xl border border-gray-700\\\"\\n            onClick={e =&amp;gt; e.stopPropagation()}\\n          &amp;gt;\\n            &amp;lt;div className=\\\"flex items-center gap-3 px-4 py-3 border-b border-gray-700\\\"&amp;gt;\\n              &amp;lt;Command className=\\\"w-5 h-5 text-gray-400\\\" /&amp;gt;\\n              &amp;lt;input\\n                ref={commandInputRef}\\n                type=\\\"text\\\"\\n                value={commandInput}\\n                onChange={e =&amp;gt; setCommandInput(e.target.value)}\\n                onKeyDown={e =&amp;gt; {\\n                  if (e.key === 'Enter') handleCommandSubmit();\\n                  if (e.key === 'Escape') setShowCommandBar(false);\\n                }}\\n                placeholder=\\\"Describe what you want to change... (e.g., 'add a slide about partnerships')\\\"\\n                className=\\\"flex-1 bg-transparent text-white placeholder-gray-500 outline-none\\\"\\n                autoFocus\\n              /&amp;gt;\\n            &amp;lt;/div&amp;gt;\\n            &amp;lt;div className=\\\"px-4 py-2 text-xs text-gray-500\\\"&amp;gt;\\n              Press Enter to submit • Escape to close\\n            &amp;lt;/div&amp;gt;\\n          &amp;lt;/div&amp;gt;\\n        &amp;lt;/div&amp;gt;\\n      )}\\n\\n      {/* Version History Panel */}\\n      {showHistory &amp;amp;&amp;amp; (\\n        &amp;lt;div className=\\\"fixed right-0 top-0 bottom-0 w-96 bg-gray-900 border-l border-gray-700 z-40 flex flex-col\\\"&amp;gt;\\n          &amp;lt;div className=\\\"flex items-center justify-between px-4 py-3 border-b border-gray-700\\\"&amp;gt;\\n            &amp;lt;h3 className=\\\"font-semibold flex items-center gap-2\\\"&amp;gt;\\n              &amp;lt;History className=\\\"w-4 h-4\\\" /&amp;gt;\\n              Version History\\n            &amp;lt;/h3&amp;gt;\\n            &amp;lt;button onClick={() =&amp;gt; { setShowHistory(false); setPreviewVersion(null); }} className=\\\"text-gray-400 hover:text-white\\\"&amp;gt;\\n              &amp;lt;X className=\\\"w-5 h-5\\\" /&amp;gt;\\n            &amp;lt;/button&amp;gt;\\n          &amp;lt;/div&amp;gt;\\n          \\n          {previewVersion ? (\\n            &amp;lt;div className=\\\"flex-1 overflow-auto p-4\\\"&amp;gt;\\n              &amp;lt;div className=\\\"mb-4 flex gap-2\\\"&amp;gt;\\n                &amp;lt;Button size=\\\"sm\\\" variant=\\\"outline\\\" onClick={() =&amp;gt; setPreviewVersion(null)} className=\\\"border-gray-600\\\"&amp;gt;\\n                  Back to List\\n                &amp;lt;/Button&amp;gt;\\n              &amp;lt;/div&amp;gt;\\n              &amp;lt;div className=\\\"bg-gray-800 rounded-lg p-4 text-sm\\\"&amp;gt;\\n                &amp;lt;h4 className=\\\"font-medium mb-2\\\"&amp;gt;Preview&amp;lt;/h4&amp;gt;\\n                &amp;lt;p className=\\\"text-gray-400 mb-2\\\"&amp;gt;Title: {previewVersion.cover.title}&amp;lt;/p&amp;gt;\\n                &amp;lt;p className=\\\"text-gray-400 mb-2\\\"&amp;gt;Slides: {previewVersion.slides.length}&amp;lt;/p&amp;gt;\\n                &amp;lt;p className=\\\"text-gray-400\\\"&amp;gt;Ask: {previewVersion.ask.amount}&amp;lt;/p&amp;gt;\\n              &amp;lt;/div&amp;gt;\\n            &amp;lt;/div&amp;gt;\\n          ) : (\\n            &amp;lt;div className=\\\"flex-1 overflow-auto\\\"&amp;gt;\\n              {isLoadingVersions ? (\\n                &amp;lt;div className=\\\"flex items-center justify-center py-8\\\"&amp;gt;\\n                  &amp;lt;Loader2 className=\\\"w-6 h-6 animate-spin\\\" /&amp;gt;\\n                &amp;lt;/div&amp;gt;\\n              ) : versions.length === 0 ? (\\n                &amp;lt;div className=\\\"text-center py-8 text-gray-500\\\"&amp;gt;\\n                  No saved versions yet\\n                &amp;lt;/div&amp;gt;\\n              ) : (\\n                &amp;lt;div className=\\\"divide-y divide-gray-800\\\"&amp;gt;\\n                  {versions.map(version =&amp;gt; (\\n                    &amp;lt;div key={version.id} className=\\\"p-4 hover:bg-gray-800/50\\\"&amp;gt;\\n                      &amp;lt;div className=\\\"flex items-start justify-between mb-2\\\"&amp;gt;\\n                        &amp;lt;div className=\\\"flex items-center gap-2 text-sm text-gray-400\\\"&amp;gt;\\n                          &amp;lt;Clock className=\\\"w-3 h-3\\\" /&amp;gt;\\n                          {new Date(version.createdAt).toLocaleString()}\\n                        &amp;lt;/div&amp;gt;\\n                        &amp;lt;span className=\\\"text-xs text-gray-500\\\"&amp;gt;#{version.id}&amp;lt;/span&amp;gt;\\n                      &amp;lt;/div&amp;gt;\\n                      &amp;lt;p className=\\\"text-sm mb-3\\\"&amp;gt;{version.description || 'No description'}&amp;lt;/p&amp;gt;\\n                      &amp;lt;div className=\\\"flex gap-2\\\"&amp;gt;\\n                        &amp;lt;Button \\n                          size=\\\"sm\\\" \\n                          variant=\\\"outline\\\" \\n                          className=\\\"text-xs border-gray-600\\\"\\n                          onClick={() =&amp;gt; previewVersionContent(version.id)}\\n                        &amp;gt;\\n                          &amp;lt;Eye className=\\\"w-3 h-3 mr-1\\\" /&amp;gt;\\n                          Preview\\n                        &amp;lt;/Button&amp;gt;\\n                        &amp;lt;Button \\n                          size=\\\"sm\\\" \\n                          variant=\\\"outline\\\"\\n                          className=\\\"text-xs border-gray-600\\\"\\n                          onClick={() =&amp;gt; restoreVersion(version.id)}\\n                        &amp;gt;\\n                          &amp;lt;RotateCw className=\\\"w-3 h-3 mr-1\\\" /&amp;gt;\\n                          Restore\\n                        &amp;lt;/Button&amp;gt;\\n                      &amp;lt;/div&amp;gt;\\n                    &amp;lt;/div&amp;gt;\\n                  ))}\\n                &amp;lt;/div&amp;gt;\\n              )}\\n            &amp;lt;/div&amp;gt;\\n          )}\\n        &amp;lt;/div&amp;gt;\\n      )}\\n\\n      {/* AI Chat Panel */}\\n      {showChat &amp;amp;&amp;amp; (\\n        &amp;lt;div className=\\\"fixed right-0 top-0 bottom-0 w-96 bg-gray-900 border-l border-gray-700 z-40 flex flex-col\\\"&amp;gt;\\n          &amp;lt;div className=\\\"flex items-center justify-between px-4 py-3 border-b border-gray-700\\\"&amp;gt;\\n            &amp;lt;h3 className=\\\"font-semibold flex items-center gap-2\\\"&amp;gt;\\n              &amp;lt;Sparkles className=\\\"w-4 h-4 text-purple-400\\\" /&amp;gt;\\n              AI Assistant\\n            &amp;lt;/h3&amp;gt;\\n            &amp;lt;button onClick={() =&amp;gt; setShowChat(false)} className=\\\"text-gray-400 hover:text-white\\\"&amp;gt;\\n              &amp;lt;X className=\\\"w-5 h-5\\\" /&amp;gt;\\n            &amp;lt;/button&amp;gt;\\n          &amp;lt;/div&amp;gt;\\n          \\n          &amp;lt;div className=\\\"flex-1 overflow-auto p-4 space-y-4\\\"&amp;gt;\\n            {chatMessages.length === 0 &amp;amp;&amp;amp; (\\n              &amp;lt;div className=\\\"text-center py-8 text-gray-500\\\"&amp;gt;\\n                &amp;lt;Sparkles className=\\\"w-8 h-8 mx-auto mb-3 text-purple-400/50\\\" /&amp;gt;\\n                &amp;lt;p className=\\\"mb-2\\\"&amp;gt;Ask me to edit your deck&amp;lt;/p&amp;gt;\\n                &amp;lt;p className=\\\"text-sm\\\"&amp;gt;Try: &amp;amp;quot;Add a slide about our team&amp;amp;quot; or &amp;amp;quot;Make the tagline more compelling&amp;amp;quot;&amp;lt;/p&amp;gt;\\n              &amp;lt;/div&amp;gt;\\n            )}\\n            \\n            {chatMessages.map(message =&amp;gt; (\\n              &amp;lt;div key={message.id} className={&amp;#96;flex ${message.role === 'user' ? 'justify-end' : 'justify-start'}&amp;#96;}&amp;gt;\\n                &amp;lt;div className={&amp;#96;max-w-[85%] rounded-lg px-3 py-2 ${\\n                  message.role === 'user' \\n                    ? 'bg-purple-600 text-white' \\n                    : 'bg-gray-800 text-gray-100'\\n                }&amp;#96;}&amp;gt;\\n                  &amp;lt;p className=\\\"text-sm whitespace-pre-wrap\\\"&amp;gt;{message.content}&amp;lt;/p&amp;gt;\\n                  \\n                  {message.proposedContent &amp;amp;&amp;amp; !message.applied &amp;amp;&amp;amp; (\\n                    &amp;lt;div className=\\\"mt-3 pt-2 border-t border-gray-700\\\"&amp;gt;\\n                      &amp;lt;Button\\n                        size=\\\"sm\\\"\\n                        onClick={() =&amp;gt; applyProposedChanges(message.id)}\\n                        className=\\\"bg-green-600 hover:bg-green-700 text-white text-xs\\\"\\n                      &amp;gt;\\n                        Apply Changes\\n                      &amp;lt;/Button&amp;gt;\\n                    &amp;lt;/div&amp;gt;\\n                  )}\\n                  \\n                  {message.applied &amp;amp;&amp;amp; (\\n                    &amp;lt;div className=\\\"mt-2 text-xs text-green-400 flex items-center gap-1\\\"&amp;gt;\\n                      &amp;lt;svg className=\\\"w-3 h-3\\\" fill=\\\"currentColor\\\" viewBox=\\\"0 0 20 20\\\"&amp;gt;\\n                        &amp;lt;path fillRule=\\\"evenodd\\\" d=\\\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\\\" clipRule=\\\"evenodd\\\" /&amp;gt;\\n                      &amp;lt;/svg&amp;gt;\\n                      Applied\\n                    &amp;lt;/div&amp;gt;\\n                  )}\\n                &amp;lt;/div&amp;gt;\\n              &amp;lt;/div&amp;gt;\\n            ))}\\n            \\n            {isAiLoading &amp;amp;&amp;amp; (\\n              &amp;lt;div className=\\\"flex justify-start\\\"&amp;gt;\\n                &amp;lt;div className=\\\"bg-gray-800 rounded-lg px-3 py-2\\\"&amp;gt;\\n                  &amp;lt;Loader2 className=\\\"w-4 h-4 animate-spin text-purple-400\\\" /&amp;gt;\\n                &amp;lt;/div&amp;gt;\\n              &amp;lt;/div&amp;gt;\\n            )}\\n            \\n            &amp;lt;div ref={chatEndRef} /&amp;gt;\\n          &amp;lt;/div&amp;gt;\\n          \\n          &amp;lt;div className=\\\"p-4 border-t border-gray-700\\\"&amp;gt;\\n            &amp;lt;div className=\\\"flex gap-2\\\"&amp;gt;\\n              &amp;lt;input\\n                type=\\\"text\\\"\\n                value={chatInput}\\n                onChange={e =&amp;gt; setChatInput(e.target.value)}\\n                onKeyDown={e =&amp;gt; {\\n                  if (e.key === 'Enter' &amp;amp;&amp;amp; !e.shiftKey) {\\n                    e.preventDefault();\\n                    sendChatMessage(chatInput);\\n                  }\\n                }}\\n                placeholder=\\\"Describe your changes...\\\"\\n                className=\\\"flex-1 bg-gray-800 border border-gray-700 rounded px-3 py-2 text-sm text-white placeholder-gray-500\\\"\\n                disabled={isAiLoading}\\n              /&amp;gt;\\n              &amp;lt;Button\\n                size=\\\"sm\\\"\\n                onClick={() =&amp;gt; sendChatMessage(chatInput)}\\n                disabled={!chatInput.trim() || isAiLoading}\\n                className=\\\"bg-purple-600 hover:bg-purple-700\\\"\\n              &amp;gt;\\n                &amp;lt;Send className=\\\"w-4 h-4\\\" /&amp;gt;\\n              &amp;lt;/Button&amp;gt;\\n            &amp;lt;/div&amp;gt;\\n          &amp;lt;/div&amp;gt;\\n        &amp;lt;/div&amp;gt;\\n      )}\\n\\n      {/* Header */}\\n      &amp;lt;div className=\\\"sticky top-0 z-10 bg-gray-900 border-b border-gray-800\\\"&amp;gt;\\n        &amp;lt;div className=\\\"container px-4 py-4 flex items-center justify-between\\\"&amp;gt;\\n          &amp;lt;div className=\\\"flex items-center gap-4\\\"&amp;gt;\\n            &amp;lt;Link href=\\\"/admin\\\" className=\\\"text-gray-400 hover:text-white\\\"&amp;gt;\\n              &amp;lt;ArrowLeft className=\\\"w-5 h-5\\\" /&amp;gt;\\n            &amp;lt;/Link&amp;gt;\\n            &amp;lt;h1 className=\\\"text-xl font-bold\\\"&amp;gt;Edit Pitch Deck&amp;lt;/h1&amp;gt;\\n            {hasChanges &amp;amp;&amp;amp; (\\n              &amp;lt;span className=\\\"text-xs bg-yellow-600 px-2 py-1 rounded\\\"&amp;gt;Unsaved changes&amp;lt;/span&amp;gt;\\n            )}\\n          &amp;lt;/div&amp;gt;\\n          \\n          &amp;lt;div className=\\\"flex items-center gap-2\\\"&amp;gt;\\n            &amp;lt;Button\\n              onClick={undo}\\n              disabled={!canUndo}\\n              variant=\\\"outline\\\"\\n              size=\\\"sm\\\"\\n              className=\\\"border-gray-700 text-gray-300 disabled:opacity-30\\\"\\n              title=\\\"Undo (Cmd+Z)\\\"\\n            &amp;gt;\\n              &amp;lt;Undo2 className=\\\"w-4 h-4\\\" /&amp;gt;\\n            &amp;lt;/Button&amp;gt;\\n            &amp;lt;Button\\n              onClick={redo}\\n              disabled={!canRedo}\\n              variant=\\\"outline\\\"\\n              size=\\\"sm\\\"\\n              className=\\\"border-gray-700 text-gray-300 disabled:opacity-30\\\"\\n              title=\\\"Redo (Cmd+Shift+Z)\\\"\\n            &amp;gt;\\n              &amp;lt;Redo2 className=\\\"w-4 h-4\\\" /&amp;gt;\\n            &amp;lt;/Button&amp;gt;\\n            &amp;lt;div className=\\\"w-px h-6 bg-gray-700 mx-1\\\" /&amp;gt;\\n            &amp;lt;Button\\n              onClick={() =&amp;gt; { setShowHistory(true); fetchVersions(); }}\\n              variant=\\\"outline\\\"\\n              size=\\\"sm\\\"\\n              className=\\\"border-gray-700 text-gray-300\\\"\\n              title=\\\"Version History\\\"\\n            &amp;gt;\\n              &amp;lt;History className=\\\"w-4 h-4\\\" /&amp;gt;\\n            &amp;lt;/Button&amp;gt;\\n            &amp;lt;Button\\n              onClick={() =&amp;gt; setShowChat(true)}\\n              variant=\\\"outline\\\"\\n              size=\\\"sm\\\"\\n              className=\\\"border-gray-700 text-gray-300\\\"\\n              title=\\\"AI Assistant\\\"\\n            &amp;gt;\\n              &amp;lt;Sparkles className=\\\"w-4 h-4\\\" /&amp;gt;\\n            &amp;lt;/Button&amp;gt;\\n            &amp;lt;Button\\n              onClick={() =&amp;gt; setShowCommandBar(true)}\\n              variant=\\\"outline\\\"\\n              size=\\\"sm\\\"\\n              className=\\\"border-gray-700 text-gray-300\\\"\\n              title=\\\"Quick Command (Cmd+K)\\\"\\n            &amp;gt;\\n              &amp;lt;Command className=\\\"w-4 h-4\\\" /&amp;gt;\\n            &amp;lt;/Button&amp;gt;\\n            &amp;lt;div className=\\\"w-px h-6 bg-gray-700 mx-1\\\" /&amp;gt;\\n            &amp;lt;Button\\n              onClick={resetContent}\\n              variant=\\\"outline\\\"\\n              size=\\\"sm\\\"\\n              className=\\\"border-gray-700 text-gray-300\\\"\\n            &amp;gt;\\n              &amp;lt;RotateCcw className=\\\"w-4 h-4 mr-2\\\" /&amp;gt;\\n              Reset\\n            &amp;lt;/Button&amp;gt;\\n            &amp;lt;Link href=\\\"/deck\\\" target=\\\"_blank\\\"&amp;gt;\\n              &amp;lt;Button variant=\\\"outline\\\" size=\\\"sm\\\" className=\\\"border-gray-700 text-gray-300\\\"&amp;gt;\\n                &amp;lt;Eye className=\\\"w-4 h-4 mr-2\\\" /&amp;gt;\\n                Preview\\n              &amp;lt;/Button&amp;gt;\\n            &amp;lt;/Link&amp;gt;\\n            &amp;lt;Button\\n              onClick={() =&amp;gt; saveContent()}\\n              disabled={isSaving || !hasChanges}\\n              size=\\\"sm\\\"\\n              className=\\\"bg-white text-black hover:bg-gray-200\\\"\\n            &amp;gt;\\n              {isSaving ? &amp;lt;Loader2 className=\\\"w-4 h-4 mr-2 animate-spin\\\" /&amp;gt; : &amp;lt;Save className=\\\"w-4 h-4 mr-2\\\" /&amp;gt;}\\n              Save\\n            &amp;lt;/Button&amp;gt;\\n          &amp;lt;/div&amp;gt;\\n        &amp;lt;/div&amp;gt;\\n      &amp;lt;/div&amp;gt;\\n\\n      &amp;lt;div className={&amp;#96;container px-4 py-8 max-w-4xl transition-all ${showChat || showHistory ? 'mr-96' : ''}&amp;#96;}&amp;gt;\\n        {/* Cover Section */}\\n        &amp;lt;section className=\\\"mb-8\\\"&amp;gt;\\n          &amp;lt;h2 className=\\\"text-lg font-semibold mb-4 text-gray-300\\\"&amp;gt;Slides&amp;lt;/h2&amp;gt;\\n          &amp;lt;div className=\\\"bg-gray-900 rounded-lg overflow-hidden mb-2\\\"&amp;gt;\\n            &amp;lt;button\\n              onClick={() =&amp;gt; toggleSlide('cover')}\\n              className=\\\"w-full px-4 py-3 flex items-center justify-between hover:bg-gray-800 transition-colors\\\"\\n            &amp;gt;\\n              &amp;lt;span className=\\\"font-medium\\\"&amp;gt;1. Cover Slide&amp;lt;/span&amp;gt;\\n              {expandedSlides.has('cover') ? (\\n                &amp;lt;ChevronDown className=\\\"w-5 h-5 text-gray-400\\\" /&amp;gt;\\n              ) : (\\n                &amp;lt;ChevronRight className=\\\"w-5 h-5 text-gray-400\\\" /&amp;gt;\\n              )}\\n            &amp;lt;/button&amp;gt;\\n            \\n            {expandedSlides.has('cover') &amp;amp;&amp;amp; (\\n              &amp;lt;div className=\\\"px-4 pb-4 space-y-4 border-t border-gray-800\\\"&amp;gt;\\n                &amp;lt;div className=\\\"pt-4\\\"&amp;gt;\\n                  &amp;lt;label className=\\\"block text-sm text-gray-400 mb-1\\\"&amp;gt;Title&amp;lt;/label&amp;gt;\\n                  &amp;lt;input\\n                    type=\\\"text\\\"\\n                    value={content.cover.title}\\n                    onChange={(e) =&amp;gt; updateCover('title', e.target.value)}\\n                    className=\\\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\\\"\\n                  /&amp;gt;\\n                &amp;lt;/div&amp;gt;\\n                &amp;lt;div&amp;gt;\\n                  &amp;lt;label className=\\\"block text-sm text-gray-400 mb-1\\\"&amp;gt;Tagline&amp;lt;/label&amp;gt;\\n                  &amp;lt;textarea\\n                    value={content.cover.tagline}\\n                    onChange={(e) =&amp;gt; updateCover('tagline', e.target.value)}\\n                    rows={2}\\n                    className=\\\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\\\"\\n                  /&amp;gt;\\n                &amp;lt;/div&amp;gt;\\n                &amp;lt;div&amp;gt;\\n                  &amp;lt;label className=\\\"block text-sm text-gray-400 mb-1\\\"&amp;gt;Subtagline&amp;lt;/label&amp;gt;\\n                  &amp;lt;input\\n                    type=\\\"text\\\"\\n                    value={content.cover.subtagline}\\n                    onChange={(e) =&amp;gt; updateCover('subtagline', e.target.value)}\\n                    className=\\\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\\\"\\n                  /&amp;gt;\\n                &amp;lt;/div&amp;gt;\\n                &amp;lt;div&amp;gt;\\n                  &amp;lt;label className=\\\"block text-sm text-gray-400 mb-1\\\"&amp;gt;URL&amp;lt;/label&amp;gt;\\n                  &amp;lt;input\\n                    type=\\\"text\\\"\\n                    value={content.cover.url}\\n                    onChange={(e) =&amp;gt; updateCover('url', e.target.value)}\\n                    className=\\\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\\\"\\n                  /&amp;gt;\\n                &amp;lt;/div&amp;gt;\\n              &amp;lt;/div&amp;gt;\\n            )}\\n          &amp;lt;/div&amp;gt;\\n\\n          {getOrderedSlides().map((slide, orderIndex) =&amp;gt; {\\n            // Find original index in content.slides for updates\\n            const originalIndex = content.slides.findIndex(s =&amp;gt; s.id === slide.id);\\n            const currentOrder = content.slideOrder || defaultSlideOrder;\\n            const isFirst = currentOrder.indexOf(slide.id) === 0;\\n            const isLast = currentOrder.indexOf(slide.id) === currentOrder.length - 1;\\n            \\n            return (\\n              &amp;lt;div key={slide.id} className=\\\"bg-gray-900 rounded-lg overflow-hidden mb-2\\\"&amp;gt;\\n                &amp;lt;div className=\\\"flex items-center\\\"&amp;gt;\\n                  {/* Reorder buttons */}\\n                  &amp;lt;div className=\\\"flex flex-col border-r border-gray-800\\\"&amp;gt;\\n                    &amp;lt;button\\n                      onClick={(e) =&amp;gt; { e.stopPropagation(); moveSlide(slide.id, 'up'); }}\\n                      disabled={isFirst}\\n                      className=\\\"px-2 py-1 text-gray-400 hover:text-white hover:bg-gray-800 disabled:opacity-30 disabled:cursor-not-allowed transition-colors\\\"\\n                      title=\\\"Move up\\\"\\n                    &amp;gt;\\n                      &amp;lt;ChevronUp className=\\\"w-4 h-4\\\" /&amp;gt;\\n                    &amp;lt;/button&amp;gt;\\n                    &amp;lt;button\\n                      onClick={(e) =&amp;gt; { e.stopPropagation(); moveSlide(slide.id, 'down'); }}\\n                      disabled={isLast}\\n                      className=\\\"px-2 py-1 text-gray-400 hover:text-white hover:bg-gray-800 disabled:opacity-30 disabled:cursor-not-allowed transition-colors\\\"\\n                      title=\\\"Move down\\\"\\n                    &amp;gt;\\n                      &amp;lt;ChevronDown className=\\\"w-4 h-4\\\" /&amp;gt;\\n                    &amp;lt;/button&amp;gt;\\n                  &amp;lt;/div&amp;gt;\\n                  \\n                  {/* Slide header */}\\n                  &amp;lt;button\\n                    onClick={() =&amp;gt; toggleSlide(slide.id)}\\n                    className=\\\"flex-1 px-4 py-3 flex items-center justify-between hover:bg-gray-800 transition-colors\\\"\\n                  &amp;gt;\\n                    &amp;lt;span className=\\\"font-medium\\\"&amp;gt;\\n                      {orderIndex + 2}. {slide.title}\\n                    &amp;lt;/span&amp;gt;\\n                    {expandedSlides.has(slide.id) ? (\\n                      &amp;lt;ChevronDown className=\\\"w-5 h-5 text-gray-400\\\" /&amp;gt;\\n                    ) : (\\n                      &amp;lt;ChevronRight className=\\\"w-5 h-5 text-gray-400\\\" /&amp;gt;\\n                    )}\\n                  &amp;lt;/button&amp;gt;\\n                &amp;lt;/div&amp;gt;\\n                \\n                {expandedSlides.has(slide.id) &amp;amp;&amp;amp; (\\n                  &amp;lt;div className=\\\"px-4 pb-4 space-y-4 border-t border-gray-800\\\"&amp;gt;\\n                    &amp;lt;div className=\\\"pt-4\\\"&amp;gt;\\n                      &amp;lt;label className=\\\"block text-sm text-gray-400 mb-1\\\"&amp;gt;Title&amp;lt;/label&amp;gt;\\n                      &amp;lt;input\\n                        type=\\\"text\\\"\\n                        value={slide.title}\\n                        onChange={(e) =&amp;gt; updateSlide(originalIndex, { title: e.target.value })}\\n                        className=\\\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\\\"\\n                      /&amp;gt;\\n                    &amp;lt;/div&amp;gt;\\n                    \\n                    &amp;lt;div&amp;gt;\\n                      &amp;lt;label className=\\\"block text-sm text-gray-400 mb-1\\\"&amp;gt;Subtitle&amp;lt;/label&amp;gt;\\n                      &amp;lt;input\\n                        type=\\\"text\\\"\\n                        value={slide.subtitle || ''}\\n                        onChange={(e) =&amp;gt; updateSlide(originalIndex, { subtitle: e.target.value })}\\n                        className=\\\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\\\"\\n                      /&amp;gt;\\n                    &amp;lt;/div&amp;gt;\\n\\n                    {/* Sections */}\\n                    {slide.sections?.map((section, sectionIndex) =&amp;gt; (\\n                      &amp;lt;div key={sectionIndex} className=\\\"bg-gray-800 rounded p-3 space-y-3\\\"&amp;gt;\\n                        &amp;lt;div&amp;gt;\\n                          &amp;lt;label className=\\\"block text-xs text-gray-500 mb-1\\\"&amp;gt;Section Heading&amp;lt;/label&amp;gt;\\n                          &amp;lt;input\\n                            type=\\\"text\\\"\\n                            value={section.heading || ''}\\n                            onChange={(e) =&amp;gt; updateSlideSection(originalIndex, sectionIndex, { heading: e.target.value })}\\n                            className=\\\"w-full bg-gray-700 border border-gray-600 rounded px-2 py-1 text-sm text-white\\\"\\n                          /&amp;gt;\\n                        &amp;lt;/div&amp;gt;\\n                        \\n                        {section.text !== undefined &amp;amp;&amp;amp; (\\n                          &amp;lt;div&amp;gt;\\n                            &amp;lt;label className=\\\"block text-xs text-gray-500 mb-1\\\"&amp;gt;Text&amp;lt;/label&amp;gt;\\n                            &amp;lt;textarea\\n                              value={section.text}\\n                              onChange={(e) =&amp;gt; updateSlideSection(originalIndex, sectionIndex, { text: e.target.value })}\\n                              rows={2}\\n                              className=\\\"w-full bg-gray-700 border border-gray-600 rounded px-2 py-1 text-sm text-white\\\"\\n                            /&amp;gt;\\n                          &amp;lt;/div&amp;gt;\\n                        )}\\n                        \\n                        {section.items &amp;amp;&amp;amp; (\\n                          &amp;lt;div&amp;gt;\\n                            &amp;lt;label className=\\\"block text-xs text-gray-500 mb-1\\\"&amp;gt;Bullet Points&amp;lt;/label&amp;gt;\\n                            {section.items.map((item, itemIndex) =&amp;gt; (\\n                              &amp;lt;div key={itemIndex} className=\\\"flex gap-2 mb-1\\\"&amp;gt;\\n                                &amp;lt;input\\n                                  type=\\\"text\\\"\\n                                  value={item}\\n                                  onChange={(e) =&amp;gt; {\\n                                    const newItems = [...section.items!];\\n                                    newItems[itemIndex] = e.target.value;\\n                                    updateSectionItems(originalIndex, sectionIndex, newItems);\\n                                  }}\\n                                  className=\\\"flex-1 bg-gray-700 border border-gray-600 rounded px-2 py-1 text-sm text-white\\\"\\n                                /&amp;gt;\\n                                &amp;lt;button\\n                                  onClick={() =&amp;gt; removeSectionItem(originalIndex, sectionIndex, itemIndex)}\\n                                  className=\\\"text-red-400 hover:text-red-300 p-1\\\"\\n                                &amp;gt;\\n                                  &amp;lt;Trash2 className=\\\"w-4 h-4\\\" /&amp;gt;\\n                                &amp;lt;/button&amp;gt;\\n                              &amp;lt;/div&amp;gt;\\n                            ))}\\n                            &amp;lt;button\\n                              onClick={() =&amp;gt; addSectionItem(originalIndex, sectionIndex)}\\n                              className=\\\"text-xs text-gray-400 hover:text-white flex items-center gap-1 mt-1\\\"\\n                            &amp;gt;\\n                              &amp;lt;Plus className=\\\"w-3 h-3\\\" /&amp;gt; Add item\\n                            &amp;lt;/button&amp;gt;\\n                          &amp;lt;/div&amp;gt;\\n                        )}\\n                      &amp;lt;/div&amp;gt;\\n                    ))}\\n\\n                    {slide.highlight &amp;amp;&amp;amp; (\\n                      &amp;lt;div&amp;gt;\\n                        &amp;lt;label className=\\\"block text-sm text-gray-400 mb-1\\\"&amp;gt;Highlight Box&amp;lt;/label&amp;gt;\\n                        &amp;lt;textarea\\n                          value={slide.highlight}\\n                          onChange={(e) =&amp;gt; updateSlide(originalIndex, { highlight: e.target.value })}\\n                          rows={2}\\n                          className=\\\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\\\"\\n                        /&amp;gt;\\n                      &amp;lt;/div&amp;gt;\\n                    )}\\n\\n                    {slide.footnote &amp;amp;&amp;amp; (\\n                      &amp;lt;div&amp;gt;\\n                        &amp;lt;label className=\\\"block text-sm text-gray-400 mb-1\\\"&amp;gt;Footnote&amp;lt;/label&amp;gt;\\n                        &amp;lt;input\\n                          type=\\\"text\\\"\\n                          value={slide.footnote}\\n                          onChange={(e) =&amp;gt; updateSlide(originalIndex, { footnote: e.target.value })}\\n                          className=\\\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\\\"\\n                        /&amp;gt;\\n                      &amp;lt;/div&amp;gt;\\n                    )}\\n\\n                    {/* Image Section */}\\n                    &amp;lt;div className=\\\"border-t border-gray-700 pt-4 mt-4\\\"&amp;gt;\\n                      &amp;lt;label className=\\\"block text-sm text-gray-400 mb-2\\\"&amp;gt;Slide Image&amp;lt;/label&amp;gt;\\n                      \\n                      {slide.image?.url ? (\\n                        &amp;lt;div className=\\\"relative\\\"&amp;gt;\\n                          &amp;lt;div className=\\\"relative w-full h-48 bg-gray-800 rounded-lg overflow-hidden\\\"&amp;gt;\\n                            &amp;lt;img\\n                              src={slide.image.url}\\n                              alt={slide.image.placeholder || 'Slide image'}\\n                              className=\\\"w-full h-full object-contain\\\"\\n                            /&amp;gt;\\n                          &amp;lt;/div&amp;gt;\\n                          &amp;lt;button\\n                            onClick={() =&amp;gt; removeSlideImage(originalIndex)}\\n                            className=\\\"absolute top-2 right-2 bg-red-600 hover:bg-red-700 text-white p-1 rounded\\\"\\n                          &amp;gt;\\n                            &amp;lt;Trash2 className=\\\"w-4 h-4\\\" /&amp;gt;\\n                          &amp;lt;/button&amp;gt;\\n                          &amp;lt;p className=\\\"text-xs text-gray-500 mt-1\\\"&amp;gt;{slide.image.placeholder}&amp;lt;/p&amp;gt;\\n                        &amp;lt;/div&amp;gt;\\n                      ) : (\\n                        &amp;lt;div\\n                          onDrop={(e) =&amp;gt; handleImageDrop(originalIndex, e)}\\n                          onDragOver={(e) =&amp;gt; e.preventDefault()}\\n                          className=\\\"border-2 border-dashed border-gray-600 rounded-lg p-6 text-center hover:border-gray-500 transition-colors\\\"\\n                        &amp;gt;\\n                          &amp;lt;ImageIcon className=\\\"w-12 h-12 mx-auto text-gray-500 mb-3\\\" /&amp;gt;\\n                          &amp;lt;p className=\\\"text-sm text-gray-400 mb-2\\\"&amp;gt;\\n                            {slide.image?.placeholder || 'Drag &amp;amp; drop image here'}\\n                          &amp;lt;/p&amp;gt;\\n                          &amp;lt;p className=\\\"text-xs text-gray-500 mb-3\\\"&amp;gt;\\n                            Type: {slide.image?.type || 'Not set'}\\n                          &amp;lt;/p&amp;gt;\\n                          &amp;lt;label className=\\\"cursor-pointer\\\"&amp;gt;\\n                            &amp;lt;span className=\\\"inline-flex items-center gap-2 px-3 py-1.5 bg-gray-700 hover:bg-gray-600 rounded text-sm text-white\\\"&amp;gt;\\n                              &amp;lt;Upload className=\\\"w-4 h-4\\\" /&amp;gt;\\n                              Upload Image\\n                            &amp;lt;/span&amp;gt;\\n                            &amp;lt;input\\n                              type=\\\"file\\\"\\n                              accept=\\\"image/*\\\"\\n                              onChange={(e) =&amp;gt; handleImageUpload(originalIndex, e)}\\n                              className=\\\"hidden\\\"\\n                            /&amp;gt;\\n                          &amp;lt;/label&amp;gt;\\n                        &amp;lt;/div&amp;gt;\\n                      )}\\n                      \\n                      &amp;lt;div className=\\\"mt-2\\\"&amp;gt;\\n                        &amp;lt;label className=\\\"block text-xs text-gray-500 mb-1\\\"&amp;gt;Image Description (for AI generation)&amp;lt;/label&amp;gt;\\n                        &amp;lt;input\\n                          type=\\\"text\\\"\\n                          value={slide.image?.placeholder || ''}\\n                          onChange={(e) =&amp;gt; updateSlideImage(originalIndex, {\\n                            ...slide.image,\\n                            type: slide.image?.type || 'infographic',\\n                            placeholder: e.target.value,\\n                          })}\\n                          placeholder=\\\"Describe the image you want...\\\"\\n                          className=\\\"w-full bg-gray-700 border border-gray-600 rounded px-2 py-1 text-sm text-white\\\"\\n                        /&amp;gt;\\n                      &amp;lt;/div&amp;gt;\\n                      \\n                      &amp;lt;div className=\\\"mt-2\\\"&amp;gt;\\n                        &amp;lt;label className=\\\"block text-xs text-gray-500 mb-1\\\"&amp;gt;Image Type&amp;lt;/label&amp;gt;\\n                        &amp;lt;select\\n                          value={slide.image?.type || 'infographic'}\\n                          onChange={(e) =&amp;gt; updateSlideImage(originalIndex, {\\n                            ...slide.image,\\n                            type: e.target.value as SlideImage['type'],\\n                            placeholder: slide.image?.placeholder,\\n                          })}\\n                          className=\\\"w-full bg-gray-700 border border-gray-600 rounded px-2 py-1 text-sm text-white\\\"\\n                        &amp;gt;\\n                          &amp;lt;option value=\\\"icon\\\"&amp;gt;Icon&amp;lt;/option&amp;gt;\\n                          &amp;lt;option value=\\\"chart\\\"&amp;gt;Chart&amp;lt;/option&amp;gt;\\n                          &amp;lt;option value=\\\"mockup\\\"&amp;gt;Mockup&amp;lt;/option&amp;gt;\\n                          &amp;lt;option value=\\\"infographic\\\"&amp;gt;Infographic&amp;lt;/option&amp;gt;\\n                          &amp;lt;option value=\\\"photo\\\"&amp;gt;Photo&amp;lt;/option&amp;gt;\\n                          &amp;lt;option value=\\\"diagram\\\"&amp;gt;Diagram&amp;lt;/option&amp;gt;\\n                        &amp;lt;/select&amp;gt;\\n                      &amp;lt;/div&amp;gt;\\n                    &amp;lt;/div&amp;gt;\\n                  &amp;lt;/div&amp;gt;\\n                )}\\n              &amp;lt;/div&amp;gt;\\n            );\\n          })}\\n        &amp;lt;/section&amp;gt;\\n\\n        {/* Ask Section */}\\n        &amp;lt;section className=\\\"mb-8\\\"&amp;gt;\\n          &amp;lt;h2 className=\\\"text-lg font-semibold mb-4 text-gray-300\\\"&amp;gt;The Ask&amp;lt;/h2&amp;gt;\\n          &amp;lt;div className=\\\"bg-gray-900 rounded-lg p-4 space-y-4\\\"&amp;gt;\\n            &amp;lt;div&amp;gt;\\n              &amp;lt;label className=\\\"block text-sm text-gray-400 mb-1\\\"&amp;gt;Amount&amp;lt;/label&amp;gt;\\n              &amp;lt;input\\n                type=\\\"text\\\"\\n                value={content.ask.amount}\\n                onChange={(e) =&amp;gt; updateAsk('amount', e.target.value)}\\n                className=\\\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\\\"\\n              /&amp;gt;\\n            &amp;lt;/div&amp;gt;\\n            &amp;lt;div&amp;gt;\\n              &amp;lt;label className=\\\"block text-sm text-gray-400 mb-1\\\"&amp;gt;What we&amp;amp;apos;ll do with the funding&amp;lt;/label&amp;gt;\\n              {content.ask.items.map((item, index) =&amp;gt; (\\n                &amp;lt;div key={index} className=\\\"flex gap-2 mb-2\\\"&amp;gt;\\n                  &amp;lt;input\\n                    type=\\\"text\\\"\\n                    value={item}\\n                    onChange={(e) =&amp;gt; {\\n                      const newItems = [...content.ask.items];\\n                      newItems[index] = e.target.value;\\n                      updateAsk('items', newItems);\\n                    }}\\n                    className=\\\"flex-1 bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\\\"\\n                  /&amp;gt;\\n                  &amp;lt;button\\n                    onClick={() =&amp;gt; {\\n                      const newItems = content.ask.items.filter((_, i) =&amp;gt; i !== index);\\n                      updateAsk('items', newItems);\\n                    }}\\n                    className=\\\"text-red-400 hover:text-red-300 p-2\\\"\\n                  &amp;gt;\\n                    &amp;lt;Trash2 className=\\\"w-4 h-4\\\" /&amp;gt;\\n                  &amp;lt;/button&amp;gt;\\n                &amp;lt;/div&amp;gt;\\n              ))}\\n              &amp;lt;button\\n                onClick={() =&amp;gt; updateAsk('items', [...content.ask.items, ''])}\\n                className=\\\"text-sm text-gray-400 hover:text-white flex items-center gap-1\\\"\\n              &amp;gt;\\n                &amp;lt;Plus className=\\\"w-4 h-4\\\" /&amp;gt; Add item\\n              &amp;lt;/button&amp;gt;\\n            &amp;lt;/div&amp;gt;\\n          &amp;lt;/div&amp;gt;\\n        &amp;lt;/section&amp;gt;\\n      &amp;lt;/div&amp;gt;\\n    &amp;lt;/div&amp;gt;\\n  );\\n}\\n\","
                }
              ]
            },
            {
              "file": "./lib/pdf/deck-pdf.tsx",
              "matches": [
                {
                  "lineNumber": 28,
                  "content": "import { getDeckContent, getOrderedSlides, DeckContent, SlideContent } from '@/lib/deck-content';"
                }
              ]
            },
            {
              "file": "./app/admin/deck/page.tsx",
              "matches": [
                {
                  "lineNumber": 11,
                  "content": "import { DeckContent, SlideContent, SlideImage, defaultSlideOrder } from '@/lib/deck-content';"
                }
              ]
            },
            {
              "file": "./.specstory/history/2025-12-11_02-04Z-reorder-presentation-slides-and-add-interface.md",
              "matches": [
                {
                  "lineNumber": 5225,
                  "content": "  \"contents\": \"import React from 'react';\\nimport { Document, View, Text } from '@react-pdf/renderer';\\nimport { StyleSheet } from '@react-pdf/renderer';\\nimport { colors, fonts, fontSize, spacing } from './pdf-styles';\\nimport {\\n  Slide,\\n  Title,\\n  Heading,\\n  BulletList,\\n  Card,\\n  TwoColumn,\\n  BorderedSection,\\n  IconUsers,\\n  IconShield,\\n  IconBot,\\n  IconBox,\\n  TeamMember,\\n} from './pdf-components';\\nimport {\\n  EconomicsChart,\\n  ScalingDiagram,\\n  RoadmapTimeline,\\n  AgentWorkflowDiagram,\\n} from './pdf-charts';\\nimport {\\n  DirectorOSOverview,\\n} from './pdf-mockups';\\nimport { getDeckContent, DeckContent, SlideContent } from '@/lib/deck-content';\\n\\nconst localStyles = StyleSheet.create({\\n  coverCenter: {\\n    flex: 1,\\n    alignItems: 'center',\\n    justifyContent: 'center',\\n  },\\n  coverTitle: {\\n    fontFamily: fonts.heading,\\n    fontSize: 56,\\n    color: colors.white,\\n    marginBottom: spacing.md,\\n  },\\n  coverTagline: {\\n    fontFamily: fonts.body,\\n    fontSize: fontSize.subtitle,\\n    color: colors.gray[300],\\n    textAlign: 'center',\\n    maxWidth: 700,\\n    lineHeight: 1.4,\\n  },\\n  coverSubtagline: {\\n    fontFamily: fonts.body,\\n    fontSize: fontSize.body,\\n    color: colors.gray[400],\\n    textAlign: 'center',\\n    marginTop: spacing.md,\\n  },\\n  coverUrl: {\\n    fontFamily: fonts.body,\\n    fontSize: fontSize.body,\\n    color: colors.gray[500],\\n    marginTop: spacing.xxl,\\n  },\\n  contentArea: {\\n    flex: 1,\\n  },\\n  highlightBox: {\\n    backgroundColor: colors.gray[800],\\n    padding: spacing.md,\\n    borderRadius: 6,\\n    marginTop: spacing.md,\\n  },\\n  highlightText: {\\n    fontFamily: fonts.heading,\\n    fontSize: fontSize.body,\\n    color: colors.white,\\n    textAlign: 'center',\\n  },\\n  askBox: {\\n    backgroundColor: colors.gray[800],\\n    borderWidth: 2,\\n    borderColor: colors.white,\\n    padding: spacing.lg,\\n    borderRadius: 6,\\n    marginTop: spacing.md,\\n  },\\n  askTitle: {\\n    fontFamily: fonts.heading,\\n    fontSize: fontSize.heading,\\n    color: colors.white,\\n    marginBottom: spacing.sm,\\n  },\\n  askAmount: {\\n    fontFamily: fonts.heading,\\n    fontSize: 32,\\n    color: colors.white,\\n    marginBottom: spacing.sm,\\n  },\\n  sectionLabel: {\\n    fontFamily: fonts.body,\\n    fontSize: fontSize.tiny,\\n    color: colors.gray[500],\\n    marginBottom: spacing.xs,\\n    textTransform: 'uppercase',\\n  },\\n  bodyText: {\\n    fontFamily: fonts.body,\\n    fontSize: fontSize.body,\\n    color: colors.gray[300],\\n    lineHeight: 1.4,\\n    marginBottom: spacing.sm,\\n  },\\n  boldText: {\\n    fontFamily: fonts.heading,\\n    fontSize: fontSize.body,\\n    color: colors.white,\\n  },\\n  smallCard: {\\n    backgroundColor: colors.gray[800],\\n    borderRadius: 4,\\n    padding: spacing.sm,\\n    marginBottom: spacing.xs,\\n  },\\n  cardLabel: {\\n    fontFamily: fonts.body,\\n    fontSize: fontSize.tiny,\\n    color: colors.gray[400],\\n    marginBottom: 2,\\n  },\\n  cardValue: {\\n    fontFamily: fonts.heading,\\n    fontSize: fontSize.body,\\n    color: colors.white,\\n  },\\n  iconRow: {\\n    flexDirection: 'row',\\n    alignItems: 'center',\\n    marginBottom: spacing.xs,\\n    gap: spacing.sm,\\n  },\\n  teamGrid: {\\n    flexDirection: 'row',\\n    justifyContent: 'space-around',\\n    marginTop: spacing.md,\\n  },\\n  row: {\\n    flexDirection: 'row',\\n    gap: spacing.sm,\\n  },\\n  column: {\\n    flex: 1,\\n  },\\n});\\n\\n// Helper to render sections with items or text\\nfunction renderSections(sections: SlideContent['sections'], limit?: number) {\\n  const items = limit ? sections?.slice(0, limit) : sections;\\n  return items?.map((section, i) =&amp;gt; (\\n    &amp;lt;View key={i} style={{ marginBottom: spacing.sm }}&amp;gt;\\n      {section.heading &amp;amp;&amp;amp; &amp;lt;Heading level={3}&amp;gt;{section.heading}&amp;lt;/Heading&amp;gt;}\\n      {section.text &amp;amp;&amp;amp; &amp;lt;Text style={localStyles.bodyText}&amp;gt;{section.text}&amp;lt;/Text&amp;gt;}\\n      {section.items &amp;amp;&amp;amp; &amp;lt;BulletList items={section.items} /&amp;gt;}\\n    &amp;lt;/View&amp;gt;\\n  ));\\n}\\n\\n// Slide 1: Cover\\nfunction CoverSlide({ content }: { content: DeckContent }) {\\n  return (\\n    &amp;lt;Slide variant=\\\"dark\\\" pageNumber={1}&amp;gt;\\n      &amp;lt;View style={localStyles.coverCenter}&amp;gt;\\n        &amp;lt;Text style={localStyles.coverTitle}&amp;gt;{content.cover.title}&amp;lt;/Text&amp;gt;\\n        &amp;lt;Text style={localStyles.coverTagline}&amp;gt;{content.cover.tagline}&amp;lt;/Text&amp;gt;\\n        &amp;lt;Text style={localStyles.coverSubtagline}&amp;gt;{content.cover.subtagline}&amp;lt;/Text&amp;gt;\\n        &amp;lt;Text style={localStyles.coverUrl}&amp;gt;{content.cover.url}&amp;lt;/Text&amp;gt;\\n      &amp;lt;/View&amp;gt;\\n    &amp;lt;/Slide&amp;gt;\\n  );\\n}\\n\\n// Generic content slide\\nfunction ContentSlide({ slide, pageNumber, variant = 'dark' }: { slide: SlideContent; pageNumber: number; variant?: 'dark' | 'light' }) {\\n  return (\\n    &amp;lt;Slide variant={variant} pageNumber={pageNumber}&amp;gt;\\n      &amp;lt;Title subtitle={slide.subtitle}&amp;gt;{slide.title}&amp;lt;/Title&amp;gt;\\n      &amp;lt;View style={localStyles.contentArea}&amp;gt;\\n        {renderSections(slide.sections)}\\n        {slide.footnote &amp;amp;&amp;amp; &amp;lt;Text style={localStyles.bodyText}&amp;gt;{slide.footnote}&amp;lt;/Text&amp;gt;}\\n        {slide.highlight &amp;amp;&amp;amp; (\\n          &amp;lt;View style={localStyles.highlightBox}&amp;gt;\\n            &amp;lt;Text style={localStyles.highlightText}&amp;gt;{slide.highlight}&amp;lt;/Text&amp;gt;\\n          &amp;lt;/View&amp;gt;\\n        )}\\n      &amp;lt;/View&amp;gt;\\n    &amp;lt;/Slide&amp;gt;\\n  );\\n}\\n\\n// Two column slide\\nfunction TwoColumnSlide({ slide, pageNumber, variant = 'dark' }: { slide: SlideContent; pageNumber: number; variant?: 'dark' | 'light' }) {\\n  const leftSections = slide.sections?.slice(0, Math.ceil((slide.sections?.length || 0) / 2));\\n  const rightSections = slide.sections?.slice(Math.ceil((slide.sections?.length || 0) / 2));\\n  \\n  return (\\n    &amp;lt;Slide variant={variant} pageNumber={pageNumber}&amp;gt;\\n      &amp;lt;Title subtitle={slide.subtitle}&amp;gt;{slide.title}&amp;lt;/Title&amp;gt;\\n      &amp;lt;TwoColumn\\n        left={&amp;lt;View&amp;gt;{renderSections(leftSections)}&amp;lt;/View&amp;gt;}\\n        right={&amp;lt;View&amp;gt;{renderSections(rightSections)}&amp;lt;/View&amp;gt;}\\n      /&amp;gt;\\n      {slide.footnote &amp;amp;&amp;amp; &amp;lt;Text style={localStyles.bodyText}&amp;gt;{slide.footnote}&amp;lt;/Text&amp;gt;}\\n      {slide.highlight &amp;amp;&amp;amp; (\\n        &amp;lt;View style={localStyles.highlightBox}&amp;gt;\\n          &amp;lt;Text style={localStyles.highlightText}&amp;gt;{slide.highlight}&amp;lt;/Text&amp;gt;\\n        &amp;lt;/View&amp;gt;\\n      )}\\n    &amp;lt;/Slide&amp;gt;\\n  );\\n}\\n\\n// Director What We Are slide with icons\\nfunction DirectorWhatWeAreSlide({ slide, pageNumber }: { slide: SlideContent; pageNumber: number }) {\\n  return (\\n    &amp;lt;Slide variant=\\\"light\\\" pageNumber={pageNumber}&amp;gt;\\n      &amp;lt;Title subtitle={slide.subtitle}&amp;gt;{slide.title}&amp;lt;/Title&amp;gt;\\n      &amp;lt;TwoColumn\\n        left={\\n          &amp;lt;Card variant=\\\"bordered\\\"&amp;gt;\\n            &amp;lt;View style={localStyles.iconRow}&amp;gt;\\n              &amp;lt;IconBox icon={&amp;lt;IconShield size={20} /&amp;gt;} /&amp;gt;\\n              &amp;lt;Heading level={3}&amp;gt;{slide.sections?.[0]?.heading}&amp;lt;/Heading&amp;gt;\\n            &amp;lt;/View&amp;gt;\\n            {slide.sections?.[0]?.items &amp;amp;&amp;amp; &amp;lt;BulletList items={slide.sections[0].items} /&amp;gt;}\\n          &amp;lt;/Card&amp;gt;\\n        }\\n        right={\\n          &amp;lt;Card variant=\\\"bordered\\\"&amp;gt;\\n            &amp;lt;View style={localStyles.iconRow}&amp;gt;\\n              &amp;lt;IconBox icon={&amp;lt;IconUsers size={20} /&amp;gt;} /&amp;gt;\\n              &amp;lt;Heading level={3}&amp;gt;{slide.sections?.[1]?.heading}&amp;lt;/Heading&amp;gt;\\n            &amp;lt;/View&amp;gt;\\n            {slide.sections?.[1]?.items &amp;amp;&amp;amp; &amp;lt;BulletList items={slide.sections[1].items} /&amp;gt;}\\n          &amp;lt;/Card&amp;gt;\\n        }\\n      /&amp;gt;\\n      {slide.highlight &amp;amp;&amp;amp; (\\n        &amp;lt;View style={localStyles.highlightBox}&amp;gt;\\n          &amp;lt;Text style={localStyles.highlightText}&amp;gt;{slide.highlight}&amp;lt;/Text&amp;gt;\\n        &amp;lt;/View&amp;gt;\\n      )}\\n    &amp;lt;/Slide&amp;gt;\\n  );\\n}\\n\\n// Director Pod slide with scaling diagram\\nfunction DirectorPodSlide({ slide, pageNumber }: { slide: SlideContent; pageNumber: number }) {\\n  return (\\n    &amp;lt;Slide variant=\\\"light\\\" pageNumber={pageNumber}&amp;gt;\\n      &amp;lt;Title subtitle={slide.subtitle}&amp;gt;{slide.title}&amp;lt;/Title&amp;gt;\\n      &amp;lt;ScalingDiagram /&amp;gt;\\n      &amp;lt;View style={{ ...localStyles.row, marginTop: spacing.sm }}&amp;gt;\\n        {slide.sections?.map((section, i) =&amp;gt; (\\n          &amp;lt;Card key={i} variant=\\\"bordered\\\" style={localStyles.column}&amp;gt;\\n            &amp;lt;Heading level={3}&amp;gt;{section.heading}&amp;lt;/Heading&amp;gt;\\n            {section.items &amp;amp;&amp;amp; &amp;lt;BulletList items={section.items} /&amp;gt;}\\n            {section.text &amp;amp;&amp;amp; &amp;lt;Text style={localStyles.bodyText}&amp;gt;{section.text}&amp;lt;/Text&amp;gt;}\\n          &amp;lt;/Card&amp;gt;\\n        ))}\\n      &amp;lt;/View&amp;gt;\\n    &amp;lt;/Slide&amp;gt;\\n  );\\n}\\n\\n// Director OS slide with mockups\\nfunction DirectorOSSlide({ slide, pageNumber }: { slide: SlideContent; pageNumber: number }) {\\n  return (\\n    &amp;lt;Slide variant=\\\"dark\\\" pageNumber={pageNumber}&amp;gt;\\n      &amp;lt;Title subtitle={slide.subtitle}&amp;gt;{slide.title}&amp;lt;/Title&amp;gt;\\n      &amp;lt;DirectorOSOverview /&amp;gt;\\n      &amp;lt;View style={{ ...localStyles.row, marginTop: spacing.sm, flexWrap: 'wrap' }}&amp;gt;\\n        {slide.sections?.map((section, i) =&amp;gt; (\\n          &amp;lt;View key={i} style={{ ...localStyles.smallCard, width: '48%' }}&amp;gt;\\n            &amp;lt;Text style={localStyles.cardValue}&amp;gt;{section.heading}&amp;lt;/Text&amp;gt;\\n            &amp;lt;Text style={localStyles.cardLabel}&amp;gt;{section.text}&amp;lt;/Text&amp;gt;\\n          &amp;lt;/View&amp;gt;\\n        ))}\\n      &amp;lt;/View&amp;gt;\\n    &amp;lt;/Slide&amp;gt;\\n  );\\n}\\n\\n// AI Agents slide with workflow\\nfunction AIAgentsSlide({ slide, pageNumber }: { slide: SlideContent; pageNumber: number }) {\\n  return (\\n    &amp;lt;Slide variant=\\\"light\\\" pageNumber={pageNumber}&amp;gt;\\n      &amp;lt;Title subtitle={slide.subtitle}&amp;gt;{slide.title}&amp;lt;/Title&amp;gt;\\n      &amp;lt;View style={{ ...localStyles.row, flexWrap: 'wrap' }}&amp;gt;\\n        {slide.sections?.map((section, i) =&amp;gt; (\\n          &amp;lt;Card key={i} variant=\\\"bordered\\\" style={{ width: '48%', marginBottom: spacing.xs }}&amp;gt;\\n            &amp;lt;View style={localStyles.iconRow}&amp;gt;\\n              &amp;lt;IconBot size={16} /&amp;gt;\\n              &amp;lt;Text style={localStyles.boldText}&amp;gt;{section.heading}&amp;lt;/Text&amp;gt;\\n            &amp;lt;/View&amp;gt;\\n            {section.items &amp;amp;&amp;amp; &amp;lt;BulletList items={section.items} /&amp;gt;}\\n          &amp;lt;/Card&amp;gt;\\n        ))}\\n      &amp;lt;/View&amp;gt;\\n      &amp;lt;AgentWorkflowDiagram /&amp;gt;\\n    &amp;lt;/Slide&amp;gt;\\n  );\\n}\\n\\n// Economics slide with chart\\nfunction EconomicsSlide({ slide, pageNumber }: { slide: SlideContent; pageNumber: number }) {\\n  return (\\n    &amp;lt;Slide variant=\\\"dark\\\" pageNumber={pageNumber}&amp;gt;\\n      &amp;lt;Title subtitle={slide.subtitle}&amp;gt;{slide.title}&amp;lt;/Title&amp;gt;\\n      &amp;lt;EconomicsChart /&amp;gt;\\n      {slide.footnote &amp;amp;&amp;amp; &amp;lt;Text style={localStyles.bodyText}&amp;gt;{slide.footnote}&amp;lt;/Text&amp;gt;}\\n    &amp;lt;/Slide&amp;gt;\\n  );\\n}\\n\\n// Team slide with members\\nfunction TeamSlide({ slide, pageNumber }: { slide: SlideContent; pageNumber: number }) {\\n  return (\\n    &amp;lt;Slide variant=\\\"dark\\\" pageNumber={pageNumber}&amp;gt;\\n      &amp;lt;Title subtitle={slide.subtitle}&amp;gt;{slide.title}&amp;lt;/Title&amp;gt;\\n      &amp;lt;View style={localStyles.teamGrid}&amp;gt;\\n        {slide.sections?.map((section, i) =&amp;gt; (\\n          &amp;lt;TeamMember \\n            key={i} \\n            name={section.heading || ''} \\n            role={section.text || ''} \\n          /&amp;gt;\\n        ))}\\n      &amp;lt;/View&amp;gt;\\n      {slide.footnote &amp;amp;&amp;amp; (\\n        &amp;lt;Card variant=\\\"bordered\\\" style={{ marginTop: spacing.md }}&amp;gt;\\n          &amp;lt;Text style={localStyles.bodyText}&amp;gt;{slide.footnote}&amp;lt;/Text&amp;gt;\\n        &amp;lt;/Card&amp;gt;\\n      )}\\n    &amp;lt;/Slide&amp;gt;\\n  );\\n}\\n\\n// Roadmap slide with timeline and ask\\nfunction RoadmapSlide({ slide, ask, pageNumber }: { slide: SlideContent; ask: DeckContent['ask']; pageNumber: number }) {\\n  return (\\n    &amp;lt;Slide variant=\\\"light\\\" pageNumber={pageNumber}&amp;gt;\\n      &amp;lt;Title&amp;gt;{slide.title}&amp;lt;/Title&amp;gt;\\n      &amp;lt;RoadmapTimeline /&amp;gt;\\n      &amp;lt;View style={localStyles.askBox}&amp;gt;\\n        &amp;lt;Text style={localStyles.askTitle}&amp;gt;Ask&amp;lt;/Text&amp;gt;\\n        &amp;lt;Text style={localStyles.askAmount}&amp;gt;{ask.amount}&amp;lt;/Text&amp;gt;\\n        &amp;lt;BulletList items={ask.items} color={colors.white} /&amp;gt;\\n      &amp;lt;/View&amp;gt;\\n    &amp;lt;/Slide&amp;gt;\\n  );\\n}\\n\\n// Main Document\\nexport function DirectorPitchDeck() {\\n  const content = getDeckContent();\\n  \\n  // Helper to get slide by ID\\n  const getSlide = (id: string) =&amp;gt; content.slides.find(s =&amp;gt; s.id === id);\\n  \\n  return (\\n    &amp;lt;Document\\n      title=\\\"Director Pitch Deck\\\"\\n      author=\\\"Director\\\"\\n      subject=\\\"AI-native backbone for nonprofits\\\"\\n      keywords=\\\"director, nonprofit, AI, operations, fundraising\\\"\\n    &amp;gt;\\n      {/* 1. Cover */}\\n      &amp;lt;CoverSlide content={content} /&amp;gt;\\n      \\n      {/* 2. Problem - Founders */}\\n      {getSlide('problem-founders') &amp;amp;&amp;amp; (\\n        &amp;lt;ContentSlide slide={getSlide('problem-founders')!} pageNumber={2} /&amp;gt;\\n      )}\\n      \\n      {/* 3. Problem - Downshifted */}\\n      {getSlide('problem-downshifted') &amp;amp;&amp;amp; (\\n        &amp;lt;TwoColumnSlide slide={getSlide('problem-downshifted')!} pageNumber={3} variant=\\\"light\\\" /&amp;gt;\\n      )}\\n      \\n      {/* 4. Foundations as Buyers */}\\n      {getSlide('customer-foundations') &amp;amp;&amp;amp; (\\n        &amp;lt;TwoColumnSlide slide={getSlide('customer-foundations')!} pageNumber={4} variant=\\\"dark\\\" /&amp;gt;\\n      )}\\n      \\n      {/* 5. Market Opportunity */}\\n      {getSlide('market') &amp;amp;&amp;amp; (\\n        &amp;lt;ContentSlide slide={getSlide('market')!} pageNumber={5} variant=\\\"light\\\" /&amp;gt;\\n      )}\\n      \\n      {/* 6. Broken Options */}\\n      {getSlide('broken-options') &amp;amp;&amp;amp; (\\n        &amp;lt;ContentSlide slide={getSlide('broken-options')!} pageNumber={6} /&amp;gt;\\n      )}\\n      \\n      {/* 7. What We Are */}\\n      {getSlide('what-we-are') &amp;amp;&amp;amp; (\\n        &amp;lt;DirectorWhatWeAreSlide slide={getSlide('what-we-are')!} pageNumber={7} /&amp;gt;\\n      )}\\n      \\n      {/* 8. Fundraising Philosophy */}\\n      {getSlide('fundraising-philosophy') &amp;amp;&amp;amp; (\\n        &amp;lt;TwoColumnSlide slide={getSlide('fundraising-philosophy')!} pageNumber={8} /&amp;gt;\\n      )}\\n      \\n      {/* 9. Director Pod */}\\n      {getSlide('director-pod') &amp;amp;&amp;amp; (\\n        &amp;lt;DirectorPodSlide slide={getSlide('director-pod')!} pageNumber={9} /&amp;gt;\\n      )}\\n      \\n      {/* 10. Director OS */}\\n      {getSlide('director-os') &amp;amp;&amp;amp; (\\n        &amp;lt;DirectorOSSlide slide={getSlide('director-os')!} pageNumber={10} /&amp;gt;\\n      )}\\n      \\n      {/* 11. AI Agents */}\\n      {getSlide('ai-agents') &amp;amp;&amp;amp; (\\n        &amp;lt;AIAgentsSlide slide={getSlide('ai-agents')!} pageNumber={11} /&amp;gt;\\n      )}\\n      \\n      {/* 12. Economics */}\\n      {getSlide('economics') &amp;amp;&amp;amp; (\\n        &amp;lt;EconomicsSlide slide={getSlide('economics')!} pageNumber={12} /&amp;gt;\\n      )}\\n      \\n      {/* 13. Why Now */}\\n      {getSlide('why-now') &amp;amp;&amp;amp; (\\n        &amp;lt;TwoColumnSlide slide={getSlide('why-now')!} pageNumber={13} variant=\\\"light\\\" /&amp;gt;\\n      )}\\n      \\n      {/* 14. Go-to-Market */}\\n      {getSlide('go-to-market') &amp;amp;&amp;amp; (\\n        &amp;lt;ContentSlide slide={getSlide('go-to-market')!} pageNumber={14} /&amp;gt;\\n      )}\\n      \\n      {/* 15. Business Model */}\\n      {getSlide('business-model') &amp;amp;&amp;amp; (\\n        &amp;lt;ContentSlide slide={getSlide('business-model')!} pageNumber={15} variant=\\\"light\\\" /&amp;gt;\\n      )}\\n      \\n      {/* 16. Strategic Partners */}\\n      {getSlide('strategic-partners') &amp;amp;&amp;amp; (\\n        &amp;lt;TwoColumnSlide slide={getSlide('strategic-partners')!} pageNumber={16} variant=\\\"dark\\\" /&amp;gt;\\n      )}\\n      \\n      {/* 17. Team */}\\n      {getSlide('team') &amp;amp;&amp;amp; (\\n        &amp;lt;TeamSlide slide={getSlide('team')!} pageNumber={17} /&amp;gt;\\n      )}\\n      \\n      {/* 18. Current Customers &amp;amp; Traction */}\\n      {getSlide('current-customers') &amp;amp;&amp;amp; (\\n        &amp;lt;ContentSlide slide={getSlide('current-customers')!} pageNumber={18} variant=\\\"light\\\" /&amp;gt;\\n      )}\\n      \\n      {/* 19. Roadmap &amp;amp; Ask */}\\n      {getSlide('roadmap') &amp;amp;&amp;amp; (\\n        &amp;lt;RoadmapSlide slide={getSlide('roadmap')!} ask={content.ask} pageNumber={19} /&amp;gt;\\n      )}\\n    &amp;lt;/Document&amp;gt;\\n  );\\n}\\n\\nexport default DirectorPitchDeck;\\n\","
                },
                {
                  "lineNumber": 6249,
                  "content": "  \"contents\": \"'use client';\\n\\nimport { useState, useEffect, useCallback, useRef } from 'react';\\nimport Link from 'next/link';\\nimport { Button } from '@/components/ui/button';\\nimport { \\n  ArrowLeft, Save, RotateCcw, Eye, Loader2, Plus, Trash2, \\n  ChevronDown, ChevronRight, ImageIcon, Upload, Undo2, Redo2,\\n  Sparkles, X, Send, History, Clock, RotateCw, Command\\n} from 'lucide-react';\\nimport { DeckContent, SlideContent, SlideImage } from '@/lib/deck-content';\\n\\nconst MAX_HISTORY = 50;\\n\\ninterface ChatMessage {\\n  id: string;\\n  role: 'user' | 'assistant';\\n  content: string;\\n  timestamp: Date;\\n  proposedContent?: DeckContent;\\n  changes?: string[];\\n  applied?: boolean;\\n}\\n\\ninterface DeckVersionSummary {\\n  id: number;\\n  description: string | null;\\n  createdBy: number | null;\\n  createdAt: string;\\n}\\n\\nexport default function DeckEditorPage() {\\n  const [content, setContent] = useState&amp;lt;DeckContent | null&amp;gt;(null);\\n  const [isLoading, setIsLoading] = useState(true);\\n  const [isSaving, setIsSaving] = useState(false);\\n  const [expandedSlides, setExpandedSlides] = useState&amp;lt;Set&amp;lt;string&amp;gt;&amp;gt;(new Set());\\n  const [hasChanges, setHasChanges] = useState(false);\\n  \\n  // Undo/Redo state\\n  const [history, setHistory] = useState&amp;lt;DeckContent[]&amp;gt;([]);\\n  const [historyIndex, setHistoryIndex] = useState(-1);\\n  const isUndoRedo = useRef(false);\\n\\n  // Chat panel state\\n  const [showChat, setShowChat] = useState(false);\\n  const [chatMessages, setChatMessages] = useState&amp;lt;ChatMessage[]&amp;gt;([]);\\n  const [chatInput, setChatInput] = useState('');\\n  const [isAiLoading, setIsAiLoading] = useState(false);\\n  const chatEndRef = useRef&amp;lt;HTMLDivElement&amp;gt;(null);\\n\\n  // Command bar state\\n  const [showCommandBar, setShowCommandBar] = useState(false);\\n  const [commandInput, setCommandInput] = useState('');\\n  const commandInputRef = useRef&amp;lt;HTMLInputElement&amp;gt;(null);\\n\\n  // Version history state\\n  const [showHistory, setShowHistory] = useState(false);\\n  const [versions, setVersions] = useState&amp;lt;DeckVersionSummary[]&amp;gt;([]);\\n  const [isLoadingVersions, setIsLoadingVersions] = useState(false);\\n  const [previewVersion, setPreviewVersion] = useState&amp;lt;DeckContent | null&amp;gt;(null);\\n\\n  // Keyboard shortcuts\\n  useEffect(() =&amp;gt; {\\n    const handleKeyDown = (e: KeyboardEvent) =&amp;gt; {\\n      // Undo/Redo\\n      if ((e.metaKey || e.ctrlKey) &amp;amp;&amp;amp; e.key === 'z') {\\n        e.preventDefault();\\n        if (e.shiftKey) {\\n          redo();\\n        } else {\\n          undo();\\n        }\\n      }\\n      // Command bar (Cmd+K)\\n      if ((e.metaKey || e.ctrlKey) &amp;amp;&amp;amp; e.key === 'k') {\\n        e.preventDefault();\\n        setShowCommandBar(true);\\n        setTimeout(() =&amp;gt; commandInputRef.current?.focus(), 100);\\n      }\\n      // Close panels on Escape\\n      if (e.key === 'Escape') {\\n        setShowCommandBar(false);\\n        setShowChat(false);\\n        setShowHistory(false);\\n        setPreviewVersion(null);\\n      }\\n    };\\n    \\n    window.addEventListener('keydown', handleKeyDown);\\n    return () =&amp;gt; window.removeEventListener('keydown', handleKeyDown);\\n  }, [historyIndex, history]);\\n\\n  // Scroll chat to bottom when new messages arrive\\n  useEffect(() =&amp;gt; {\\n    chatEndRef.current?.scrollIntoView({ behavior: 'smooth' });\\n  }, [chatMessages]);\\n\\n  useEffect(() =&amp;gt; {\\n    fetchContent();\\n  }, []);\\n\\n  const fetchContent = async () =&amp;gt; {\\n    setIsLoading(true);\\n    try {\\n      const response = await fetch('/api/deck-content');\\n      const data = await response.json();\\n      setContent(data);\\n      setHistory([data]);\\n      setHistoryIndex(0);\\n    } catch (error) {\\n      console.error('Failed to fetch content:', error);\\n    } finally {\\n      setIsLoading(false);\\n    }\\n  };\\n\\n  const fetchVersions = async () =&amp;gt; {\\n    setIsLoadingVersions(true);\\n    try {\\n      const response = await fetch('/api/deck-content/versions');\\n      const data = await response.json();\\n      setVersions(data);\\n    } catch (error) {\\n      console.error('Failed to fetch versions:', error);\\n    } finally {\\n      setIsLoadingVersions(false);\\n    }\\n  };\\n\\n  const previewVersionContent = async (versionId: number) =&amp;gt; {\\n    try {\\n      const response = await fetch(&amp;#96;/api/deck-content/versions/${versionId}&amp;#96;);\\n      const data = await response.json();\\n      setPreviewVersion(data.content);\\n    } catch (error) {\\n      console.error('Failed to fetch version:', error);\\n    }\\n  };\\n\\n  const restoreVersion = async (versionId: number) =&amp;gt; {\\n    if (!confirm('Restore this version? Your current changes will be saved as a new version first.')) return;\\n    \\n    try {\\n      // Save current state first\\n      if (content &amp;amp;&amp;amp; hasChanges) {\\n        await fetch('/api/deck-content', {\\n          method: 'PUT',\\n          headers: { 'Content-Type': 'application/json' },\\n          body: JSON.stringify({ content, description: 'Auto-save before restore' }),\\n        });\\n      }\\n      \\n      const response = await fetch(&amp;#96;/api/deck-content/versions/${versionId}/restore&amp;#96;, {\\n        method: 'POST',\\n      });\\n      const data = await response.json();\\n      \\n      if (data.success) {\\n        setContent(data.content);\\n        setHistory([data.content]);\\n        setHistoryIndex(0);\\n        setHasChanges(false);\\n        setPreviewVersion(null);\\n        setShowHistory(false);\\n        fetchVersions();\\n      }\\n    } catch (error) {\\n      console.error('Failed to restore version:', error);\\n    }\\n  };\\n\\n  const pushToHistory = useCallback((newContent: DeckContent) =&amp;gt; {\\n    if (isUndoRedo.current) {\\n      isUndoRedo.current = false;\\n      return;\\n    }\\n    \\n    setHistory(prev =&amp;gt; {\\n      const newHistory = prev.slice(0, historyIndex + 1);\\n      newHistory.push(newContent);\\n      if (newHistory.length &amp;gt; MAX_HISTORY) {\\n        newHistory.shift();\\n        return newHistory;\\n      }\\n      return newHistory;\\n    });\\n    setHistoryIndex(prev =&amp;gt; Math.min(prev + 1, MAX_HISTORY - 1));\\n  }, [historyIndex]);\\n\\n  const undo = useCallback(() =&amp;gt; {\\n    if (historyIndex &amp;gt; 0) {\\n      isUndoRedo.current = true;\\n      const newIndex = historyIndex - 1;\\n      setHistoryIndex(newIndex);\\n      setContent(history[newIndex]);\\n      setHasChanges(true);\\n    }\\n  }, [historyIndex, history]);\\n\\n  const redo = useCallback(() =&amp;gt; {\\n    if (historyIndex &amp;lt; history.length - 1) {\\n      isUndoRedo.current = true;\\n      const newIndex = historyIndex + 1;\\n      setHistoryIndex(newIndex);\\n      setContent(history[newIndex]);\\n      setHasChanges(true);\\n    }\\n  }, [historyIndex, history]);\\n\\n  const canUndo = historyIndex &amp;gt; 0;\\n  const canRedo = historyIndex &amp;lt; history.length - 1;\\n\\n  const saveContent = async (description?: string) =&amp;gt; {\\n    if (!content) return;\\n    setIsSaving(true);\\n    try {\\n      const response = await fetch('/api/deck-content', {\\n        method: 'PUT',\\n        headers: { 'Content-Type': 'application/json' },\\n        body: JSON.stringify({ content, description }),\\n      });\\n      if (response.ok) {\\n        setHasChanges(false);\\n      }\\n    } catch (error) {\\n      console.error('Failed to save content:', error);\\n      alert('Failed to save content');\\n    } finally {\\n      setIsSaving(false);\\n    }\\n  };\\n\\n  const resetContent = async () =&amp;gt; {\\n    if (!confirm('Reset all content to defaults? This cannot be undone.')) return;\\n    try {\\n      const response = await fetch('/api/deck-content', { method: 'DELETE' });\\n      const data = await response.json();\\n      setContent(data);\\n      setHistory([data]);\\n      setHistoryIndex(0);\\n      setHasChanges(false);\\n    } catch (error) {\\n      console.error('Failed to reset content:', error);\\n    }\\n  };\\n\\n  // AI Chat functions\\n  const sendChatMessage = async (message: string) =&amp;gt; {\\n    if (!message.trim() || !content) return;\\n    \\n    const userMessage: ChatMessage = {\\n      id: Date.now().toString(),\\n      role: 'user',\\n      content: message,\\n      timestamp: new Date(),\\n    };\\n    \\n    setChatMessages(prev =&amp;gt; [...prev, userMessage]);\\n    setChatInput('');\\n    setIsAiLoading(true);\\n    \\n    try {\\n      const response = await fetch('/api/deck/ai-edit', {\\n        method: 'POST',\\n        headers: { 'Content-Type': 'application/json' },\\n        body: JSON.stringify({\\n          instruction: message,\\n          currentContent: content,\\n        }),\\n      });\\n      \\n      const data = await response.json();\\n      \\n      const assistantMessage: ChatMessage = {\\n        id: (Date.now() + 1).toString(),\\n        role: 'assistant',\\n        content: data.success \\n          ? &amp;#96;${data.description}\\\\n\\\\nChanges:\\\\n${data.changes?.map((c: string) =&amp;gt; &amp;#96;• ${c}&amp;#96;).join('\\\\n') || 'Content updated'}&amp;#96;\\n          : &amp;#96;Sorry, I couldn't complete that request: ${data.error}&amp;#96;,\\n        timestamp: new Date(),\\n        proposedContent: data.success ? data.content : undefined,\\n        changes: data.changes,\\n        applied: false,\\n      };\\n      \\n      setChatMessages(prev =&amp;gt; [...prev, assistantMessage]);\\n    } catch (error) {\\n      const errorMessage: ChatMessage = {\\n        id: (Date.now() + 1).toString(),\\n        role: 'assistant',\\n        content: 'Sorry, there was an error processing your request. Please try again.',\\n        timestamp: new Date(),\\n      };\\n      setChatMessages(prev =&amp;gt; [...prev, errorMessage]);\\n    } finally {\\n      setIsAiLoading(false);\\n    }\\n  };\\n\\n  const applyProposedChanges = (messageId: string) =&amp;gt; {\\n    const message = chatMessages.find(m =&amp;gt; m.id === messageId);\\n    if (!message?.proposedContent) return;\\n    \\n    setContent(message.proposedContent);\\n    pushToHistory(message.proposedContent);\\n    setHasChanges(true);\\n    \\n    setChatMessages(prev =&amp;gt; prev.map(m =&amp;gt; \\n      m.id === messageId ? { ...m, applied: true } : m\\n    ));\\n  };\\n\\n  const handleCommandSubmit = async () =&amp;gt; {\\n    if (!commandInput.trim()) return;\\n    \\n    const command = commandInput.trim();\\n    setShowCommandBar(false);\\n    setCommandInput('');\\n    \\n    // Open chat and send the command\\n    setShowChat(true);\\n    await sendChatMessage(command);\\n  };\\n\\n  const updateCover = (field: keyof DeckContent['cover'], value: string) =&amp;gt; {\\n    if (!content) return;\\n    const newContent = { ...content, cover: { ...content.cover, [field]: value } };\\n    setContent(newContent);\\n    pushToHistory(newContent);\\n    setHasChanges(true);\\n  };\\n\\n  const updateSlide = (index: number, updates: Partial&amp;lt;SlideContent&amp;gt;) =&amp;gt; {\\n    if (!content) return;\\n    const newSlides = [...content.slides];\\n    newSlides[index] = { ...newSlides[index], ...updates };\\n    const newContent = { ...content, slides: newSlides };\\n    setContent(newContent);\\n    pushToHistory(newContent);\\n    setHasChanges(true);\\n  };\\n\\n  const updateSlideSection = (slideIndex: number, sectionIndex: number, updates: Partial&amp;lt;NonNullable&amp;lt;SlideContent['sections']&amp;gt;[0]&amp;gt;) =&amp;gt; {\\n    if (!content) return;\\n    const newSlides = [...content.slides];\\n    const newSections = [...(newSlides[slideIndex].sections || [])];\\n    newSections[sectionIndex] = { ...newSections[sectionIndex], ...updates };\\n    newSlides[slideIndex] = { ...newSlides[slideIndex], sections: newSections };\\n    const newContent = { ...content, slides: newSlides };\\n    setContent(newContent);\\n    pushToHistory(newContent);\\n    setHasChanges(true);\\n  };\\n\\n  const updateSectionItems = (slideIndex: number, sectionIndex: number, items: string[]) =&amp;gt; {\\n    updateSlideSection(slideIndex, sectionIndex, { items });\\n  };\\n\\n  const addSectionItem = (slideIndex: number, sectionIndex: number) =&amp;gt; {\\n    if (!content) return;\\n    const currentItems = content.slides[slideIndex].sections?.[sectionIndex]?.items || [];\\n    updateSectionItems(slideIndex, sectionIndex, [...currentItems, '']);\\n  };\\n\\n  const removeSectionItem = (slideIndex: number, sectionIndex: number, itemIndex: number) =&amp;gt; {\\n    if (!content) return;\\n    const currentItems = content.slides[slideIndex].sections?.[sectionIndex]?.items || [];\\n    updateSectionItems(slideIndex, sectionIndex, currentItems.filter((_, i) =&amp;gt; i !== itemIndex));\\n  };\\n\\n  const updateAsk = (field: 'amount' | 'items', value: string | string[]) =&amp;gt; {\\n    if (!content) return;\\n    const newContent = { ...content, ask: { ...content.ask, [field]: value } };\\n    setContent(newContent);\\n    pushToHistory(newContent);\\n    setHasChanges(true);\\n  };\\n\\n  const toggleSlide = (slideId: string) =&amp;gt; {\\n    const newExpanded = new Set(expandedSlides);\\n    if (newExpanded.has(slideId)) {\\n      newExpanded.delete(slideId);\\n    } else {\\n      newExpanded.add(slideId);\\n    }\\n    setExpandedSlides(newExpanded);\\n  };\\n\\n  const updateSlideImage = (slideIndex: number, image: SlideImage | undefined) =&amp;gt; {\\n    if (!content) return;\\n    const newSlides = [...content.slides];\\n    newSlides[slideIndex] = { ...newSlides[slideIndex], image };\\n    const newContent = { ...content, slides: newSlides };\\n    setContent(newContent);\\n    pushToHistory(newContent);\\n    setHasChanges(true);\\n  };\\n\\n  const handleImageDrop = async (slideIndex: number, e: React.DragEvent&amp;lt;HTMLDivElement&amp;gt;) =&amp;gt; {\\n    e.preventDefault();\\n    const file = e.dataTransfer.files[0];\\n    if (!file || !file.type.startsWith('image/')) return;\\n    \\n    const reader = new FileReader();\\n    reader.onload = () =&amp;gt; {\\n      const currentImage = content?.slides[slideIndex]?.image;\\n      updateSlideImage(slideIndex, {\\n        ...currentImage,\\n        type: currentImage?.type || 'infographic',\\n        url: reader.result as string,\\n        placeholder: currentImage?.placeholder,\\n      });\\n    };\\n    reader.readAsDataURL(file);\\n  };\\n\\n  const handleImageUpload = async (slideIndex: number, e: React.ChangeEvent&amp;lt;HTMLInputElement&amp;gt;) =&amp;gt; {\\n    const file = e.target.files?.[0];\\n    if (!file || !file.type.startsWith('image/')) return;\\n    \\n    const reader = new FileReader();\\n    reader.onload = () =&amp;gt; {\\n      const currentImage = content?.slides[slideIndex]?.image;\\n      updateSlideImage(slideIndex, {\\n        ...currentImage,\\n        type: currentImage?.type || 'infographic',\\n        url: reader.result as string,\\n        placeholder: currentImage?.placeholder,\\n      });\\n    };\\n    reader.readAsDataURL(file);\\n  };\\n\\n  const removeSlideImage = (slideIndex: number) =&amp;gt; {\\n    if (!content) return;\\n    const currentImage = content.slides[slideIndex]?.image;\\n    if (currentImage) {\\n      updateSlideImage(slideIndex, { ...currentImage, url: undefined });\\n    }\\n  };\\n\\n  if (isLoading) {\\n    return (\\n      &amp;lt;div className=\\\"min-h-screen bg-gray-950 text-white flex items-center justify-center\\\"&amp;gt;\\n        &amp;lt;Loader2 className=\\\"w-8 h-8 animate-spin\\\" /&amp;gt;\\n      &amp;lt;/div&amp;gt;\\n    );\\n  }\\n\\n  if (!content) {\\n    return (\\n      &amp;lt;div className=\\\"min-h-screen bg-gray-950 text-white flex items-center justify-center\\\"&amp;gt;\\n        &amp;lt;p&amp;gt;Failed to load content&amp;lt;/p&amp;gt;\\n      &amp;lt;/div&amp;gt;\\n    );\\n  }\\n\\n  return (\\n    &amp;lt;div className=\\\"min-h-screen bg-gray-950 text-white\\\"&amp;gt;\\n      {/* Command Bar Modal */}\\n      {showCommandBar &amp;amp;&amp;amp; (\\n        &amp;lt;div className=\\\"fixed inset-0 z-50 flex items-start justify-center pt-32 bg-black/50\\\" onClick={() =&amp;gt; setShowCommandBar(false)}&amp;gt;\\n          &amp;lt;div \\n            className=\\\"w-full max-w-xl bg-gray-900 rounded-lg shadow-2xl border border-gray-700\\\"\\n            onClick={e =&amp;gt; e.stopPropagation()}\\n          &amp;gt;\\n            &amp;lt;div className=\\\"flex items-center gap-3 px-4 py-3 border-b border-gray-700\\\"&amp;gt;\\n              &amp;lt;Command className=\\\"w-5 h-5 text-gray-400\\\" /&amp;gt;\\n              &amp;lt;input\\n                ref={commandInputRef}\\n                type=\\\"text\\\"\\n                value={commandInput}\\n                onChange={e =&amp;gt; setCommandInput(e.target.value)}\\n                onKeyDown={e =&amp;gt; {\\n                  if (e.key === 'Enter') handleCommandSubmit();\\n                  if (e.key === 'Escape') setShowCommandBar(false);\\n                }}\\n                placeholder=\\\"Describe what you want to change... (e.g., 'add a slide about partnerships')\\\"\\n                className=\\\"flex-1 bg-transparent text-white placeholder-gray-500 outline-none\\\"\\n                autoFocus\\n              /&amp;gt;\\n            &amp;lt;/div&amp;gt;\\n            &amp;lt;div className=\\\"px-4 py-2 text-xs text-gray-500\\\"&amp;gt;\\n              Press Enter to submit • Escape to close\\n            &amp;lt;/div&amp;gt;\\n          &amp;lt;/div&amp;gt;\\n        &amp;lt;/div&amp;gt;\\n      )}\\n\\n      {/* Version History Panel */}\\n      {showHistory &amp;amp;&amp;amp; (\\n        &amp;lt;div className=\\\"fixed right-0 top-0 bottom-0 w-96 bg-gray-900 border-l border-gray-700 z-40 flex flex-col\\\"&amp;gt;\\n          &amp;lt;div className=\\\"flex items-center justify-between px-4 py-3 border-b border-gray-700\\\"&amp;gt;\\n            &amp;lt;h3 className=\\\"font-semibold flex items-center gap-2\\\"&amp;gt;\\n              &amp;lt;History className=\\\"w-4 h-4\\\" /&amp;gt;\\n              Version History\\n            &amp;lt;/h3&amp;gt;\\n            &amp;lt;button onClick={() =&amp;gt; { setShowHistory(false); setPreviewVersion(null); }} className=\\\"text-gray-400 hover:text-white\\\"&amp;gt;\\n              &amp;lt;X className=\\\"w-5 h-5\\\" /&amp;gt;\\n            &amp;lt;/button&amp;gt;\\n          &amp;lt;/div&amp;gt;\\n          \\n          {previewVersion ? (\\n            &amp;lt;div className=\\\"flex-1 overflow-auto p-4\\\"&amp;gt;\\n              &amp;lt;div className=\\\"mb-4 flex gap-2\\\"&amp;gt;\\n                &amp;lt;Button size=\\\"sm\\\" variant=\\\"outline\\\" onClick={() =&amp;gt; setPreviewVersion(null)} className=\\\"border-gray-600\\\"&amp;gt;\\n                  Back to List\\n                &amp;lt;/Button&amp;gt;\\n              &amp;lt;/div&amp;gt;\\n              &amp;lt;div className=\\\"bg-gray-800 rounded-lg p-4 text-sm\\\"&amp;gt;\\n                &amp;lt;h4 className=\\\"font-medium mb-2\\\"&amp;gt;Preview&amp;lt;/h4&amp;gt;\\n                &amp;lt;p className=\\\"text-gray-400 mb-2\\\"&amp;gt;Title: {previewVersion.cover.title}&amp;lt;/p&amp;gt;\\n                &amp;lt;p className=\\\"text-gray-400 mb-2\\\"&amp;gt;Slides: {previewVersion.slides.length}&amp;lt;/p&amp;gt;\\n                &amp;lt;p className=\\\"text-gray-400\\\"&amp;gt;Ask: {previewVersion.ask.amount}&amp;lt;/p&amp;gt;\\n              &amp;lt;/div&amp;gt;\\n            &amp;lt;/div&amp;gt;\\n          ) : (\\n            &amp;lt;div className=\\\"flex-1 overflow-auto\\\"&amp;gt;\\n              {isLoadingVersions ? (\\n                &amp;lt;div className=\\\"flex items-center justify-center py-8\\\"&amp;gt;\\n                  &amp;lt;Loader2 className=\\\"w-6 h-6 animate-spin\\\" /&amp;gt;\\n                &amp;lt;/div&amp;gt;\\n              ) : versions.length === 0 ? (\\n                &amp;lt;div className=\\\"text-center py-8 text-gray-500\\\"&amp;gt;\\n                  No saved versions yet\\n                &amp;lt;/div&amp;gt;\\n              ) : (\\n                &amp;lt;div className=\\\"divide-y divide-gray-800\\\"&amp;gt;\\n                  {versions.map(version =&amp;gt; (\\n                    &amp;lt;div key={version.id} className=\\\"p-4 hover:bg-gray-800/50\\\"&amp;gt;\\n                      &amp;lt;div className=\\\"flex items-start justify-between mb-2\\\"&amp;gt;\\n                        &amp;lt;div className=\\\"flex items-center gap-2 text-sm text-gray-400\\\"&amp;gt;\\n                          &amp;lt;Clock className=\\\"w-3 h-3\\\" /&amp;gt;\\n                          {new Date(version.createdAt).toLocaleString()}\\n                        &amp;lt;/div&amp;gt;\\n                        &amp;lt;span className=\\\"text-xs text-gray-500\\\"&amp;gt;#{version.id}&amp;lt;/span&amp;gt;\\n                      &amp;lt;/div&amp;gt;\\n                      &amp;lt;p className=\\\"text-sm mb-3\\\"&amp;gt;{version.description || 'No description'}&amp;lt;/p&amp;gt;\\n                      &amp;lt;div className=\\\"flex gap-2\\\"&amp;gt;\\n                        &amp;lt;Button \\n                          size=\\\"sm\\\" \\n                          variant=\\\"outline\\\" \\n                          className=\\\"text-xs border-gray-600\\\"\\n                          onClick={() =&amp;gt; previewVersionContent(version.id)}\\n                        &amp;gt;\\n                          &amp;lt;Eye className=\\\"w-3 h-3 mr-1\\\" /&amp;gt;\\n                          Preview\\n                        &amp;lt;/Button&amp;gt;\\n                        &amp;lt;Button \\n                          size=\\\"sm\\\" \\n                          variant=\\\"outline\\\"\\n                          className=\\\"text-xs border-gray-600\\\"\\n                          onClick={() =&amp;gt; restoreVersion(version.id)}\\n                        &amp;gt;\\n                          &amp;lt;RotateCw className=\\\"w-3 h-3 mr-1\\\" /&amp;gt;\\n                          Restore\\n                        &amp;lt;/Button&amp;gt;\\n                      &amp;lt;/div&amp;gt;\\n                    &amp;lt;/div&amp;gt;\\n                  ))}\\n                &amp;lt;/div&amp;gt;\\n              )}\\n            &amp;lt;/div&amp;gt;\\n          )}\\n        &amp;lt;/div&amp;gt;\\n      )}\\n\\n      {/* AI Chat Panel */}\\n      {showChat &amp;amp;&amp;amp; (\\n        &amp;lt;div className=\\\"fixed right-0 top-0 bottom-0 w-96 bg-gray-900 border-l border-gray-700 z-40 flex flex-col\\\"&amp;gt;\\n          &amp;lt;div className=\\\"flex items-center justify-between px-4 py-3 border-b border-gray-700\\\"&amp;gt;\\n            &amp;lt;h3 className=\\\"font-semibold flex items-center gap-2\\\"&amp;gt;\\n              &amp;lt;Sparkles className=\\\"w-4 h-4 text-purple-400\\\" /&amp;gt;\\n              AI Assistant\\n            &amp;lt;/h3&amp;gt;\\n            &amp;lt;button onClick={() =&amp;gt; setShowChat(false)} className=\\\"text-gray-400 hover:text-white\\\"&amp;gt;\\n              &amp;lt;X className=\\\"w-5 h-5\\\" /&amp;gt;\\n            &amp;lt;/button&amp;gt;\\n          &amp;lt;/div&amp;gt;\\n          \\n          &amp;lt;div className=\\\"flex-1 overflow-auto p-4 space-y-4\\\"&amp;gt;\\n            {chatMessages.length === 0 &amp;amp;&amp;amp; (\\n              &amp;lt;div className=\\\"text-center py-8 text-gray-500\\\"&amp;gt;\\n                &amp;lt;Sparkles className=\\\"w-8 h-8 mx-auto mb-3 text-purple-400/50\\\" /&amp;gt;\\n                &amp;lt;p className=\\\"mb-2\\\"&amp;gt;Ask me to edit your deck&amp;lt;/p&amp;gt;\\n                &amp;lt;p className=\\\"text-sm\\\"&amp;gt;Try: &amp;amp;quot;Add a slide about our team&amp;amp;quot; or &amp;amp;quot;Make the tagline more compelling&amp;amp;quot;&amp;lt;/p&amp;gt;\\n              &amp;lt;/div&amp;gt;\\n            )}\\n            \\n            {chatMessages.map(message =&amp;gt; (\\n              &amp;lt;div key={message.id} className={&amp;#96;flex ${message.role === 'user' ? 'justify-end' : 'justify-start'}&amp;#96;}&amp;gt;\\n                &amp;lt;div className={&amp;#96;max-w-[85%] rounded-lg px-3 py-2 ${\\n                  message.role === 'user' \\n                    ? 'bg-purple-600 text-white' \\n                    : 'bg-gray-800 text-gray-100'\\n                }&amp;#96;}&amp;gt;\\n                  &amp;lt;p className=\\\"text-sm whitespace-pre-wrap\\\"&amp;gt;{message.content}&amp;lt;/p&amp;gt;\\n                  \\n                  {message.proposedContent &amp;amp;&amp;amp; !message.applied &amp;amp;&amp;amp; (\\n                    &amp;lt;div className=\\\"mt-3 pt-2 border-t border-gray-700\\\"&amp;gt;\\n                      &amp;lt;Button\\n                        size=\\\"sm\\\"\\n                        onClick={() =&amp;gt; applyProposedChanges(message.id)}\\n                        className=\\\"bg-green-600 hover:bg-green-700 text-white text-xs\\\"\\n                      &amp;gt;\\n                        Apply Changes\\n                      &amp;lt;/Button&amp;gt;\\n                    &amp;lt;/div&amp;gt;\\n                  )}\\n                  \\n                  {message.applied &amp;amp;&amp;amp; (\\n                    &amp;lt;div className=\\\"mt-2 text-xs text-green-400 flex items-center gap-1\\\"&amp;gt;\\n                      &amp;lt;svg className=\\\"w-3 h-3\\\" fill=\\\"currentColor\\\" viewBox=\\\"0 0 20 20\\\"&amp;gt;\\n                        &amp;lt;path fillRule=\\\"evenodd\\\" d=\\\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\\\" clipRule=\\\"evenodd\\\" /&amp;gt;\\n                      &amp;lt;/svg&amp;gt;\\n                      Applied\\n                    &amp;lt;/div&amp;gt;\\n                  )}\\n                &amp;lt;/div&amp;gt;\\n              &amp;lt;/div&amp;gt;\\n            ))}\\n            \\n            {isAiLoading &amp;amp;&amp;amp; (\\n              &amp;lt;div className=\\\"flex justify-start\\\"&amp;gt;\\n                &amp;lt;div className=\\\"bg-gray-800 rounded-lg px-3 py-2\\\"&amp;gt;\\n                  &amp;lt;Loader2 className=\\\"w-4 h-4 animate-spin text-purple-400\\\" /&amp;gt;\\n                &amp;lt;/div&amp;gt;\\n              &amp;lt;/div&amp;gt;\\n            )}\\n            \\n            &amp;lt;div ref={chatEndRef} /&amp;gt;\\n          &amp;lt;/div&amp;gt;\\n          \\n          &amp;lt;div className=\\\"p-4 border-t border-gray-700\\\"&amp;gt;\\n            &amp;lt;div className=\\\"flex gap-2\\\"&amp;gt;\\n              &amp;lt;input\\n                type=\\\"text\\\"\\n                value={chatInput}\\n                onChange={e =&amp;gt; setChatInput(e.target.value)}\\n                onKeyDown={e =&amp;gt; {\\n                  if (e.key === 'Enter' &amp;amp;&amp;amp; !e.shiftKey) {\\n                    e.preventDefault();\\n                    sendChatMessage(chatInput);\\n                  }\\n                }}\\n                placeholder=\\\"Describe your changes...\\\"\\n                className=\\\"flex-1 bg-gray-800 border border-gray-700 rounded px-3 py-2 text-sm text-white placeholder-gray-500\\\"\\n                disabled={isAiLoading}\\n              /&amp;gt;\\n              &amp;lt;Button\\n                size=\\\"sm\\\"\\n                onClick={() =&amp;gt; sendChatMessage(chatInput)}\\n                disabled={!chatInput.trim() || isAiLoading}\\n                className=\\\"bg-purple-600 hover:bg-purple-700\\\"\\n              &amp;gt;\\n                &amp;lt;Send className=\\\"w-4 h-4\\\" /&amp;gt;\\n              &amp;lt;/Button&amp;gt;\\n            &amp;lt;/div&amp;gt;\\n          &amp;lt;/div&amp;gt;\\n        &amp;lt;/div&amp;gt;\\n      )}\\n\\n      {/* Header */}\\n      &amp;lt;div className=\\\"sticky top-0 z-10 bg-gray-900 border-b border-gray-800\\\"&amp;gt;\\n        &amp;lt;div className=\\\"container px-4 py-4 flex items-center justify-between\\\"&amp;gt;\\n          &amp;lt;div className=\\\"flex items-center gap-4\\\"&amp;gt;\\n            &amp;lt;Link href=\\\"/admin\\\" className=\\\"text-gray-400 hover:text-white\\\"&amp;gt;\\n              &amp;lt;ArrowLeft className=\\\"w-5 h-5\\\" /&amp;gt;\\n            &amp;lt;/Link&amp;gt;\\n            &amp;lt;h1 className=\\\"text-xl font-bold\\\"&amp;gt;Edit Pitch Deck&amp;lt;/h1&amp;gt;\\n            {hasChanges &amp;amp;&amp;amp; (\\n              &amp;lt;span className=\\\"text-xs bg-yellow-600 px-2 py-1 rounded\\\"&amp;gt;Unsaved changes&amp;lt;/span&amp;gt;\\n            )}\\n          &amp;lt;/div&amp;gt;\\n          \\n          &amp;lt;div className=\\\"flex items-center gap-2\\\"&amp;gt;\\n            &amp;lt;Button\\n              onClick={undo}\\n              disabled={!canUndo}\\n              variant=\\\"outline\\\"\\n              size=\\\"sm\\\"\\n              className=\\\"border-gray-700 text-gray-300 disabled:opacity-30\\\"\\n              title=\\\"Undo (Cmd+Z)\\\"\\n            &amp;gt;\\n              &amp;lt;Undo2 className=\\\"w-4 h-4\\\" /&amp;gt;\\n            &amp;lt;/Button&amp;gt;\\n            &amp;lt;Button\\n              onClick={redo}\\n              disabled={!canRedo}\\n              variant=\\\"outline\\\"\\n              size=\\\"sm\\\"\\n              className=\\\"border-gray-700 text-gray-300 disabled:opacity-30\\\"\\n              title=\\\"Redo (Cmd+Shift+Z)\\\"\\n            &amp;gt;\\n              &amp;lt;Redo2 className=\\\"w-4 h-4\\\" /&amp;gt;\\n            &amp;lt;/Button&amp;gt;\\n            &amp;lt;div className=\\\"w-px h-6 bg-gray-700 mx-1\\\" /&amp;gt;\\n            &amp;lt;Button\\n              onClick={() =&amp;gt; { setShowHistory(true); fetchVersions(); }}\\n              variant=\\\"outline\\\"\\n              size=\\\"sm\\\"\\n              className=\\\"border-gray-700 text-gray-300\\\"\\n              title=\\\"Version History\\\"\\n            &amp;gt;\\n              &amp;lt;History className=\\\"w-4 h-4\\\" /&amp;gt;\\n            &amp;lt;/Button&amp;gt;\\n            &amp;lt;Button\\n              onClick={() =&amp;gt; setShowChat(true)}\\n              variant=\\\"outline\\\"\\n              size=\\\"sm\\\"\\n              className=\\\"border-gray-700 text-gray-300\\\"\\n              title=\\\"AI Assistant\\\"\\n            &amp;gt;\\n              &amp;lt;Sparkles className=\\\"w-4 h-4\\\" /&amp;gt;\\n            &amp;lt;/Button&amp;gt;\\n            &amp;lt;Button\\n              onClick={() =&amp;gt; setShowCommandBar(true)}\\n              variant=\\\"outline\\\"\\n              size=\\\"sm\\\"\\n              className=\\\"border-gray-700 text-gray-300\\\"\\n              title=\\\"Quick Command (Cmd+K)\\\"\\n            &amp;gt;\\n              &amp;lt;Command className=\\\"w-4 h-4\\\" /&amp;gt;\\n            &amp;lt;/Button&amp;gt;\\n            &amp;lt;div className=\\\"w-px h-6 bg-gray-700 mx-1\\\" /&amp;gt;\\n            &amp;lt;Button\\n              onClick={resetContent}\\n              variant=\\\"outline\\\"\\n              size=\\\"sm\\\"\\n              className=\\\"border-gray-700 text-gray-300\\\"\\n            &amp;gt;\\n              &amp;lt;RotateCcw className=\\\"w-4 h-4 mr-2\\\" /&amp;gt;\\n              Reset\\n            &amp;lt;/Button&amp;gt;\\n            &amp;lt;Link href=\\\"/deck\\\" target=\\\"_blank\\\"&amp;gt;\\n              &amp;lt;Button variant=\\\"outline\\\" size=\\\"sm\\\" className=\\\"border-gray-700 text-gray-300\\\"&amp;gt;\\n                &amp;lt;Eye className=\\\"w-4 h-4 mr-2\\\" /&amp;gt;\\n                Preview\\n              &amp;lt;/Button&amp;gt;\\n            &amp;lt;/Link&amp;gt;\\n            &amp;lt;Button\\n              onClick={() =&amp;gt; saveContent()}\\n              disabled={isSaving || !hasChanges}\\n              size=\\\"sm\\\"\\n              className=\\\"bg-white text-black hover:bg-gray-200\\\"\\n            &amp;gt;\\n              {isSaving ? &amp;lt;Loader2 className=\\\"w-4 h-4 mr-2 animate-spin\\\" /&amp;gt; : &amp;lt;Save className=\\\"w-4 h-4 mr-2\\\" /&amp;gt;}\\n              Save\\n            &amp;lt;/Button&amp;gt;\\n          &amp;lt;/div&amp;gt;\\n        &amp;lt;/div&amp;gt;\\n      &amp;lt;/div&amp;gt;\\n\\n      &amp;lt;div className={&amp;#96;container px-4 py-8 max-w-4xl transition-all ${showChat || showHistory ? 'mr-96' : ''}&amp;#96;}&amp;gt;\\n        {/* Cover Section */}\\n        &amp;lt;section className=\\\"mb-8\\\"&amp;gt;\\n          &amp;lt;h2 className=\\\"text-lg font-semibold mb-4 text-gray-300\\\"&amp;gt;Slides&amp;lt;/h2&amp;gt;\\n          &amp;lt;div className=\\\"bg-gray-900 rounded-lg overflow-hidden mb-2\\\"&amp;gt;\\n            &amp;lt;button\\n              onClick={() =&amp;gt; toggleSlide('cover')}\\n              className=\\\"w-full px-4 py-3 flex items-center justify-between hover:bg-gray-800 transition-colors\\\"\\n            &amp;gt;\\n              &amp;lt;span className=\\\"font-medium\\\"&amp;gt;1. Cover Slide&amp;lt;/span&amp;gt;\\n              {expandedSlides.has('cover') ? (\\n                &amp;lt;ChevronDown className=\\\"w-5 h-5 text-gray-400\\\" /&amp;gt;\\n              ) : (\\n                &amp;lt;ChevronRight className=\\\"w-5 h-5 text-gray-400\\\" /&amp;gt;\\n              )}\\n            &amp;lt;/button&amp;gt;\\n            \\n            {expandedSlides.has('cover') &amp;amp;&amp;amp; (\\n              &amp;lt;div className=\\\"px-4 pb-4 space-y-4 border-t border-gray-800\\\"&amp;gt;\\n                &amp;lt;div className=\\\"pt-4\\\"&amp;gt;\\n                  &amp;lt;label className=\\\"block text-sm text-gray-400 mb-1\\\"&amp;gt;Title&amp;lt;/label&amp;gt;\\n                  &amp;lt;input\\n                    type=\\\"text\\\"\\n                    value={content.cover.title}\\n                    onChange={(e) =&amp;gt; updateCover('title', e.target.value)}\\n                    className=\\\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\\\"\\n                  /&amp;gt;\\n                &amp;lt;/div&amp;gt;\\n                &amp;lt;div&amp;gt;\\n                  &amp;lt;label className=\\\"block text-sm text-gray-400 mb-1\\\"&amp;gt;Tagline&amp;lt;/label&amp;gt;\\n                  &amp;lt;textarea\\n                    value={content.cover.tagline}\\n                    onChange={(e) =&amp;gt; updateCover('tagline', e.target.value)}\\n                    rows={2}\\n                    className=\\\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\\\"\\n                  /&amp;gt;\\n                &amp;lt;/div&amp;gt;\\n                &amp;lt;div&amp;gt;\\n                  &amp;lt;label className=\\\"block text-sm text-gray-400 mb-1\\\"&amp;gt;Subtagline&amp;lt;/label&amp;gt;\\n                  &amp;lt;input\\n                    type=\\\"text\\\"\\n                    value={content.cover.subtagline}\\n                    onChange={(e) =&amp;gt; updateCover('subtagline', e.target.value)}\\n                    className=\\\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\\\"\\n                  /&amp;gt;\\n                &amp;lt;/div&amp;gt;\\n                &amp;lt;div&amp;gt;\\n                  &amp;lt;label className=\\\"block text-sm text-gray-400 mb-1\\\"&amp;gt;URL&amp;lt;/label&amp;gt;\\n                  &amp;lt;input\\n                    type=\\\"text\\\"\\n                    value={content.cover.url}\\n                    onChange={(e) =&amp;gt; updateCover('url', e.target.value)}\\n                    className=\\\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\\\"\\n                  /&amp;gt;\\n                &amp;lt;/div&amp;gt;\\n              &amp;lt;/div&amp;gt;\\n            )}\\n          &amp;lt;/div&amp;gt;\\n\\n          {content.slides.map((slide, slideIndex) =&amp;gt; (\\n              &amp;lt;div key={slide.id} className=\\\"bg-gray-900 rounded-lg overflow-hidden mb-2\\\"&amp;gt;\\n                &amp;lt;button\\n                  onClick={() =&amp;gt; toggleSlide(slide.id)}\\n                  className=\\\"w-full px-4 py-3 flex items-center justify-between hover:bg-gray-800 transition-colors\\\"\\n                &amp;gt;\\n                  &amp;lt;span className=\\\"font-medium\\\"&amp;gt;\\n                    {slideIndex + 2}. {slide.title}\\n                  &amp;lt;/span&amp;gt;\\n                  {expandedSlides.has(slide.id) ? (\\n                    &amp;lt;ChevronDown className=\\\"w-5 h-5 text-gray-400\\\" /&amp;gt;\\n                  ) : (\\n                    &amp;lt;ChevronRight className=\\\"w-5 h-5 text-gray-400\\\" /&amp;gt;\\n                  )}\\n                &amp;lt;/button&amp;gt;\\n                \\n                {expandedSlides.has(slide.id) &amp;amp;&amp;amp; (\\n                  &amp;lt;div className=\\\"px-4 pb-4 space-y-4 border-t border-gray-800\\\"&amp;gt;\\n                    &amp;lt;div className=\\\"pt-4\\\"&amp;gt;\\n                      &amp;lt;label className=\\\"block text-sm text-gray-400 mb-1\\\"&amp;gt;Title&amp;lt;/label&amp;gt;\\n                      &amp;lt;input\\n                        type=\\\"text\\\"\\n                        value={slide.title}\\n                        onChange={(e) =&amp;gt; updateSlide(slideIndex, { title: e.target.value })}\\n                        className=\\\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\\\"\\n                      /&amp;gt;\\n                    &amp;lt;/div&amp;gt;\\n                    \\n                    &amp;lt;div&amp;gt;\\n                      &amp;lt;label className=\\\"block text-sm text-gray-400 mb-1\\\"&amp;gt;Subtitle&amp;lt;/label&amp;gt;\\n                      &amp;lt;input\\n                        type=\\\"text\\\"\\n                        value={slide.subtitle || ''}\\n                        onChange={(e) =&amp;gt; updateSlide(slideIndex, { subtitle: e.target.value })}\\n                        className=\\\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\\\"\\n                      /&amp;gt;\\n                    &amp;lt;/div&amp;gt;\\n\\n                    {/* Sections */}\\n                    {slide.sections?.map((section, sectionIndex) =&amp;gt; (\\n                      &amp;lt;div key={sectionIndex} className=\\\"bg-gray-800 rounded p-3 space-y-3\\\"&amp;gt;\\n                        &amp;lt;div&amp;gt;\\n                          &amp;lt;label className=\\\"block text-xs text-gray-500 mb-1\\\"&amp;gt;Section Heading&amp;lt;/label&amp;gt;\\n                          &amp;lt;input\\n                            type=\\\"text\\\"\\n                            value={section.heading || ''}\\n                            onChange={(e) =&amp;gt; updateSlideSection(slideIndex, sectionIndex, { heading: e.target.value })}\\n                            className=\\\"w-full bg-gray-700 border border-gray-600 rounded px-2 py-1 text-sm text-white\\\"\\n                          /&amp;gt;\\n                        &amp;lt;/div&amp;gt;\\n                        \\n                        {section.text !== undefined &amp;amp;&amp;amp; (\\n                          &amp;lt;div&amp;gt;\\n                            &amp;lt;label className=\\\"block text-xs text-gray-500 mb-1\\\"&amp;gt;Text&amp;lt;/label&amp;gt;\\n                            &amp;lt;textarea\\n                              value={section.text}\\n                              onChange={(e) =&amp;gt; updateSlideSection(slideIndex, sectionIndex, { text: e.target.value })}\\n                              rows={2}\\n                              className=\\\"w-full bg-gray-700 border border-gray-600 rounded px-2 py-1 text-sm text-white\\\"\\n                            /&amp;gt;\\n                          &amp;lt;/div&amp;gt;\\n                        )}\\n                        \\n                        {section.items &amp;amp;&amp;amp; (\\n                          &amp;lt;div&amp;gt;\\n                            &amp;lt;label className=\\\"block text-xs text-gray-500 mb-1\\\"&amp;gt;Bullet Points&amp;lt;/label&amp;gt;\\n                            {section.items.map((item, itemIndex) =&amp;gt; (\\n                              &amp;lt;div key={itemIndex} className=\\\"flex gap-2 mb-1\\\"&amp;gt;\\n                                &amp;lt;input\\n                                  type=\\\"text\\\"\\n                                  value={item}\\n                                  onChange={(e) =&amp;gt; {\\n                                    const newItems = [...section.items!];\\n                                    newItems[itemIndex] = e.target.value;\\n                                    updateSectionItems(slideIndex, sectionIndex, newItems);\\n                                  }}\\n                                  className=\\\"flex-1 bg-gray-700 border border-gray-600 rounded px-2 py-1 text-sm text-white\\\"\\n                                /&amp;gt;\\n                                &amp;lt;button\\n                                  onClick={() =&amp;gt; removeSectionItem(slideIndex, sectionIndex, itemIndex)}\\n                                  className=\\\"text-red-400 hover:text-red-300 p-1\\\"\\n                                &amp;gt;\\n                                  &amp;lt;Trash2 className=\\\"w-4 h-4\\\" /&amp;gt;\\n                                &amp;lt;/button&amp;gt;\\n                              &amp;lt;/div&amp;gt;\\n                            ))}\\n                            &amp;lt;button\\n                              onClick={() =&amp;gt; addSectionItem(slideIndex, sectionIndex)}\\n                              className=\\\"text-xs text-gray-400 hover:text-white flex items-center gap-1 mt-1\\\"\\n                            &amp;gt;\\n                              &amp;lt;Plus className=\\\"w-3 h-3\\\" /&amp;gt; Add item\\n                            &amp;lt;/button&amp;gt;\\n                          &amp;lt;/div&amp;gt;\\n                        )}\\n                      &amp;lt;/div&amp;gt;\\n                    ))}\\n\\n                    {slide.highlight &amp;amp;&amp;amp; (\\n                      &amp;lt;div&amp;gt;\\n                        &amp;lt;label className=\\\"block text-sm text-gray-400 mb-1\\\"&amp;gt;Highlight Box&amp;lt;/label&amp;gt;\\n                        &amp;lt;textarea\\n                          value={slide.highlight}\\n                          onChange={(e) =&amp;gt; updateSlide(slideIndex, { highlight: e.target.value })}\\n                          rows={2}\\n                          className=\\\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\\\"\\n                        /&amp;gt;\\n                      &amp;lt;/div&amp;gt;\\n                    )}\\n\\n                    {slide.footnote &amp;amp;&amp;amp; (\\n                      &amp;lt;div&amp;gt;\\n                        &amp;lt;label className=\\\"block text-sm text-gray-400 mb-1\\\"&amp;gt;Footnote&amp;lt;/label&amp;gt;\\n                        &amp;lt;input\\n                          type=\\\"text\\\"\\n                          value={slide.footnote}\\n                          onChange={(e) =&amp;gt; updateSlide(slideIndex, { footnote: e.target.value })}\\n                          className=\\\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\\\"\\n                        /&amp;gt;\\n                      &amp;lt;/div&amp;gt;\\n                    )}\\n\\n                    {/* Image Section */}\\n                    &amp;lt;div className=\\\"border-t border-gray-700 pt-4 mt-4\\\"&amp;gt;\\n                      &amp;lt;label className=\\\"block text-sm text-gray-400 mb-2\\\"&amp;gt;Slide Image&amp;lt;/label&amp;gt;\\n                      \\n                      {slide.image?.url ? (\\n                        &amp;lt;div className=\\\"relative\\\"&amp;gt;\\n                          &amp;lt;div className=\\\"relative w-full h-48 bg-gray-800 rounded-lg overflow-hidden\\\"&amp;gt;\\n                            &amp;lt;img\\n                              src={slide.image.url}\\n                              alt={slide.image.placeholder || 'Slide image'}\\n                              className=\\\"w-full h-full object-contain\\\"\\n                            /&amp;gt;\\n                          &amp;lt;/div&amp;gt;\\n                          &amp;lt;button\\n                            onClick={() =&amp;gt; removeSlideImage(slideIndex)}\\n                            className=\\\"absolute top-2 right-2 bg-red-600 hover:bg-red-700 text-white p-1 rounded\\\"\\n                          &amp;gt;\\n                            &amp;lt;Trash2 className=\\\"w-4 h-4\\\" /&amp;gt;\\n                          &amp;lt;/button&amp;gt;\\n                          &amp;lt;p className=\\\"text-xs text-gray-500 mt-1\\\"&amp;gt;{slide.image.placeholder}&amp;lt;/p&amp;gt;\\n                        &amp;lt;/div&amp;gt;\\n                      ) : (\\n                        &amp;lt;div\\n                          onDrop={(e) =&amp;gt; handleImageDrop(slideIndex, e)}\\n                          onDragOver={(e) =&amp;gt; e.preventDefault()}\\n                          className=\\\"border-2 border-dashed border-gray-600 rounded-lg p-6 text-center hover:border-gray-500 transition-colors\\\"\\n                        &amp;gt;\\n                          &amp;lt;ImageIcon className=\\\"w-12 h-12 mx-auto text-gray-500 mb-3\\\" /&amp;gt;\\n                          &amp;lt;p className=\\\"text-sm text-gray-400 mb-2\\\"&amp;gt;\\n                            {slide.image?.placeholder || 'Drag &amp;amp; drop image here'}\\n                          &amp;lt;/p&amp;gt;\\n                          &amp;lt;p className=\\\"text-xs text-gray-500 mb-3\\\"&amp;gt;\\n                            Type: {slide.image?.type || 'Not set'}\\n                          &amp;lt;/p&amp;gt;\\n                          &amp;lt;label className=\\\"cursor-pointer\\\"&amp;gt;\\n                            &amp;lt;span className=\\\"inline-flex items-center gap-2 px-3 py-1.5 bg-gray-700 hover:bg-gray-600 rounded text-sm text-white\\\"&amp;gt;\\n                              &amp;lt;Upload className=\\\"w-4 h-4\\\" /&amp;gt;\\n                              Upload Image\\n                            &amp;lt;/span&amp;gt;\\n                            &amp;lt;input\\n                              type=\\\"file\\\"\\n                              accept=\\\"image/*\\\"\\n                              onChange={(e) =&amp;gt; handleImageUpload(slideIndex, e)}\\n                              className=\\\"hidden\\\"\\n                            /&amp;gt;\\n                          &amp;lt;/label&amp;gt;\\n                        &amp;lt;/div&amp;gt;\\n                      )}\\n                      \\n                      &amp;lt;div className=\\\"mt-2\\\"&amp;gt;\\n                        &amp;lt;label className=\\\"block text-xs text-gray-500 mb-1\\\"&amp;gt;Image Description (for AI generation)&amp;lt;/label&amp;gt;\\n                        &amp;lt;input\\n                          type=\\\"text\\\"\\n                          value={slide.image?.placeholder || ''}\\n                          onChange={(e) =&amp;gt; updateSlideImage(slideIndex, {\\n                            ...slide.image,\\n                            type: slide.image?.type || 'infographic',\\n                            placeholder: e.target.value,\\n                          })}\\n                          placeholder=\\\"Describe the image you want...\\\"\\n                          className=\\\"w-full bg-gray-700 border border-gray-600 rounded px-2 py-1 text-sm text-white\\\"\\n                        /&amp;gt;\\n                      &amp;lt;/div&amp;gt;\\n                      \\n                      &amp;lt;div className=\\\"mt-2\\\"&amp;gt;\\n                        &amp;lt;label className=\\\"block text-xs text-gray-500 mb-1\\\"&amp;gt;Image Type&amp;lt;/label&amp;gt;\\n                        &amp;lt;select\\n                          value={slide.image?.type || 'infographic'}\\n                          onChange={(e) =&amp;gt; updateSlideImage(slideIndex, {\\n                            ...slide.image,\\n                            type: e.target.value as SlideImage['type'],\\n                            placeholder: slide.image?.placeholder,\\n                          })}\\n                          className=\\\"w-full bg-gray-700 border border-gray-600 rounded px-2 py-1 text-sm text-white\\\"\\n                        &amp;gt;\\n                          &amp;lt;option value=\\\"icon\\\"&amp;gt;Icon&amp;lt;/option&amp;gt;\\n                          &amp;lt;option value=\\\"chart\\\"&amp;gt;Chart&amp;lt;/option&amp;gt;\\n                          &amp;lt;option value=\\\"mockup\\\"&amp;gt;Mockup&amp;lt;/option&amp;gt;\\n                          &amp;lt;option value=\\\"infographic\\\"&amp;gt;Infographic&amp;lt;/option&amp;gt;\\n                          &amp;lt;option value=\\\"photo\\\"&amp;gt;Photo&amp;lt;/option&amp;gt;\\n                          &amp;lt;option value=\\\"diagram\\\"&amp;gt;Diagram&amp;lt;/option&amp;gt;\\n                        &amp;lt;/select&amp;gt;\\n                      &amp;lt;/div&amp;gt;\\n                    &amp;lt;/div&amp;gt;\\n                  &amp;lt;/div&amp;gt;\\n                )}\\n              &amp;lt;/div&amp;gt;\\n            ))}\\n        &amp;lt;/section&amp;gt;\\n\\n        {/* Ask Section */}\\n        &amp;lt;section className=\\\"mb-8\\\"&amp;gt;\\n          &amp;lt;h2 className=\\\"text-lg font-semibold mb-4 text-gray-300\\\"&amp;gt;The Ask&amp;lt;/h2&amp;gt;\\n          &amp;lt;div className=\\\"bg-gray-900 rounded-lg p-4 space-y-4\\\"&amp;gt;\\n            &amp;lt;div&amp;gt;\\n              &amp;lt;label className=\\\"block text-sm text-gray-400 mb-1\\\"&amp;gt;Amount&amp;lt;/label&amp;gt;\\n              &amp;lt;input\\n                type=\\\"text\\\"\\n                value={content.ask.amount}\\n                onChange={(e) =&amp;gt; updateAsk('amount', e.target.value)}\\n                className=\\\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\\\"\\n              /&amp;gt;\\n            &amp;lt;/div&amp;gt;\\n            &amp;lt;div&amp;gt;\\n              &amp;lt;label className=\\\"block text-sm text-gray-400 mb-1\\\"&amp;gt;What we&amp;amp;apos;ll do with the funding&amp;lt;/label&amp;gt;\\n              {content.ask.items.map((item, index) =&amp;gt; (\\n                &amp;lt;div key={index} className=\\\"flex gap-2 mb-2\\\"&amp;gt;\\n                  &amp;lt;input\\n                    type=\\\"text\\\"\\n                    value={item}\\n                    onChange={(e) =&amp;gt; {\\n                      const newItems = [...content.ask.items];\\n                      newItems[index] = e.target.value;\\n                      updateAsk('items', newItems);\\n                    }}\\n                    className=\\\"flex-1 bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\\\"\\n                  /&amp;gt;\\n                  &amp;lt;button\\n                    onClick={() =&amp;gt; {\\n                      const newItems = content.ask.items.filter((_, i) =&amp;gt; i !== index);\\n                      updateAsk('items', newItems);\\n                    }}\\n                    className=\\\"text-red-400 hover:text-red-300 p-2\\\"\\n                  &amp;gt;\\n                    &amp;lt;Trash2 className=\\\"w-4 h-4\\\" /&amp;gt;\\n                  &amp;lt;/button&amp;gt;\\n                &amp;lt;/div&amp;gt;\\n              ))}\\n              &amp;lt;button\\n                onClick={() =&amp;gt; updateAsk('items', [...content.ask.items, ''])}\\n                className=\\\"text-sm text-gray-400 hover:text-white flex items-center gap-1\\\"\\n              &amp;gt;\\n                &amp;lt;Plus className=\\\"w-4 h-4\\\" /&amp;gt; Add item\\n              &amp;lt;/button&amp;gt;\\n            &amp;lt;/div&amp;gt;\\n          &amp;lt;/div&amp;gt;\\n        &amp;lt;/section&amp;gt;\\n      &amp;lt;/div&amp;gt;\\n    &amp;lt;/div&amp;gt;\\n  );\\n}\\n\","
                }
              ]
            },
            {
              "file": "./app/page.tsx",
              "matches": [
                {
                  "lineNumber": 6,
                  "content": "import { getDeckContent } from \"@/lib/deck-content\";"
                }
              ]
            },
            {
              "file": "./.specstory/history/2025-12-11_01-22Z-research-and-calculate-startup-market-potential.md",
              "matches": [
                {
                  "lineNumber": 2262,
                  "content": "  \"contents\": \"import React from 'react';\\nimport { Document, View, Text } from '@react-pdf/renderer';\\nimport { StyleSheet } from '@react-pdf/renderer';\\nimport { colors, fonts, fontSize, spacing } from './pdf-styles';\\nimport {\\n  Slide,\\n  Title,\\n  Heading,\\n  BulletList,\\n  Card,\\n  TwoColumn,\\n  BorderedSection,\\n  IconUsers,\\n  IconShield,\\n  IconBot,\\n  IconBox,\\n  TeamMember,\\n} from './pdf-components';\\nimport {\\n  EconomicsChart,\\n  ScalingDiagram,\\n  RoadmapTimeline,\\n  AgentWorkflowDiagram,\\n} from './pdf-charts';\\nimport {\\n  DirectorOSOverview,\\n} from './pdf-mockups';\\nimport { getDeckContent, DeckContent, SlideContent } from '@/lib/deck-content';\\n\\nconst localStyles = StyleSheet.create({\\n  coverCenter: {\\n    flex: 1,\\n    alignItems: 'center',\\n    justifyContent: 'center',\\n  },\\n  coverTitle: {\\n    fontFamily: fonts.heading,\\n    fontSize: 56,\\n    color: colors.white,\\n    marginBottom: spacing.md,\\n  },\\n  coverTagline: {\\n    fontFamily: fonts.body,\\n    fontSize: fontSize.subtitle,\\n    color: colors.gray[300],\\n    textAlign: 'center',\\n    maxWidth: 700,\\n    lineHeight: 1.4,\\n  },\\n  coverSubtagline: {\\n    fontFamily: fonts.body,\\n    fontSize: fontSize.body,\\n    color: colors.gray[400],\\n    textAlign: 'center',\\n    marginTop: spacing.md,\\n  },\\n  coverUrl: {\\n    fontFamily: fonts.body,\\n    fontSize: fontSize.body,\\n    color: colors.gray[500],\\n    marginTop: spacing.xxl,\\n  },\\n  contentArea: {\\n    flex: 1,\\n  },\\n  highlightBox: {\\n    backgroundColor: colors.gray[800],\\n    padding: spacing.md,\\n    borderRadius: 6,\\n    marginTop: spacing.md,\\n  },\\n  highlightText: {\\n    fontFamily: fonts.heading,\\n    fontSize: fontSize.body,\\n    color: colors.white,\\n    textAlign: 'center',\\n  },\\n  askBox: {\\n    backgroundColor: colors.gray[800],\\n    borderWidth: 2,\\n    borderColor: colors.white,\\n    padding: spacing.lg,\\n    borderRadius: 6,\\n    marginTop: spacing.md,\\n  },\\n  askTitle: {\\n    fontFamily: fonts.heading,\\n    fontSize: fontSize.heading,\\n    color: colors.white,\\n    marginBottom: spacing.sm,\\n  },\\n  askAmount: {\\n    fontFamily: fonts.heading,\\n    fontSize: 32,\\n    color: colors.white,\\n    marginBottom: spacing.sm,\\n  },\\n  sectionLabel: {\\n    fontFamily: fonts.body,\\n    fontSize: fontSize.tiny,\","
                }
              ]
            },
            {
              "file": "./.specstory/history/2025-12-11_01-19Z-discuss-hiiiwav-fiscal-sponsorship-and-conflicts.md",
              "matches": [
                {
                  "lineNumber": 1008,
                  "content": "                  \"content\": \"import { getDeckContent, DeckContent } from '@/lib/deck-content';\""
                },
                {
                  "lineNumber": 1141,
                  "content": "                  \"content\": \"  \\\"contents\\\": \\\"import { openai } from '@ai-sdk/openai';\\\\nimport { generateText } from 'ai';\\\\nimport { NextResponse } from 'next/server';\\\\nimport { getDeckContent, DeckContent } from '@/lib/deck-content';\\\\n\\\\nconst SYSTEM_PROMPT = &amp;amp;#96;You are an AI assistant that helps edit pitch deck content. You receive the current deck content as JSON and a user instruction describing what changes to make.\\\\n\\\\nYour job is to:\\\\n1. Understand the user's request\\\\n2. Return the modified deck content as valid JSON\\\\n3. Provide a brief description of what you changed\\\\n\\\\nThe deck structure has:\\\\n- cover: { title, tagline, subtagline, url }\\\\n- slides: array of slides, each with { id, title, subtitle?, sections?, highlight?, footnote?, image? }\\\\n- ask: { amount, items[] }\\\\n\\\\nEach slide section has: { heading?, items[]?, text? }\\\\nEach slide image has: { type, placeholder, url? }\\\\n\\\\nIMPORTANT RULES:\\\\n- Return ONLY valid JSON in your response\\\\n- Preserve the existing structure and IDs unless explicitly asked to change them\\\\n- When adding a new slide, generate a unique kebab-case id\\\\n- Keep the same formatting style as the existing content\\\\n- Be concise in titles and bullet points\\\\n\\\\nRespond with a JSON object in this exact format:\\\\n{\\\\n  \\\\\\\"success\\\\\\\": true,\\\\n  \\\\\\\"content\\\\\\\": { ...the full updated deck content... },\\\\n  \\\\\\\"description\\\\\\\": \\\\\\\"Brief description of changes made\\\\\\\",\\\\n  \\\\\\\"changes\\\\\\\": [\\\\\\\"List of specific changes made\\\\\\\"]\\\\n}\\\\n\\\\nIf the request is unclear or cannot be fulfilled, respond with:\\\\n{\\\\n  \\\\\\\"success\\\\\\\": false,\\\\n  \\\\\\\"error\\\\\\\": \\\\\\\"Explanation of why the request cannot be fulfilled\\\\\\\"\\\\n}&amp;amp;#96;;\\\\n\\\\nexport async function POST(request: Request) {\\\\n  try {\\\\n    const { instruction, currentContent } = await request.json();\\\\n\\\\n    if (!instruction) {\\\\n      return NextResponse.json({ error: 'Instruction is required' }, { status: 400 });\\\\n    }\\\\n\\\\n    // Get current content if not provided\\\\n    const deckContent = currentContent || getDeckContent();\\\\n\\\\n    const { text } = await generateText({\\\\n      model: openai('gpt-4o'),\\\\n      system: SYSTEM_PROMPT,\\\\n      prompt: &amp;amp;#96;Current deck content:\\\\n\\\\\\\\&amp;amp;#96;\\\\\\\\&amp;amp;#96;\\\\\\\\&amp;amp;#96;json\\\\n${JSON.stringify(deckContent, null, 2)}\\\\n\\\\\\\\&amp;amp;#96;\\\\\\\\&amp;amp;#96;\\\\\\\\&amp;amp;#96;\\\\n\\\\nUser instruction: ${instruction}\\\\n\\\\nPlease provide the updated deck content as JSON.&amp;amp;#96;,\\\\n      maxTokens: 8000,\\\\n    });\\\\n\\\\n    // Parse the AI response\\\\n    let result;\\\\n    try {\\\\n      // Try to extract JSON from the response\\\\n      const jsonMatch = text.match(/\\\\\\\\{[\\\\\\\\s\\\\\\\\S]*\\\\\\\\}/);\\\\n      if (jsonMatch) {\\\\n        result = JSON.parse(jsonMatch[0]);\\\\n      } else {\\\\n        throw new Error('No JSON found in response');\\\\n      }\\\\n    } catch (parseError) {\\\\n      console.error('Failed to parse AI response:', text);\\\\n      return NextResponse.json({\\\\n        success: false,\\\\n        error: 'Failed to parse AI response. Please try rephrasing your request.',\\\\n        rawResponse: text,\\\\n      }, { status: 500 });\\\\n    }\\\\n\\\\n    if (!result.success) {\\\\n      return NextResponse.json(result, { status: 400 });\\\\n    }\\\\n\\\\n    // Validate the content structure\\\\n    if (!result.content || !result.content.cover || !result.content.slides || !result.content.ask) {\\\\n      return NextResponse.json({\\\\n        success: false,\\\\n        error: 'AI returned invalid deck structure',\\\\n      }, { status: 500 });\\\\n    }\\\\n\\\\n    return NextResponse.json({\\\\n      success: true,\\\\n      content: result.content,\\\\n      description: result.description || 'Changes applied',\\\\n      changes: result.changes || [],\\\\n    });\\\\n  } catch (error) {\\\\n    console.error('Error in AI edit:', error);\\\\n    return NextResponse.json({\\\\n      success: false,\\\\n      error: error instanceof Error ? error.message : 'Failed to process AI edit',\\\\n    }, { status: 500 });\\\\n  }\\\\n}\\\\n\\\",\""
                },
                {
                  "lineNumber": 2192,
                  "content": "                  \"content\": \"import { getDeckContent, DeckContent, SlideContent } from '@/lib/deck-content';\""
                },
                {
                  "lineNumber": 2254,
                  "content": "                  \"content\": \"import { DeckContent, SlideContent, SlideImage } from '@/lib/deck-content';\""
                },
                {
                  "lineNumber": 2343,
                  "content": "                  \"content\": \"import { getDeckContent, updateDeckContent, resetDeckContent, DeckContent } from '@/lib/deck-content';\""
                },
                {
                  "lineNumber": 2433,
                  "content": "                  \"content\": \"import { updateDeckContent, DeckContent } from '@/lib/deck-content';\""
                },
                {
                  "lineNumber": 2580,
                  "content": "                  \"content\": \"  \\\"contents\\\": \\\"'use client';\\\\n\\\\nimport { useState, useEffect, useCallback, useRef } from 'react';\\\\nimport Link from 'next/link';\\\\nimport { Button } from '@/components/ui/button';\\\\nimport { ArrowLeft, Save, RotateCcw, Eye, Loader2, Plus, Trash2, ChevronDown, ChevronRight, ImageIcon, Upload, Undo2, Redo2 } from 'lucide-react';\\\\nimport { DeckContent, SlideContent, SlideImage } from '@/lib/deck-content';\\\\nimport Image from 'next/image';\\\\n\\\\nconst MAX_HISTORY = 50;\\\\n\\\\nexport default function DeckEditorPage() {\\\\n  const [content, setContent] = useState&amp;amp;lt;DeckContent | null&amp;amp;gt;(null);\\\\n  const [isLoading, setIsLoading] = useState(true);\\\\n  const [isSaving, setIsSaving] = useState(false);\\\\n  const [expandedSlides, setExpandedSlides] = useState&amp;amp;lt;Set&amp;amp;lt;string&amp;amp;gt;&amp;amp;gt;(new Set());\\\\n  const [hasChanges, setHasChanges] = useState(false);\\\\n  \\\\n  // Undo/Redo state\\\\n  const [history, setHistory] = useState&amp;amp;lt;DeckContent[]&amp;amp;gt;([]);\\\\n  const [historyIndex, setHistoryIndex] = useState(-1);\\\\n  const isUndoRedo = useRef(false);\\\\n\\\\n  // Keyboard shortcuts for undo/redo\\\\n  useEffect(() =&amp;amp;gt; {\\\\n    const handleKeyDown = (e: KeyboardEvent) =&amp;amp;gt; {\\\\n      if ((e.metaKey || e.ctrlKey) &amp;amp;amp;&amp;amp;amp; e.key === 'z') {\\\\n        e.preventDefault();\\\\n        if (e.shiftKey) {\\\\n          redo();\\\\n        } else {\\\\n          undo();\\\\n        }\\\\n      }\\\\n    };\\\\n    \\\\n    window.addEventListener('keydown', handleKeyDown);\\\\n    return () =&amp;amp;gt; window.removeEventListener('keydown', handleKeyDown);\\\\n  }, [historyIndex, history]);\\\\n\\\\n  useEffect(() =&amp;amp;gt; {\\\\n    fetchContent();\\\\n  }, []);\\\\n\\\\n  const fetchContent = async () =&amp;amp;gt; {\\\\n    setIsLoading(true);\\\\n    try {\\\\n      const response = await fetch('/api/deck-content');\\\\n      const data = await response.json();\\\\n      setContent(data);\\\\n      // Initialize history with loaded content\\\\n      setHistory([data]);\\\\n      setHistoryIndex(0);\\\\n    } catch (error) {\\\\n      console.error('Failed to fetch content:', error);\\\\n    } finally {\\\\n      setIsLoading(false);\\\\n    }\\\\n  };\\\\n\\\\n  // Push new state to history\\\\n  const pushToHistory = useCallback((newContent: DeckContent) =&amp;amp;gt; {\\\\n    if (isUndoRedo.current) {\\\\n      isUndoRedo.current = false;\\\\n      return;\\\\n    }\\\\n    \\\\n    setHistory(prev =&amp;amp;gt; {\\\\n      // Remove any future states if we're not at the end\\\\n      const newHistory = prev.slice(0, historyIndex + 1);\\\\n      // Add new state\\\\n      newHistory.push(newContent);\\\\n      // Limit history size\\\\n      if (newHistory.length &amp;amp;gt; MAX_HISTORY) {\\\\n        newHistory.shift();\\\\n        return newHistory;\\\\n      }\\\\n      return newHistory;\\\\n    });\\\\n    setHistoryIndex(prev =&amp;amp;gt; Math.min(prev + 1, MAX_HISTORY - 1));\\\\n  }, [historyIndex]);\\\\n\\\\n  // Undo function\\\\n  const undo = useCallback(() =&amp;amp;gt; {\\\\n    if (historyIndex &amp;amp;gt; 0) {\\\\n      isUndoRedo.current = true;\\\\n      const newIndex = historyIndex - 1;\\\\n      setHistoryIndex(newIndex);\\\\n      setContent(history[newIndex]);\\\\n      setHasChanges(true);\\\\n    }\\\\n  }, [historyIndex, history]);\\\\n\\\\n  // Redo function\\\\n  const redo = useCallback(() =&amp;amp;gt; {\\\\n    if (historyIndex &amp;amp;lt; history.length - 1) {\\\\n      isUndoRedo.current = true;\\\\n      const newIndex = historyIndex + 1;\\\\n      setHistoryIndex(newIndex);\\\\n      setContent(history[newIndex]);\\\\n      setHasChanges(true);\\\\n    }\\\\n  }, [historyIndex, history]);\\\\n\\\\n  const canUndo = historyIndex &amp;amp;gt; 0;\\\\n  const canRedo = historyIndex &amp;amp;lt; history.length - 1;\\\\n\\\\n  const saveContent = async () =&amp;amp;gt; {\\\\n    if (!content) return;\\\\n    setIsSaving(true);\\\\n    try {\\\\n      const response = await fetch('/api/deck-content', {\\\\n        method: 'PUT',\\\\n        headers: { 'Content-Type': 'application/json' },\\\\n        body: JSON.stringify(content),\\\\n      });\\\\n      if (response.ok) {\\\\n        setHasChanges(false);\\\\n        alert('Content saved successfully!');\\\\n      }\\\\n    } catch (error) {\\\\n      console.error('Failed to save content:', error);\\\\n      alert('Failed to save content');\\\\n    } finally {\\\\n      setIsSaving(false);\\\\n    }\\\\n  };\\\\n\\\\n  const resetContent = async () =&amp;amp;gt; {\\\\n    if (!confirm('Reset all content to defaults? This cannot be undone.')) return;\\\\n    try {\\\\n      const response = await fetch('/api/deck-content', { method: 'DELETE' });\\\\n      const data = await response.json();\\\\n      setContent(data);\\\\n      setHistory([data]);\\\\n      setHistoryIndex(0);\\\\n      setHasChanges(false);\\\\n    } catch (error) {\\\\n      console.error('Failed to reset content:', error);\\\\n    }\\\\n  };\\\\n\\\\n  const updateCover = (field: keyof DeckContent['cover'], value: string) =&amp;amp;gt; {\\\\n    if (!content) return;\\\\n    const newContent = { ...content, cover: { ...content.cover, [field]: value } };\\\\n    setContent(newContent);\\\\n    pushToHistory(newContent);\\\\n    setHasChanges(true);\\\\n  };\\\\n\\\\n  const updateSlide = (index: number, updates: Partial&amp;amp;lt;SlideContent&amp;amp;gt;) =&amp;amp;gt; {\\\\n    if (!content) return;\\\\n    const newSlides = [...content.slides];\\\\n    newSlides[index] = { ...newSlides[index], ...updates };\\\\n    const newContent = { ...content, slides: newSlides };\\\\n    setContent(newContent);\\\\n    pushToHistory(newContent);\\\\n    setHasChanges(true);\\\\n  };\\\\n\\\\n  const updateSlideSection = (slideIndex: number, sectionIndex: number, updates: Partial&amp;amp;lt;SlideContent['sections'][0]&amp;amp;gt;) =&amp;amp;gt; {\\\\n    if (!content) return;\\\\n    const newSlides = [...content.slides];\\\\n    const newSections = [...(newSlides[slideIndex].sections || [])];\\\\n    newSections[sectionIndex] = { ...newSections[sectionIndex], ...updates };\\\\n    newSlides[slideIndex] = { ...newSlides[slideIndex], sections: newSections };\\\\n    const newContent = { ...content, slides: newSlides };\\\\n    setContent(newContent);\\\\n    pushToHistory(newContent);\\\\n    setHasChanges(true);\\\\n  };\\\\n\\\\n  const updateSectionItems = (slideIndex: number, sectionIndex: number, items: string[]) =&amp;amp;gt; {\\\\n    updateSlideSection(slideIndex, sectionIndex, { items });\\\\n  };\\\\n\\\\n  const addSectionItem = (slideIndex: number, sectionIndex: number) =&amp;amp;gt; {\\\\n    if (!content) return;\\\\n    const currentItems = content.slides[slideIndex].sections?.[sectionIndex]?.items || [];\\\\n    updateSectionItems(slideIndex, sectionIndex, [...currentItems, '']);\\\\n  };\\\\n\\\\n  const removeSectionItem = (slideIndex: number, sectionIndex: number, itemIndex: number) =&amp;amp;gt; {\\\\n    if (!content) return;\\\\n    const currentItems = content.slides[slideIndex].sections?.[sectionIndex]?.items || [];\\\\n    updateSectionItems(slideIndex, sectionIndex, currentItems.filter((_, i) =&amp;amp;gt; i !== itemIndex));\\\\n  };\\\\n\\\\n  const updateAsk = (field: 'amount' | 'items', value: string | string[]) =&amp;amp;gt; {\\\\n    if (!content) return;\\\\n    const newContent = { ...content, ask: { ...content.ask, [field]: value } };\\\\n    setContent(newContent);\\\\n    pushToHistory(newContent);\\\\n    setHasChanges(true);\\\\n  };\\\\n\\\\n  const toggleSlide = (slideId: string) =&amp;amp;gt; {\\\\n    const newExpanded = new Set(expandedSlides);\\\\n    if (newExpanded.has(slideId)) {\\\\n      newExpanded.delete(slideId);\\\\n    } else {\\\\n      newExpanded.add(slideId);\\\\n    }\\\\n    setExpandedSlides(newExpanded);\\\\n  };\\\\n\\\\n  const updateSlideImage = (slideIndex: number, image: SlideImage | undefined) =&amp;amp;gt; {\\\\n    if (!content) return;\\\\n    const newSlides = [...content.slides];\\\\n    newSlides[slideIndex] = { ...newSlides[slideIndex], image };\\\\n    const newContent = { ...content, slides: newSlides };\\\\n    setContent(newContent);\\\\n    pushToHistory(newContent);\\\\n    setHasChanges(true);\\\\n  };\\\\n\\\\n  const handleImageDrop = async (slideIndex: number, e: React.DragEvent&amp;amp;lt;HTMLDivElement&amp;amp;gt;) =&amp;amp;gt; {\\\\n    e.preventDefault();\\\\n    const file = e.dataTransfer.files[0];\\\\n    if (!file || !file.type.startsWith('image/')) return;\\\\n    \\\\n    // Convert to base64 for now (in production, upload to storage)\\\\n    const reader = new FileReader();\\\\n    reader.onload = () =&amp;amp;gt; {\\\\n      const currentImage = content?.slides[slideIndex]?.image;\\\\n      updateSlideImage(slideIndex, {\\\\n        ...currentImage,\\\\n        type: currentImage?.type || 'infographic',\\\\n        url: reader.result as string,\\\\n        placeholder: currentImage?.placeholder,\\\\n      });\\\\n    };\\\\n    reader.readAsDataURL(file);\\\\n  };\\\\n\\\\n  const handleImageUpload = async (slideIndex: number, e: React.ChangeEvent&amp;amp;lt;HTMLInputElement&amp;amp;gt;) =&amp;amp;gt; {\\\\n    const file = e.target.files?.[0];\\\\n    if (!file || !file.type.startsWith('image/')) return;\\\\n    \\\\n    const reader = new FileReader();\\\\n    reader.onload = () =&amp;amp;gt; {\\\\n      const currentImage = content?.slides[slideIndex]?.image;\\\\n      updateSlideImage(slideIndex, {\\\\n        ...currentImage,\\\\n        type: currentImage?.type || 'infographic',\\\\n        url: reader.result as string,\\\\n        placeholder: currentImage?.placeholder,\\\\n      });\\\\n    };\\\\n    reader.readAsDataURL(file);\\\\n  };\\\\n\\\\n  const removeSlideImage = (slideIndex: number) =&amp;amp;gt; {\\\\n    if (!content) return;\\\\n    const currentImage = content.slides[slideIndex]?.image;\\\\n    if (currentImage) {\\\\n      updateSlideImage(slideIndex, { ...currentImage, url: undefined });\\\\n    }\\\\n  };\\\\n\\\\n  if (isLoading) {\\\\n    return (\\\\n      &amp;amp;lt;div className=\\\\\\\"min-h-screen bg-gray-950 text-white flex items-center justify-center\\\\\\\"&amp;amp;gt;\\\\n        &amp;amp;lt;Loader2 className=\\\\\\\"w-8 h-8 animate-spin\\\\\\\" /&amp;amp;gt;\\\\n      &amp;amp;lt;/div&amp;amp;gt;\\\\n    );\\\\n  }\\\\n\\\\n  if (!content) {\\\\n    return (\\\\n      &amp;amp;lt;div className=\\\\\\\"min-h-screen bg-gray-950 text-white flex items-center justify-center\\\\\\\"&amp;amp;gt;\\\\n        &amp;amp;lt;p&amp;amp;gt;Failed to load content&amp;amp;lt;/p&amp;amp;gt;\\\\n      &amp;amp;lt;/div&amp;amp;gt;\\\\n    );\\\\n  }\\\\n\\\\n  return (\\\\n    &amp;amp;lt;div className=\\\\\\\"min-h-screen bg-gray-950 text-white\\\\\\\"&amp;amp;gt;\\\\n      {/* Header */}\\\\n      &amp;amp;lt;div className=\\\\\\\"sticky top-0 z-10 bg-gray-900 border-b border-gray-800\\\\\\\"&amp;amp;gt;\\\\n        &amp;amp;lt;div className=\\\\\\\"container px-4 py-4 flex items-center justify-between\\\\\\\"&amp;amp;gt;\\\\n          &amp;amp;lt;div className=\\\\\\\"flex items-center gap-4\\\\\\\"&amp;amp;gt;\\\\n            &amp;amp;lt;Link href=\\\\\\\"/admin\\\\\\\" className=\\\\\\\"text-gray-400 hover:text-white\\\\\\\"&amp;amp;gt;\\\\n              &amp;amp;lt;ArrowLeft className=\\\\\\\"w-5 h-5\\\\\\\" /&amp;amp;gt;\\\\n            &amp;amp;lt;/Link&amp;amp;gt;\\\\n            &amp;amp;lt;h1 className=\\\\\\\"text-xl font-bold\\\\\\\"&amp;amp;gt;Edit Pitch Deck&amp;amp;lt;/h1&amp;amp;gt;\\\\n            {hasChanges &amp;amp;amp;&amp;amp;amp; (\\\\n              &amp;amp;lt;span className=\\\\\\\"text-xs bg-yellow-600 px-2 py-1 rounded\\\\\\\"&amp;amp;gt;Unsaved changes&amp;amp;lt;/span&amp;amp;gt;\\\\n            )}\\\\n          &amp;amp;lt;/div&amp;amp;gt;\\\\n          \\\\n          &amp;amp;lt;div className=\\\\\\\"flex items-center gap-2\\\\\\\"&amp;amp;gt;\\\\n            &amp;amp;lt;Button\\\\n              onClick={undo}\\\\n              disabled={!canUndo}\\\\n              variant=\\\\\\\"outline\\\\\\\"\\\\n              size=\\\\\\\"sm\\\\\\\"\\\\n              className=\\\\\\\"border-gray-700 text-gray-300 disabled:opacity-30\\\\\\\"\\\\n              title=\\\\\\\"Undo (Cmd+Z)\\\\\\\"\\\\n            &amp;amp;gt;\\\\n              &amp;amp;lt;Undo2 className=\\\\\\\"w-4 h-4\\\\\\\" /&amp;amp;gt;\\\\n            &amp;amp;lt;/Button&amp;amp;gt;\\\\n            &amp;amp;lt;Button\\\\n              onClick={redo}\\\\n              disabled={!canRedo}\\\\n              variant=\\\\\\\"outline\\\\\\\"\\\\n              size=\\\\\\\"sm\\\\\\\"\\\\n              className=\\\\\\\"border-gray-700 text-gray-300 disabled:opacity-30\\\\\\\"\\\\n              title=\\\\\\\"Redo (Cmd+Shift+Z)\\\\\\\"\\\\n            &amp;amp;gt;\\\\n              &amp;amp;lt;Redo2 className=\\\\\\\"w-4 h-4\\\\\\\" /&amp;amp;gt;\\\\n            &amp;amp;lt;/Button&amp;amp;gt;\\\\n            &amp;amp;lt;div className=\\\\\\\"w-px h-6 bg-gray-700 mx-1\\\\\\\" /&amp;amp;gt;\\\\n            &amp;amp;lt;Button\\\\n              onClick={resetContent}\\\\n              variant=\\\\\\\"outline\\\\\\\"\\\\n              size=\\\\\\\"sm\\\\\\\"\\\\n              className=\\\\\\\"border-gray-700 text-gray-300\\\\\\\"\\\\n            &amp;amp;gt;\\\\n              &amp;amp;lt;RotateCcw className=\\\\\\\"w-4 h-4 mr-2\\\\\\\" /&amp;amp;gt;\\\\n              Reset\\\\n            &amp;amp;lt;/Button&amp;amp;gt;\\\\n            &amp;amp;lt;Link href=\\\\\\\"/deck\\\\\\\" target=\\\\\\\"_blank\\\\\\\"&amp;amp;gt;\\\\n              &amp;amp;lt;Button variant=\\\\\\\"outline\\\\\\\" size=\\\\\\\"sm\\\\\\\" className=\\\\\\\"border-gray-700 text-gray-300\\\\\\\"&amp;amp;gt;\\\\n                &amp;amp;lt;Eye className=\\\\\\\"w-4 h-4 mr-2\\\\\\\" /&amp;amp;gt;\\\\n                Preview\\\\n              &amp;amp;lt;/Button&amp;amp;gt;\\\\n            &amp;amp;lt;/Link&amp;amp;gt;\\\\n            &amp;amp;lt;Button\\\\n              onClick={saveContent}\\\\n              disabled={isSaving || !hasChanges}\\\\n              size=\\\\\\\"sm\\\\\\\"\\\\n              className=\\\\\\\"bg-white text-black hover:bg-gray-200\\\\\\\"\\\\n            &amp;amp;gt;\\\\n              {isSaving ? &amp;amp;lt;Loader2 className=\\\\\\\"w-4 h-4 mr-2 animate-spin\\\\\\\" /&amp;amp;gt; : &amp;amp;lt;Save className=\\\\\\\"w-4 h-4 mr-2\\\\\\\" /&amp;amp;gt;}\\\\n              Save\\\\n            &amp;amp;lt;/Button&amp;amp;gt;\\\\n          &amp;amp;lt;/div&amp;amp;gt;\\\\n        &amp;amp;lt;/div&amp;amp;gt;\\\\n      &amp;amp;lt;/div&amp;amp;gt;\\\\n\\\\n      &amp;amp;lt;div className=\\\\\\\"container px-4 py-8 max-w-4xl\\\\\\\"&amp;amp;gt;\\\\n        {/* Cover Section */}\\\\n        &amp;amp;lt;section className=\\\\\\\"mb-8\\\\\\\"&amp;amp;gt;\\\\n          &amp;amp;lt;h2 className=\\\\\\\"text-lg font-semibold mb-4 text-gray-300\\\\\\\"&amp;amp;gt;Slides&amp;amp;lt;/h2&amp;amp;gt;\\\\n          &amp;amp;lt;div className=\\\\\\\"bg-gray-900 rounded-lg overflow-hidden mb-2\\\\\\\"&amp;amp;gt;\\\\n            &amp;amp;lt;button\\\\n              onClick={() =&amp;amp;gt; toggleSlide('cover')}\\\\n              className=\\\\\\\"w-full px-4 py-3 flex items-center justify-between hover:bg-gray-800 transition-colors\\\\\\\"\\\\n            &amp;amp;gt;\\\\n              &amp;amp;lt;span className=\\\\\\\"font-medium\\\\\\\"&amp;amp;gt;1. Cover Slide&amp;amp;lt;/span&amp;amp;gt;\\\\n              {expandedSlides.has('cover') ? (\\\\n                &amp;amp;lt;ChevronDown className=\\\\\\\"w-5 h-5 text-gray-400\\\\\\\" /&amp;amp;gt;\\\\n              ) : (\\\\n                &amp;amp;lt;ChevronRight className=\\\\\\\"w-5 h-5 text-gray-400\\\\\\\" /&amp;amp;gt;\\\\n              )}\\\\n            &amp;amp;lt;/button&amp;amp;gt;\\\\n            \\\\n            {expandedSlides.has('cover') &amp;amp;amp;&amp;amp;amp; (\\\\n              &amp;amp;lt;div className=\\\\\\\"px-4 pb-4 space-y-4 border-t border-gray-800\\\\\\\"&amp;amp;gt;\\\\n                &amp;amp;lt;div className=\\\\\\\"pt-4\\\\\\\"&amp;amp;gt;\\\\n                  &amp;amp;lt;label className=\\\\\\\"block text-sm text-gray-400 mb-1\\\\\\\"&amp;amp;gt;Title&amp;amp;lt;/label&amp;amp;gt;\\\\n                  &amp;amp;lt;input\\\\n                    type=\\\\\\\"text\\\\\\\"\\\\n                    value={content.cover.title}\\\\n                    onChange={(e) =&amp;amp;gt; updateCover('title', e.target.value)}\\\\n                    className=\\\\\\\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\\\\\\\"\\\\n                  /&amp;amp;gt;\\\\n                &amp;amp;lt;/div&amp;amp;gt;\\\\n                &amp;amp;lt;div&amp;amp;gt;\\\\n                  &amp;amp;lt;label className=\\\\\\\"block text-sm text-gray-400 mb-1\\\\\\\"&amp;amp;gt;Tagline&amp;amp;lt;/label&amp;amp;gt;\\\\n                  &amp;amp;lt;textarea\\\\n                    value={content.cover.tagline}\\\\n                    onChange={(e) =&amp;amp;gt; updateCover('tagline', e.target.value)}\\\\n                    rows={2}\\\\n                    className=\\\\\\\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\\\\\\\"\\\\n                  /&amp;amp;gt;\\\\n                &amp;amp;lt;/div&amp;amp;gt;\\\\n                &amp;amp;lt;div&amp;amp;gt;\\\\n                  &amp;amp;lt;label className=\\\\\\\"block text-sm text-gray-400 mb-1\\\\\\\"&amp;amp;gt;Subtagline&amp;amp;lt;/label&amp;amp;gt;\\\\n                  &amp;amp;lt;input\\\\n                    type=\\\\\\\"text\\\\\\\"\\\\n                    value={content.cover.subtagline}\\\\n                    onChange={(e) =&amp;amp;gt; updateCover('subtagline', e.target.value)}\\\\n                    className=\\\\\\\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\\\\\\\"\\\\n                  /&amp;amp;gt;\\\\n                &amp;amp;lt;/div&amp;amp;gt;\\\\n                &amp;amp;lt;div&amp;amp;gt;\\\\n                  &amp;amp;lt;label className=\\\\\\\"block text-sm text-gray-400 mb-1\\\\\\\"&amp;amp;gt;URL&amp;amp;lt;/label&amp;amp;gt;\\\\n                  &amp;amp;lt;input\\\\n                    type=\\\\\\\"text\\\\\\\"\\\\n                    value={content.cover.url}\\\\n                    onChange={(e) =&amp;amp;gt; updateCover('url', e.target.value)}\\\\n                    className=\\\\\\\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\\\\\\\"\\\\n                  /&amp;amp;gt;\\\\n                &amp;amp;lt;/div&amp;amp;gt;\\\\n              &amp;amp;lt;/div&amp;amp;gt;\\\\n            )}\\\\n          &amp;amp;lt;/div&amp;amp;gt;\\\\n\\\\n          {content.slides.map((slide, slideIndex) =&amp;amp;gt; (\\\\n              &amp;amp;lt;div key={slide.id} className=\\\\\\\"bg-gray-900 rounded-lg overflow-hidden\\\\\\\"&amp;amp;gt;\\\\n                &amp;amp;lt;button\\\\n                  onClick={() =&amp;amp;gt; toggleSlide(slide.id)}\\\\n                  className=\\\\\\\"w-full px-4 py-3 flex items-center justify-between hover:bg-gray-800 transition-colors\\\\\\\"\\\\n                &amp;amp;gt;\\\\n                  &amp;amp;lt;span className=\\\\\\\"font-medium\\\\\\\"&amp;amp;gt;\\\\n                    {slideIndex + 2}. {slide.title}\\\\n                  &amp;amp;lt;/span&amp;amp;gt;\\\\n                  {expandedSlides.has(slide.id) ? (\\\\n                    &amp;amp;lt;ChevronDown className=\\\\\\\"w-5 h-5 text-gray-400\\\\\\\" /&amp;amp;gt;\\\\n                  ) : (\\\\n                    &amp;amp;lt;ChevronRight className=\\\\\\\"w-5 h-5 text-gray-400\\\\\\\" /&amp;amp;gt;\\\\n                  )}\\\\n                &amp;amp;lt;/button&amp;amp;gt;\\\\n                \\\\n                {expandedSlides.has(slide.id) &amp;amp;amp;&amp;amp;amp; (\\\\n                  &amp;amp;lt;div className=\\\\\\\"px-4 pb-4 space-y-4 border-t border-gray-800\\\\\\\"&amp;amp;gt;\\\\n                    &amp;amp;lt;div className=\\\\\\\"pt-4\\\\\\\"&amp;amp;gt;\\\\n                      &amp;amp;lt;label className=\\\\\\\"block text-sm text-gray-400 mb-1\\\\\\\"&amp;amp;gt;Title&amp;amp;lt;/label&amp;amp;gt;\\\\n                      &amp;amp;lt;input\\\\n                        type=\\\\\\\"text\\\\\\\"\\\\n                        value={slide.title}\\\\n                        onChange={(e) =&amp;amp;gt; updateSlide(slideIndex, { title: e.target.value })}\\\\n                        className=\\\\\\\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\\\\\\\"\\\\n                      /&amp;amp;gt;\\\\n                    &amp;amp;lt;/div&amp;amp;gt;\\\\n                    \\\\n                    &amp;amp;lt;div&amp;amp;gt;\\\\n                      &amp;amp;lt;label className=\\\\\\\"block text-sm text-gray-400 mb-1\\\\\\\"&amp;amp;gt;Subtitle&amp;amp;lt;/label&amp;amp;gt;\\\\n                      &amp;amp;lt;input\\\\n                        type=\\\\\\\"text\\\\\\\"\\\\n                        value={slide.subtitle || ''}\\\\n                        onChange={(e) =&amp;amp;gt; updateSlide(slideIndex, { subtitle: e.target.value })}\\\\n                        className=\\\\\\\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\\\\\\\"\\\\n                      /&amp;amp;gt;\\\\n                    &amp;amp;lt;/div&amp;amp;gt;\\\\n\\\\n                    {/* Sections */}\\\\n                    {slide.sections?.map((section, sectionIndex) =&amp;amp;gt; (\\\\n                      &amp;amp;lt;div key={sectionIndex} className=\\\\\\\"bg-gray-800 rounded p-3 space-y-3\\\\\\\"&amp;amp;gt;\\\\n                        &amp;amp;lt;div&amp;amp;gt;\\\\n                          &amp;amp;lt;label className=\\\\\\\"block text-xs text-gray-500 mb-1\\\\\\\"&amp;amp;gt;Section Heading&amp;amp;lt;/label&amp;amp;gt;\\\\n                          &amp;amp;lt;input\\\\n                            type=\\\\\\\"text\\\\\\\"\\\\n                            value={section.heading || ''}\\\\n                            onChange={(e) =&amp;amp;gt; updateSlideSection(slideIndex, sectionIndex, { heading: e.target.value })}\\\\n                            className=\\\\\\\"w-full bg-gray-700 border border-gray-600 rounded px-2 py-1 text-sm text-white\\\\\\\"\\\\n                          /&amp;amp;gt;\\\\n                        &amp;amp;lt;/div&amp;amp;gt;\\\\n                        \\\\n                        {section.text !== undefined &amp;amp;amp;&amp;amp;amp; (\\\\n                          &amp;amp;lt;div&amp;amp;gt;\\\\n                            &amp;amp;lt;label className=\\\\\\\"block text-xs text-gray-500 mb-1\\\\\\\"&amp;amp;gt;Text&amp;amp;lt;/label&amp;amp;gt;\\\\n                            &amp;amp;lt;textarea\\\\n                              value={section.text}\\\\n                              onChange={(e) =&amp;amp;gt; updateSlideSection(slideIndex, sectionIndex, { text: e.target.value })}\\\\n                              rows={2}\\\\n                              className=\\\\\\\"w-full bg-gray-700 border border-gray-600 rounded px-2 py-1 text-sm text-white\\\\\\\"\\\\n                            /&amp;amp;gt;\\\\n                          &amp;amp;lt;/div&amp;amp;gt;\\\\n                        )}\\\\n                        \\\\n                        {section.items &amp;amp;amp;&amp;amp;amp; (\\\\n                          &amp;amp;lt;div&amp;amp;gt;\\\\n                            &amp;amp;lt;label className=\\\\\\\"block text-xs text-gray-500 mb-1\\\\\\\"&amp;amp;gt;Bullet Points&amp;amp;lt;/label&amp;amp;gt;\\\\n                            {section.items.map((item, itemIndex) =&amp;amp;gt; (\\\\n                              &amp;amp;lt;div key={itemIndex} className=\\\\\\\"flex gap-2 mb-1\\\\\\\"&amp;amp;gt;\\\\n                                &amp;amp;lt;input\\\\n                                  type=\\\\\\\"text\\\\\\\"\\\\n                                  value={item}\\\\n                                  onChange={(e) =&amp;amp;gt; {\\\\n                                    const newItems = [...section.items!];\\\\n                                    newItems[itemIndex] = e.target.value;\\\\n                                    updateSectionItems(slideIndex, sectionIndex, newItems);\\\\n                                  }}\\\\n                                  className=\\\\\\\"flex-1 bg-gray-700 border border-gray-600 rounded px-2 py-1 text-sm text-white\\\\\\\"\\\\n                                /&amp;amp;gt;\\\\n                                &amp;amp;lt;button\\\\n                                  onClick={() =&amp;amp;gt; removeSectionItem(slideIndex, sectionIndex, itemIndex)}\\\\n                                  className=\\\\\\\"text-red-400 hover:text-red-300 p-1\\\\\\\"\\\\n                                &amp;amp;gt;\\\\n                                  &amp;amp;lt;Trash2 className=\\\\\\\"w-4 h-4\\\\\\\" /&amp;amp;gt;\\\\n                                &amp;amp;lt;/button&amp;amp;gt;\\\\n                              &amp;amp;lt;/div&amp;amp;gt;\\\\n                            ))}\\\\n                            &amp;amp;lt;button\\\\n                              onClick={() =&amp;amp;gt; addSectionItem(slideIndex, sectionIndex)}\\\\n                              className=\\\\\\\"text-xs text-gray-400 hover:text-white flex items-center gap-1 mt-1\\\\\\\"\\\\n                            &amp;amp;gt;\\\\n                              &amp;amp;lt;Plus className=\\\\\\\"w-3 h-3\\\\\\\" /&amp;amp;gt; Add item\\\\n                            &amp;amp;lt;/button&amp;amp;gt;\\\\n                          &amp;amp;lt;/div&amp;amp;gt;\\\\n                        )}\\\\n                      &amp;amp;lt;/div&amp;amp;gt;\\\\n                    ))}\\\\n\\\\n                    {slide.highlight &amp;amp;amp;&amp;amp;amp; (\\\\n                      &amp;amp;lt;div&amp;amp;gt;\\\\n                        &amp;amp;lt;label className=\\\\\\\"block text-sm text-gray-400 mb-1\\\\\\\"&amp;amp;gt;Highlight Box&amp;amp;lt;/label&amp;amp;gt;\\\\n                        &amp;amp;lt;textarea\\\\n                          value={slide.highlight}\\\\n                          onChange={(e) =&amp;amp;gt; updateSlide(slideIndex, { highlight: e.target.value })}\\\\n                          rows={2}\\\\n                          className=\\\\\\\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\\\\\\\"\\\\n                        /&amp;amp;gt;\\\\n                      &amp;amp;lt;/div&amp;amp;gt;\\\\n                    )}\\\\n\\\\n                    {slide.footnote &amp;amp;amp;&amp;amp;amp; (\\\\n                      &amp;amp;lt;div&amp;amp;gt;\\\\n                        &amp;amp;lt;label className=\\\\\\\"block text-sm text-gray-400 mb-1\\\\\\\"&amp;amp;gt;Footnote&amp;amp;lt;/label&amp;amp;gt;\\\\n                        &amp;amp;lt;input\\\\n                          type=\\\\\\\"text\\\\\\\"\\\\n                          value={slide.footnote}\\\\n                          onChange={(e) =&amp;amp;gt; updateSlide(slideIndex, { footnote: e.target.value })}\\\\n                          className=\\\\\\\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\\\\\\\"\\\\n                        /&amp;amp;gt;\\\\n                      &amp;amp;lt;/div&amp;amp;gt;\\\\n                    )}\\\\n\\\\n                    {/* Image Section */}\\\\n                    &amp;amp;lt;div className=\\\\\\\"border-t border-gray-700 pt-4 mt-4\\\\\\\"&amp;amp;gt;\\\\n                      &amp;amp;lt;label className=\\\\\\\"block text-sm text-gray-400 mb-2\\\\\\\"&amp;amp;gt;Slide Image&amp;amp;lt;/label&amp;amp;gt;\\\\n                      \\\\n                      {slide.image?.url ? (\\\\n                        &amp;amp;lt;div className=\\\\\\\"relative\\\\\\\"&amp;amp;gt;\\\\n                          &amp;amp;lt;div className=\\\\\\\"relative w-full h-48 bg-gray-800 rounded-lg overflow-hidden\\\\\\\"&amp;amp;gt;\\\\n                            &amp;amp;lt;img\\\\n                              src={slide.image.url}\\\\n                              alt={slide.image.placeholder || 'Slide image'}\\\\n                              className=\\\\\\\"w-full h-full object-contain\\\\\\\"\\\\n                            /&amp;amp;gt;\\\\n                          &amp;amp;lt;/div&amp;amp;gt;\\\\n                          &amp;amp;lt;button\\\\n                            onClick={() =&amp;amp;gt; removeSlideImage(slideIndex)}\\\\n                            className=\\\\\\\"absolute top-2 right-2 bg-red-600 hover:bg-red-700 text-white p-1 rounded\\\\\\\"\\\\n                          &amp;amp;gt;\\\\n                            &amp;amp;lt;Trash2 className=\\\\\\\"w-4 h-4\\\\\\\" /&amp;amp;gt;\\\\n                          &amp;amp;lt;/button&amp;amp;gt;\\\\n                          &amp;amp;lt;p className=\\\\\\\"text-xs text-gray-500 mt-1\\\\\\\"&amp;amp;gt;{slide.image.placeholder}&amp;amp;lt;/p&amp;amp;gt;\\\\n                        &amp;amp;lt;/div&amp;amp;gt;\\\\n                      ) : (\\\\n                        &amp;amp;lt;div\\\\n                          onDrop={(e) =&amp;amp;gt; handleImageDrop(slideIndex, e)}\\\\n                          onDragOver={(e) =&amp;amp;gt; e.preventDefault()}\\\\n                          className=\\\\\\\"border-2 border-dashed border-gray-600 rounded-lg p-6 text-center hover:border-gray-500 transition-colors\\\\\\\"\\\\n                        &amp;amp;gt;\\\\n                          &amp;amp;lt;ImageIcon className=\\\\\\\"w-12 h-12 mx-auto text-gray-500 mb-3\\\\\\\" /&amp;amp;gt;\\\\n                          &amp;amp;lt;p className=\\\\\\\"text-sm text-gray-400 mb-2\\\\\\\"&amp;amp;gt;\\\\n                            {slide.image?.placeholder || 'Drag &amp;amp;amp; drop image here'}\\\\n                          &amp;amp;lt;/p&amp;amp;gt;\\\\n                          &amp;amp;lt;p className=\\\\\\\"text-xs text-gray-500 mb-3\\\\\\\"&amp;amp;gt;\\\\n                            Type: {slide.image?.type || 'Not set'}\\\\n                          &amp;amp;lt;/p&amp;amp;gt;\\\\n                          &amp;amp;lt;label className=\\\\\\\"cursor-pointer\\\\\\\"&amp;amp;gt;\\\\n                            &amp;amp;lt;span className=\\\\\\\"inline-flex items-center gap-2 px-3 py-1.5 bg-gray-700 hover:bg-gray-600 rounded text-sm text-white\\\\\\\"&amp;amp;gt;\\\\n                              &amp;amp;lt;Upload className=\\\\\\\"w-4 h-4\\\\\\\" /&amp;amp;gt;\\\\n                              Upload Image\\\\n                            &amp;amp;lt;/span&amp;amp;gt;\\\\n                            &amp;amp;lt;input\\\\n                              type=\\\\\\\"file\\\\\\\"\\\\n                              accept=\\\\\\\"image/*\\\\\\\"\\\\n                              onChange={(e) =&amp;amp;gt; handleImageUpload(slideIndex, e)}\\\\n                              className=\\\\\\\"hidden\\\\\\\"\\\\n                            /&amp;amp;gt;\\\\n                          &amp;amp;lt;/label&amp;amp;gt;\\\\n                        &amp;amp;lt;/div&amp;amp;gt;\\\\n                      )}\\\\n                      \\\\n                      &amp;amp;lt;div className=\\\\\\\"mt-2\\\\\\\"&amp;amp;gt;\\\\n                        &amp;amp;lt;label className=\\\\\\\"block text-xs text-gray-500 mb-1\\\\\\\"&amp;amp;gt;Image Description (for AI generation)&amp;amp;lt;/label&amp;amp;gt;\\\\n                        &amp;amp;lt;input\\\\n                          type=\\\\\\\"text\\\\\\\"\\\\n                          value={slide.image?.placeholder || ''}\\\\n                          onChange={(e) =&amp;amp;gt; updateSlideImage(slideIndex, {\\\\n                            ...slide.image,\\\\n                            type: slide.image?.type || 'infographic',\\\\n                            placeholder: e.target.value,\\\\n                          })}\\\\n                          placeholder=\\\\\\\"Describe the image you want...\\\\\\\"\\\\n                          className=\\\\\\\"w-full bg-gray-700 border border-gray-600 rounded px-2 py-1 text-sm text-white\\\\\\\"\\\\n                        /&amp;amp;gt;\\\\n                      &amp;amp;lt;/div&amp;amp;gt;\\\\n                      \\\\n                      &amp;amp;lt;div className=\\\\\\\"mt-2\\\\\\\"&amp;amp;gt;\\\\n                        &amp;amp;lt;label className=\\\\\\\"block text-xs text-gray-500 mb-1\\\\\\\"&amp;amp;gt;Image Type&amp;amp;lt;/label&amp;amp;gt;\\\\n                        &amp;amp;lt;select\\\\n                          value={slide.image?.type || 'infographic'}\\\\n                          onChange={(e) =&amp;amp;gt; updateSlideImage(slideIndex, {\\\\n                            ...slide.image,\\\\n                            type: e.target.value as SlideImage['type'],\\\\n                            placeholder: slide.image?.placeholder,\\\\n                          })}\\\\n                          className=\\\\\\\"w-full bg-gray-700 border border-gray-600 rounded px-2 py-1 text-sm text-white\\\\\\\"\\\\n                        &amp;amp;gt;\\\\n                          &amp;amp;lt;option value=\\\\\\\"icon\\\\\\\"&amp;amp;gt;Icon&amp;amp;lt;/option&amp;amp;gt;\\\\n                          &amp;amp;lt;option value=\\\\\\\"chart\\\\\\\"&amp;amp;gt;Chart&amp;amp;lt;/option&amp;amp;gt;\\\\n                          &amp;amp;lt;option value=\\\\\\\"mockup\\\\\\\"&amp;amp;gt;Mockup&amp;amp;lt;/option&amp;amp;gt;\\\\n                          &amp;amp;lt;option value=\\\\\\\"infographic\\\\\\\"&amp;amp;gt;Infographic&amp;amp;lt;/option&amp;amp;gt;\\\\n                          &amp;amp;lt;option value=\\\\\\\"photo\\\\\\\"&amp;amp;gt;Photo&amp;amp;lt;/option&amp;amp;gt;\\\\n                          &amp;amp;lt;option value=\\\\\\\"diagram\\\\\\\"&amp;amp;gt;Diagram&amp;amp;lt;/option&amp;amp;gt;\\\\n                        &amp;amp;lt;/select&amp;amp;gt;\\\\n                      &amp;amp;lt;/div&amp;amp;gt;\\\\n                    &amp;amp;lt;/div&amp;amp;gt;\\\\n                  &amp;amp;lt;/div&amp;amp;gt;\\\\n                )}\\\\n              &amp;amp;lt;/div&amp;amp;gt;\\\\n            ))}\\\\n        &amp;amp;lt;/section&amp;amp;gt;\\\\n\\\\n        {/* Ask Section */}\\\\n        &amp;amp;lt;section className=\\\\\\\"mb-8\\\\\\\"&amp;amp;gt;\\\\n          &amp;amp;lt;h2 className=\\\\\\\"text-lg font-semibold mb-4 text-gray-300\\\\\\\"&amp;amp;gt;The Ask&amp;amp;lt;/h2&amp;amp;gt;\\\\n          &amp;amp;lt;div className=\\\\\\\"bg-gray-900 rounded-lg p-4 space-y-4\\\\\\\"&amp;amp;gt;\\\\n            &amp;amp;lt;div&amp;amp;gt;\\\\n              &amp;amp;lt;label className=\\\\\\\"block text-sm text-gray-400 mb-1\\\\\\\"&amp;amp;gt;Amount&amp;amp;lt;/label&amp;amp;gt;\\\\n              &amp;amp;lt;input\\\\n                type=\\\\\\\"text\\\\\\\"\\\\n                value={content.ask.amount}\\\\n                onChange={(e) =&amp;amp;gt; updateAsk('amount', e.target.value)}\\\\n                className=\\\\\\\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\\\\\\\"\\\\n              /&amp;amp;gt;\\\\n            &amp;amp;lt;/div&amp;amp;gt;\\\\n            &amp;amp;lt;div&amp;amp;gt;\\\\n              &amp;amp;lt;label className=\\\\\\\"block text-sm text-gray-400 mb-1\\\\\\\"&amp;amp;gt;What we'll do with the funding&amp;amp;lt;/label&amp;amp;gt;\\\\n              {content.ask.items.map((item, index) =&amp;amp;gt; (\\\\n                &amp;amp;lt;div key={index} className=\\\\\\\"flex gap-2 mb-2\\\\\\\"&amp;amp;gt;\\\\n                  &amp;amp;lt;input\\\\n                    type=\\\\\\\"text\\\\\\\"\\\\n                    value={item}\\\\n                    onChange={(e) =&amp;amp;gt; {\\\\n                      const newItems = [...content.ask.items];\\\\n                      newItems[index] = e.target.value;\\\\n                      updateAsk('items', newItems);\\\\n                    }}\\\\n                    className=\\\\\\\"flex-1 bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\\\\\\\"\\\\n                  /&amp;amp;gt;\\\\n                  &amp;amp;lt;button\\\\n                    onClick={() =&amp;amp;gt; {\\\\n                      const newItems = content.ask.items.filter((_, i) =&amp;amp;gt; i !== index);\\\\n                      updateAsk('items', newItems);\\\\n                    }}\\\\n                    className=\\\\\\\"text-red-400 hover:text-red-300 p-2\\\\\\\"\\\\n                  &amp;amp;gt;\\\\n                    &amp;amp;lt;Trash2 className=\\\\\\\"w-4 h-4\\\\\\\" /&amp;amp;gt;\\\\n                  &amp;amp;lt;/button&amp;amp;gt;\\\\n                &amp;amp;lt;/div&amp;amp;gt;\\\\n              ))}\\\\n              &amp;amp;lt;button\\\\n                onClick={() =&amp;amp;gt; updateAsk('items', [...content.ask.items, ''])}\\\\n                className=\\\\\\\"text-sm text-gray-400 hover:text-white flex items-center gap-1\\\\\\\"\\\\n              &amp;amp;gt;\\\\n                &amp;amp;lt;Plus className=\\\\\\\"w-4 h-4\\\\\\\" /&amp;amp;gt; Add item\\\\n              &amp;amp;lt;/button&amp;amp;gt;\\\\n            &amp;amp;lt;/div&amp;amp;gt;\\\\n          &amp;amp;lt;/div&amp;amp;gt;\\\\n        &amp;amp;lt;/section&amp;amp;gt;\\\\n      &amp;amp;lt;/div&amp;amp;gt;\\\\n    &amp;amp;lt;/div&amp;amp;gt;\\\\n  );\\\\n}\\\\n\\\\n\\\",\""
                },
                {
                  "lineNumber": 2592,
                  "content": "                  \"content\": \"  \\\"contents\\\": \\\"import { NextResponse } from 'next/server';\\\\nimport { getDeckContent, updateDeckContent, resetDeckContent, DeckContent } from '@/lib/deck-content';\\\\n\\\\nexport async function GET() {\\\\n  try {\\\\n    const content = getDeckContent();\\\\n    return NextResponse.json(content);\\\\n  } catch (error) {\\\\n    console.error('Error fetching deck content:', error);\\\\n    return NextResponse.json({ error: 'Failed to fetch content' }, { status: 500 });\\\\n  }\\\\n}\\\\n\\\\nexport async function PUT(request: Request) {\\\\n  try {\\\\n    const body = await request.json() as Partial&amp;amp;lt;DeckContent&amp;amp;gt;;\\\\n    const updatedContent = updateDeckContent(body);\\\\n    return NextResponse.json(updatedContent);\\\\n  } catch (error) {\\\\n    console.error('Error updating deck content:', error);\\\\n    return NextResponse.json({ error: 'Failed to update content' }, { status: 500 });\\\\n  }\\\\n}\\\\n\\\\nexport async function DELETE() {\\\\n  try {\\\\n    const content = resetDeckContent();\\\\n    return NextResponse.json(content);\\\\n  } catch (error) {\\\\n    console.error('Error resetting deck content:', error);\\\\n    return NextResponse.json({ error: 'Failed to reset content' }, { status: 500 });\\\\n  }\\\\n}\\\\n\\\\n\\\",\""
                },
                {
                  "lineNumber": 2848,
                  "content": "                  \"content\": \"  \\\"contents\\\": \\\"import { NextResponse } from 'next/server';\\\\nimport { getDeckContent, updateDeckContent, resetDeckContent, DeckContent } from '@/lib/deck-content';\\\\n\\\\nexport async function GET() {\\\\n  try {\\\\n    const content = getDeckContent();\\\\n    return NextResponse.json(content);\\\\n  } catch (error) {\\\\n    console.error('Error fetching deck content:', error);\\\\n    return NextResponse.json({ error: 'Failed to fetch content' }, { status: 500 });\\\\n  }\\\\n}\\\\n\\\\nexport async function PUT(request: Request) {\\\\n  try {\\\\n    const body = await request.json() as Partial&amp;amp;lt;DeckContent&amp;amp;gt;;\\\\n    const updatedContent = updateDeckContent(body);\\\\n    return NextResponse.json(updatedContent);\\\\n  } catch (error) {\\\\n    console.error('Error updating deck content:', error);\\\\n    return NextResponse.json({ error: 'Failed to update content' }, { status: 500 });\\\\n  }\\\\n}\\\\n\\\\nexport async function DELETE() {\\\\n  try {\\\\n    const content = resetDeckContent();\\\\n    return NextResponse.json(content);\\\\n  } catch (error) {\\\\n    console.error('Error resetting deck content:', error);\\\\n    return NextResponse.json({ error: 'Failed to reset content' }, { status: 500 });\\\\n  }\\\\n}\\\\n\\\\n\\\",\""
                },
                {
                  "lineNumber": 2908,
                  "content": "                  \"content\": \"  \\\"contents\\\": \\\"'use client';\\\\n\\\\nimport { useState, useEffect, useCallback, useRef } from 'react';\\\\nimport Link from 'next/link';\\\\nimport { Button } from '@/components/ui/button';\\\\nimport { ArrowLeft, Save, RotateCcw, Eye, Loader2, Plus, Trash2, ChevronDown, ChevronRight, ImageIcon, Upload, Undo2, Redo2 } from 'lucide-react';\\\\nimport { DeckContent, SlideContent, SlideImage } from '@/lib/deck-content';\\\\nimport Image from 'next/image';\\\\n\\\\nconst MAX_HISTORY = 50;\\\\n\\\\nexport default function DeckEditorPage() {\\\\n  const [content, setContent] = useState&amp;amp;lt;DeckContent | null&amp;amp;gt;(null);\\\\n  const [isLoading, setIsLoading] = useState(true);\\\\n  const [isSaving, setIsSaving] = useState(false);\\\\n  const [expandedSlides, setExpandedSlides] = useState&amp;amp;lt;Set&amp;amp;lt;string&amp;amp;gt;&amp;amp;gt;(new Set());\\\\n  const [hasChanges, setHasChanges] = useState(false);\\\\n  \\\\n  // Undo/Redo state\\\\n  const [history, setHistory] = useState&amp;amp;lt;DeckContent[]&amp;amp;gt;([]);\\\\n  const [historyIndex, setHistoryIndex] = useState(-1);\\\\n  const isUndoRedo = useRef(false);\\\\n\\\\n  // Keyboard shortcuts for undo/redo\\\\n  useEffect(() =&amp;amp;gt; {\\\\n    const handleKeyDown = (e: KeyboardEvent) =&amp;amp;gt; {\\\\n      if ((e.metaKey || e.ctrlKey) &amp;amp;amp;&amp;amp;amp; e.key === 'z') {\\\\n        e.preventDefault();\\\\n        if (e.shiftKey) {\\\\n          redo();\\\\n        } else {\\\\n          undo();\\\\n        }\\\\n      }\\\\n    };\\\\n    \\\\n    window.addEventListener('keydown', handleKeyDown);\\\\n    return () =&amp;amp;gt; window.removeEventListener('keydown', handleKeyDown);\\\\n  }, [historyIndex, history]);\\\\n\\\\n  useEffect(() =&amp;amp;gt; {\\\\n    fetchContent();\\\\n  }, []);\\\\n\\\\n  const fetchContent = async () =&amp;amp;gt; {\\\\n    setIsLoading(true);\\\\n    try {\\\\n      const response = await fetch('/api/deck-content');\\\\n      const data = await response.json();\\\\n      setContent(data);\\\\n      // Initialize history with loaded content\\\\n      setHistory([data]);\\\\n      setHistoryIndex(0);\\\\n    } catch (error) {\\\\n      console.error('Failed to fetch content:', error);\\\\n    } finally {\\\\n      setIsLoading(false);\\\\n    }\\\\n  };\\\\n\\\\n  // Push new state to history\\\\n  const pushToHistory = useCallback((newContent: DeckContent) =&amp;amp;gt; {\\\\n    if (isUndoRedo.current) {\\\\n      isUndoRedo.current = false;\\\\n      return;\\\\n    }\\\\n    \\\\n    setHistory(prev =&amp;amp;gt; {\\\\n      // Remove any future states if we're not at the end\\\\n      const newHistory = prev.slice(0, historyIndex + 1);\\\\n      // Add new state\\\\n      newHistory.push(newContent);\\\\n      // Limit history size\\\\n      if (newHistory.length &amp;amp;gt; MAX_HISTORY) {\\\\n        newHistory.shift();\\\\n        return newHistory;\\\\n      }\\\\n      return newHistory;\\\\n    });\\\\n    setHistoryIndex(prev =&amp;amp;gt; Math.min(prev + 1, MAX_HISTORY - 1));\\\\n  }, [historyIndex]);\\\\n\\\\n  // Undo function\\\\n  const undo = useCallback(() =&amp;amp;gt; {\\\\n    if (historyIndex &amp;amp;gt; 0) {\\\\n      isUndoRedo.current = true;\\\\n      const newIndex = historyIndex - 1;\\\\n      setHistoryIndex(newIndex);\\\\n      setContent(history[newIndex]);\\\\n      setHasChanges(true);\\\\n    }\\\\n  }, [historyIndex, history]);\\\\n\\\\n  // Redo function\\\\n  const redo = useCallback(() =&amp;amp;gt; {\\\\n    if (historyIndex &amp;amp;lt; history.length - 1) {\\\\n      isUndoRedo.current = true;\\\\n      const newIndex = historyIndex + 1;\\\\n      setHistoryIndex(newIndex);\\\\n      setContent(history[newIndex]);\\\\n      setHasChanges(true);\\\\n    }\\\\n  }, [historyIndex, history]);\\\\n\\\\n  const canUndo = historyIndex &amp;amp;gt; 0;\\\\n  const canRedo = historyIndex &amp;amp;lt; history.length - 1;\\\\n\\\\n  const saveContent = async () =&amp;amp;gt; {\\\\n    if (!content) return;\\\\n    setIsSaving(true);\\\\n    try {\\\\n      const response = await fetch('/api/deck-content', {\\\\n        method: 'PUT',\\\\n        headers: { 'Content-Type': 'application/json' },\\\\n        body: JSON.stringify(content),\\\\n      });\\\\n      if (response.ok) {\\\\n        setHasChanges(false);\\\\n        alert('Content saved successfully!');\\\\n      }\\\\n    } catch (error) {\\\\n      console.error('Failed to save content:', error);\\\\n      alert('Failed to save content');\\\\n    } finally {\\\\n      setIsSaving(false);\\\\n    }\\\\n  };\\\\n\\\\n  const resetContent = async () =&amp;amp;gt; {\\\\n    if (!confirm('Reset all content to defaults? This cannot be undone.')) return;\\\\n    try {\\\\n      const response = await fetch('/api/deck-content', { method: 'DELETE' });\\\\n      const data = await response.json();\\\\n      setContent(data);\\\\n      setHistory([data]);\\\\n      setHistoryIndex(0);\\\\n      setHasChanges(false);\\\\n    } catch (error) {\\\\n      console.error('Failed to reset content:', error);\\\\n    }\\\\n  };\\\\n\\\\n  const updateCover = (field: keyof DeckContent['cover'], value: string) =&amp;amp;gt; {\\\\n    if (!content) return;\\\\n    const newContent = { ...content, cover: { ...content.cover, [field]: value } };\\\\n    setContent(newContent);\\\\n    pushToHistory(newContent);\\\\n    setHasChanges(true);\\\\n  };\\\\n\\\\n  const updateSlide = (index: number, updates: Partial&amp;amp;lt;SlideContent&amp;amp;gt;) =&amp;amp;gt; {\\\\n    if (!content) return;\\\\n    const newSlides = [...content.slides];\\\\n    newSlides[index] = { ...newSlides[index], ...updates };\\\\n    const newContent = { ...content, slides: newSlides };\\\\n    setContent(newContent);\\\\n    pushToHistory(newContent);\\\\n    setHasChanges(true);\\\\n  };\\\\n\\\\n  const updateSlideSection = (slideIndex: number, sectionIndex: number, updates: Partial&amp;amp;lt;SlideContent['sections'][0]&amp;amp;gt;) =&amp;amp;gt; {\\\\n    if (!content) return;\\\\n    const newSlides = [...content.slides];\\\\n    const newSections = [...(newSlides[slideIndex].sections || [])];\\\\n    newSections[sectionIndex] = { ...newSections[sectionIndex], ...updates };\\\\n    newSlides[slideIndex] = { ...newSlides[slideIndex], sections: newSections };\\\\n    const newContent = { ...content, slides: newSlides };\\\\n    setContent(newContent);\\\\n    pushToHistory(newContent);\\\\n    setHasChanges(true);\\\\n  };\\\\n\\\\n  const updateSectionItems = (slideIndex: number, sectionIndex: number, items: string[]) =&amp;amp;gt; {\\\\n    updateSlideSection(slideIndex, sectionIndex, { items });\\\\n  };\\\\n\\\\n  const addSectionItem = (slideIndex: number, sectionIndex: number) =&amp;amp;gt; {\\\\n    if (!content) return;\\\\n    const currentItems = content.slides[slideIndex].sections?.[sectionIndex]?.items || [];\\\\n    updateSectionItems(slideIndex, sectionIndex, [...currentItems, '']);\\\\n  };\\\\n\\\\n  const removeSectionItem = (slideIndex: number, sectionIndex: number, itemIndex: number) =&amp;amp;gt; {\\\\n    if (!content) return;\\\\n    const currentItems = content.slides[slideIndex].sections?.[sectionIndex]?.items || [];\\\\n    updateSectionItems(slideIndex, sectionIndex, currentItems.filter((_, i) =&amp;amp;gt; i !== itemIndex));\\\\n  };\\\\n\\\\n  const updateAsk = (field: 'amount' | 'items', value: string | string[]) =&amp;amp;gt; {\\\\n    if (!content) return;\\\\n    const newContent = { ...content, ask: { ...content.ask, [field]: value } };\\\\n    setContent(newContent);\\\\n    pushToHistory(newContent);\\\\n    setHasChanges(true);\\\\n  };\\\\n\\\\n  const toggleSlide = (slideId: string) =&amp;amp;gt; {\\\\n    const newExpanded = new Set(expandedSlides);\\\\n    if (newExpanded.has(slideId)) {\\\\n      newExpanded.delete(slideId);\\\\n    } else {\\\\n      newExpanded.add(slideId);\\\\n    }\\\\n    setExpandedSlides(newExpanded);\\\\n  };\\\\n\\\\n  const updateSlideImage = (slideIndex: number, image: SlideImage | undefined) =&amp;amp;gt; {\\\\n    if (!content) return;\\\\n    const newSlides = [...content.slides];\\\\n    newSlides[slideIndex] = { ...newSlides[slideIndex], image };\\\\n    const newContent = { ...content, slides: newSlides };\\\\n    setContent(newContent);\\\\n    pushToHistory(newContent);\\\\n    setHasChanges(true);\\\\n  };\\\\n\\\\n  const handleImageDrop = async (slideIndex: number, e: React.DragEvent&amp;amp;lt;HTMLDivElement&amp;amp;gt;) =&amp;amp;gt; {\\\\n    e.preventDefault();\\\\n    const file = e.dataTransfer.files[0];\\\\n    if (!file || !file.type.startsWith('image/')) return;\\\\n    \\\\n    // Convert to base64 for now (in production, upload to storage)\\\\n    const reader = new FileReader();\\\\n    reader.onload = () =&amp;amp;gt; {\\\\n      const currentImage = content?.slides[slideIndex]?.image;\\\\n      updateSlideImage(slideIndex, {\\\\n        ...currentImage,\\\\n        type: currentImage?.type || 'infographic',\\\\n        url: reader.result as string,\\\\n        placeholder: currentImage?.placeholder,\\\\n      });\\\\n    };\\\\n    reader.readAsDataURL(file);\\\\n  };\\\\n\\\\n  const handleImageUpload = async (slideIndex: number, e: React.ChangeEvent&amp;amp;lt;HTMLInputElement&amp;amp;gt;) =&amp;amp;gt; {\\\\n    const file = e.target.files?.[0];\\\\n    if (!file || !file.type.startsWith('image/')) return;\\\\n    \\\\n    const reader = new FileReader();\\\\n    reader.onload = () =&amp;amp;gt; {\\\\n      const currentImage = content?.slides[slideIndex]?.image;\\\\n      updateSlideImage(slideIndex, {\\\\n        ...currentImage,\\\\n        type: currentImage?.type || 'infographic',\\\\n        url: reader.result as string,\\\\n        placeholder: currentImage?.placeholder,\\\\n      });\\\\n    };\\\\n    reader.readAsDataURL(file);\\\\n  };\\\\n\\\\n  const removeSlideImage = (slideIndex: number) =&amp;amp;gt; {\\\\n    if (!content) return;\\\\n    const currentImage = content.slides[slideIndex]?.image;\\\\n    if (currentImage) {\\\\n      updateSlideImage(slideIndex, { ...currentImage, url: undefined });\\\\n    }\\\\n  };\\\\n\\\\n  if (isLoading) {\\\\n    return (\\\\n      &amp;amp;lt;div className=\\\\\\\"min-h-screen bg-gray-950 text-white flex items-center justify-center\\\\\\\"&amp;amp;gt;\\\\n        &amp;amp;lt;Loader2 className=\\\\\\\"w-8 h-8 animate-spin\\\\\\\" /&amp;amp;gt;\\\\n      &amp;amp;lt;/div&amp;amp;gt;\\\\n    );\\\\n  }\\\\n\\\\n  if (!content) {\\\\n    return (\\\\n      &amp;amp;lt;div className=\\\\\\\"min-h-screen bg-gray-950 text-white flex items-center justify-center\\\\\\\"&amp;amp;gt;\\\\n        &amp;amp;lt;p&amp;amp;gt;Failed to load content&amp;amp;lt;/p&amp;amp;gt;\\\\n      &amp;amp;lt;/div&amp;amp;gt;\\\\n    );\\\\n  }\\\\n\\\\n  return (\\\\n    &amp;amp;lt;div className=\\\\\\\"min-h-screen bg-gray-950 text-white\\\\\\\"&amp;amp;gt;\\\\n      {/* Header */}\\\\n      &amp;amp;lt;div className=\\\\\\\"sticky top-0 z-10 bg-gray-900 border-b border-gray-800\\\\\\\"&amp;amp;gt;\\\\n        &amp;amp;lt;div className=\\\\\\\"container px-4 py-4 flex items-center justify-between\\\\\\\"&amp;amp;gt;\\\\n          &amp;amp;lt;div className=\\\\\\\"flex items-center gap-4\\\\\\\"&amp;amp;gt;\\\\n            &amp;amp;lt;Link href=\\\\\\\"/admin\\\\\\\" className=\\\\\\\"text-gray-400 hover:text-white\\\\\\\"&amp;amp;gt;\\\\n              &amp;amp;lt;ArrowLeft className=\\\\\\\"w-5 h-5\\\\\\\" /&amp;amp;gt;\\\\n            &amp;amp;lt;/Link&amp;amp;gt;\\\\n            &amp;amp;lt;h1 className=\\\\\\\"text-xl font-bold\\\\\\\"&amp;amp;gt;Edit Pitch Deck&amp;amp;lt;/h1&amp;amp;gt;\\\\n            {hasChanges &amp;amp;amp;&amp;amp;amp; (\\\\n              &amp;amp;lt;span className=\\\\\\\"text-xs bg-yellow-600 px-2 py-1 rounded\\\\\\\"&amp;amp;gt;Unsaved changes&amp;amp;lt;/span&amp;amp;gt;\\\\n            )}\\\\n          &amp;amp;lt;/div&amp;amp;gt;\\\\n          \\\\n          &amp;amp;lt;div className=\\\\\\\"flex items-center gap-2\\\\\\\"&amp;amp;gt;\\\\n            &amp;amp;lt;Button\\\\n              onClick={undo}\\\\n              disabled={!canUndo}\\\\n              variant=\\\\\\\"outline\\\\\\\"\\\\n              size=\\\\\\\"sm\\\\\\\"\\\\n              className=\\\\\\\"border-gray-700 text-gray-300 disabled:opacity-30\\\\\\\"\\\\n              title=\\\\\\\"Undo (Cmd+Z)\\\\\\\"\\\\n            &amp;amp;gt;\\\\n              &amp;amp;lt;Undo2 className=\\\\\\\"w-4 h-4\\\\\\\" /&amp;amp;gt;\\\\n            &amp;amp;lt;/Button&amp;amp;gt;\\\\n            &amp;amp;lt;Button\\\\n              onClick={redo}\\\\n              disabled={!canRedo}\\\\n              variant=\\\\\\\"outline\\\\\\\"\\\\n              size=\\\\\\\"sm\\\\\\\"\\\\n              className=\\\\\\\"border-gray-700 text-gray-300 disabled:opacity-30\\\\\\\"\\\\n              title=\\\\\\\"Redo (Cmd+Shift+Z)\\\\\\\"\\\\n            &amp;amp;gt;\\\\n              &amp;amp;lt;Redo2 className=\\\\\\\"w-4 h-4\\\\\\\" /&amp;amp;gt;\\\\n            &amp;amp;lt;/Button&amp;amp;gt;\\\\n            &amp;amp;lt;div className=\\\\\\\"w-px h-6 bg-gray-700 mx-1\\\\\\\" /&amp;amp;gt;\\\\n            &amp;amp;lt;Button\\\\n              onClick={resetContent}\\\\n              variant=\\\\\\\"outline\\\\\\\"\\\\n              size=\\\\\\\"sm\\\\\\\"\\\\n              className=\\\\\\\"border-gray-700 text-gray-300\\\\\\\"\\\\n            &amp;amp;gt;\\\\n              &amp;amp;lt;RotateCcw className=\\\\\\\"w-4 h-4 mr-2\\\\\\\" /&amp;amp;gt;\\\\n              Reset\\\\n            &amp;amp;lt;/Button&amp;amp;gt;\\\\n            &amp;amp;lt;Link href=\\\\\\\"/deck\\\\\\\" target=\\\\\\\"_blank\\\\\\\"&amp;amp;gt;\\\\n              &amp;amp;lt;Button variant=\\\\\\\"outline\\\\\\\" size=\\\\\\\"sm\\\\\\\" className=\\\\\\\"border-gray-700 text-gray-300\\\\\\\"&amp;amp;gt;\\\\n                &amp;amp;lt;Eye className=\\\\\\\"w-4 h-4 mr-2\\\\\\\" /&amp;amp;gt;\\\\n                Preview\\\\n              &amp;amp;lt;/Button&amp;amp;gt;\\\\n            &amp;amp;lt;/Link&amp;amp;gt;\\\\n            &amp;amp;lt;Button\\\\n              onClick={saveContent}\\\\n              disabled={isSaving || !hasChanges}\\\\n              size=\\\\\\\"sm\\\\\\\"\\\\n              className=\\\\\\\"bg-white text-black hover:bg-gray-200\\\\\\\"\\\\n            &amp;amp;gt;\\\\n              {isSaving ? &amp;amp;lt;Loader2 className=\\\\\\\"w-4 h-4 mr-2 animate-spin\\\\\\\" /&amp;amp;gt; : &amp;amp;lt;Save className=\\\\\\\"w-4 h-4 mr-2\\\\\\\" /&amp;amp;gt;}\\\\n              Save\\\\n            &amp;amp;lt;/Button&amp;amp;gt;\\\\n          &amp;amp;lt;/div&amp;amp;gt;\\\\n        &amp;amp;lt;/div&amp;amp;gt;\\\\n      &amp;amp;lt;/div&amp;amp;gt;\\\\n\\\\n      &amp;amp;lt;div className=\\\\\\\"container px-4 py-8 max-w-4xl\\\\\\\"&amp;amp;gt;\\\\n        {/* Cover Section */}\\\\n        &amp;amp;lt;section className=\\\\\\\"mb-8\\\\\\\"&amp;amp;gt;\\\\n          &amp;amp;lt;h2 className=\\\\\\\"text-lg font-semibold mb-4 text-gray-300\\\\\\\"&amp;amp;gt;Slides&amp;amp;lt;/h2&amp;amp;gt;\\\\n          &amp;amp;lt;div className=\\\\\\\"bg-gray-900 rounded-lg overflow-hidden mb-2\\\\\\\"&amp;amp;gt;\\\\n            &amp;amp;lt;button\\\\n              onClick={() =&amp;amp;gt; toggleSlide('cover')}\\\\n              className=\\\\\\\"w-full px-4 py-3 flex items-center justify-between hover:bg-gray-800 transition-colors\\\\\\\"\\\\n            &amp;amp;gt;\\\\n              &amp;amp;lt;span className=\\\\\\\"font-medium\\\\\\\"&amp;amp;gt;1. Cover Slide&amp;amp;lt;/span&amp;amp;gt;\\\\n              {expandedSlides.has('cover') ? (\\\\n                &amp;amp;lt;ChevronDown className=\\\\\\\"w-5 h-5 text-gray-400\\\\\\\" /&amp;amp;gt;\\\\n              ) : (\\\\n                &amp;amp;lt;ChevronRight className=\\\\\\\"w-5 h-5 text-gray-400\\\\\\\" /&amp;amp;gt;\\\\n              )}\\\\n            &amp;amp;lt;/button&amp;amp;gt;\\\\n            \\\\n            {expandedSlides.has('cover') &amp;amp;amp;&amp;amp;amp; (\\\\n              &amp;amp;lt;div className=\\\\\\\"px-4 pb-4 space-y-4 border-t border-gray-800\\\\\\\"&amp;amp;gt;\\\\n                &amp;amp;lt;div className=\\\\\\\"pt-4\\\\\\\"&amp;amp;gt;\\\\n                  &amp;amp;lt;label className=\\\\\\\"block text-sm text-gray-400 mb-1\\\\\\\"&amp;amp;gt;Title&amp;amp;lt;/label&amp;amp;gt;\\\\n                  &amp;amp;lt;input\\\\n                    type=\\\\\\\"text\\\\\\\"\\\\n                    value={content.cover.title}\\\\n                    onChange={(e) =&amp;amp;gt; updateCover('title', e.target.value)}\\\\n                    className=\\\\\\\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\\\\\\\"\\\\n                  /&amp;amp;gt;\\\\n                &amp;amp;lt;/div&amp;amp;gt;\\\\n                &amp;amp;lt;div&amp;amp;gt;\\\\n                  &amp;amp;lt;label className=\\\\\\\"block text-sm text-gray-400 mb-1\\\\\\\"&amp;amp;gt;Tagline&amp;amp;lt;/label&amp;amp;gt;\\\\n                  &amp;amp;lt;textarea\\\\n                    value={content.cover.tagline}\\\\n                    onChange={(e) =&amp;amp;gt; updateCover('tagline', e.target.value)}\\\\n                    rows={2}\\\\n                    className=\\\\\\\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\\\\\\\"\\\\n                  /&amp;amp;gt;\\\\n                &amp;amp;lt;/div&amp;amp;gt;\\\\n                &amp;amp;lt;div&amp;amp;gt;\\\\n                  &amp;amp;lt;label className=\\\\\\\"block text-sm text-gray-400 mb-1\\\\\\\"&amp;amp;gt;Subtagline&amp;amp;lt;/label&amp;amp;gt;\\\\n                  &amp;amp;lt;input\\\\n                    type=\\\\\\\"text\\\\\\\"\\\\n                    value={content.cover.subtagline}\\\\n                    onChange={(e) =&amp;amp;gt; updateCover('subtagline', e.target.value)}\\\\n                    className=\\\\\\\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\\\\\\\"\\\\n                  /&amp;amp;gt;\\\\n                &amp;amp;lt;/div&amp;amp;gt;\\\\n                &amp;amp;lt;div&amp;amp;gt;\\\\n                  &amp;amp;lt;label className=\\\\\\\"block text-sm text-gray-400 mb-1\\\\\\\"&amp;amp;gt;URL&amp;amp;lt;/label&amp;amp;gt;\\\\n                  &amp;amp;lt;input\\\\n                    type=\\\\\\\"text\\\\\\\"\\\\n                    value={content.cover.url}\\\\n                    onChange={(e) =&amp;amp;gt; updateCover('url', e.target.value)}\\\\n                    className=\\\\\\\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\\\\\\\"\\\\n                  /&amp;amp;gt;\\\\n                &amp;amp;lt;/div&amp;amp;gt;\\\\n              &amp;amp;lt;/div&amp;amp;gt;\\\\n            )}\\\\n          &amp;amp;lt;/div&amp;amp;gt;\\\\n\\\\n          {content.slides.map((slide, slideIndex) =&amp;amp;gt; (\\\\n              &amp;amp;lt;div key={slide.id} className=\\\\\\\"bg-gray-900 rounded-lg overflow-hidden\\\\\\\"&amp;amp;gt;\\\\n                &amp;amp;lt;button\\\\n                  onClick={() =&amp;amp;gt; toggleSlide(slide.id)}\\\\n                  className=\\\\\\\"w-full px-4 py-3 flex items-center justify-between hover:bg-gray-800 transition-colors\\\\\\\"\\\\n                &amp;amp;gt;\\\\n                  &amp;amp;lt;span className=\\\\\\\"font-medium\\\\\\\"&amp;amp;gt;\\\\n                    {slideIndex + 2}. {slide.title}\\\\n                  &amp;amp;lt;/span&amp;amp;gt;\\\\n                  {expandedSlides.has(slide.id) ? (\\\\n                    &amp;amp;lt;ChevronDown className=\\\\\\\"w-5 h-5 text-gray-400\\\\\\\" /&amp;amp;gt;\\\\n                  ) : (\\\\n                    &amp;amp;lt;ChevronRight className=\\\\\\\"w-5 h-5 text-gray-400\\\\\\\" /&amp;amp;gt;\\\\n                  )}\\\\n                &amp;amp;lt;/button&amp;amp;gt;\\\\n                \\\\n                {expandedSlides.has(slide.id) &amp;amp;amp;&amp;amp;amp; (\\\\n                  &amp;amp;lt;div className=\\\\\\\"px-4 pb-4 space-y-4 border-t border-gray-800\\\\\\\"&amp;amp;gt;\\\\n                    &amp;amp;lt;div className=\\\\\\\"pt-4\\\\\\\"&amp;amp;gt;\\\\n                      &amp;amp;lt;label className=\\\\\\\"block text-sm text-gray-400 mb-1\\\\\\\"&amp;amp;gt;Title&amp;amp;lt;/label&amp;amp;gt;\\\\n                      &amp;amp;lt;input\\\\n                        type=\\\\\\\"text\\\\\\\"\\\\n                        value={slide.title}\\\\n                        onChange={(e) =&amp;amp;gt; updateSlide(slideIndex, { title: e.target.value })}\\\\n                        className=\\\\\\\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\\\\\\\"\\\\n                      /&amp;amp;gt;\\\\n                    &amp;amp;lt;/div&amp;amp;gt;\\\\n                    \\\\n                    &amp;amp;lt;div&amp;amp;gt;\\\\n                      &amp;amp;lt;label className=\\\\\\\"block text-sm text-gray-400 mb-1\\\\\\\"&amp;amp;gt;Subtitle&amp;amp;lt;/label&amp;amp;gt;\\\\n                      &amp;amp;lt;input\\\\n                        type=\\\\\\\"text\\\\\\\"\\\\n                        value={slide.subtitle || ''}\\\\n                        onChange={(e) =&amp;amp;gt; updateSlide(slideIndex, { subtitle: e.target.value })}\\\\n                        className=\\\\\\\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\\\\\\\"\\\\n                      /&amp;amp;gt;\\\\n                    &amp;amp;lt;/div&amp;amp;gt;\\\\n\\\\n                    {/* Sections */}\\\\n                    {slide.sections?.map((section, sectionIndex) =&amp;amp;gt; (\\\\n                      &amp;amp;lt;div key={sectionIndex} className=\\\\\\\"bg-gray-800 rounded p-3 space-y-3\\\\\\\"&amp;amp;gt;\\\\n                        &amp;amp;lt;div&amp;amp;gt;\\\\n                          &amp;amp;lt;label className=\\\\\\\"block text-xs text-gray-500 mb-1\\\\\\\"&amp;amp;gt;Section Heading&amp;amp;lt;/label&amp;amp;gt;\\\\n                          &amp;amp;lt;input\\\\n                            type=\\\\\\\"text\\\\\\\"\\\\n                            value={section.heading || ''}\\\\n                            onChange={(e) =&amp;amp;gt; updateSlideSection(slideIndex, sectionIndex, { heading: e.target.value })}\\\\n                            className=\\\\\\\"w-full bg-gray-700 border border-gray-600 rounded px-2 py-1 text-sm text-white\\\\\\\"\\\\n                          /&amp;amp;gt;\\\\n                        &amp;amp;lt;/div&amp;amp;gt;\\\\n                        \\\\n                        {section.text !== undefined &amp;amp;amp;&amp;amp;amp; (\\\\n                          &amp;amp;lt;div&amp;amp;gt;\\\\n                            &amp;amp;lt;label className=\\\\\\\"block text-xs text-gray-500 mb-1\\\\\\\"&amp;amp;gt;Text&amp;amp;lt;/label&amp;amp;gt;\\\\n                            &amp;amp;lt;textarea\\\\n                              value={section.text}\\\\n                              onChange={(e) =&amp;amp;gt; updateSlideSection(slideIndex, sectionIndex, { text: e.target.value })}\\\\n                              rows={2}\\\\n                              className=\\\\\\\"w-full bg-gray-700 border border-gray-600 rounded px-2 py-1 text-sm text-white\\\\\\\"\\\\n                            /&amp;amp;gt;\\\\n                          &amp;amp;lt;/div&amp;amp;gt;\\\\n                        )}\\\\n                        \\\\n                        {section.items &amp;amp;amp;&amp;amp;amp; (\\\\n                          &amp;amp;lt;div&amp;amp;gt;\\\\n                            &amp;amp;lt;label className=\\\\\\\"block text-xs text-gray-500 mb-1\\\\\\\"&amp;amp;gt;Bullet Points&amp;amp;lt;/label&amp;amp;gt;\\\\n                            {section.items.map((item, itemIndex) =&amp;amp;gt; (\\\\n                              &amp;amp;lt;div key={itemIndex} className=\\\\\\\"flex gap-2 mb-1\\\\\\\"&amp;amp;gt;\\\\n                                &amp;amp;lt;input\\\\n                                  type=\\\\\\\"text\\\\\\\"\\\\n                                  value={item}\\\\n                                  onChange={(e) =&amp;amp;gt; {\\\\n                                    const newItems = [...section.items!];\\\\n                                    newItems[itemIndex] = e.target.value;\\\\n                                    updateSectionItems(slideIndex, sectionIndex, newItems);\\\\n                                  }}\\\\n                                  className=\\\\\\\"flex-1 bg-gray-700 border border-gray-600 rounded px-2 py-1 text-sm text-white\\\\\\\"\\\\n                                /&amp;amp;gt;\\\\n                                &amp;amp;lt;button\\\\n                                  onClick={() =&amp;amp;gt; removeSectionItem(slideIndex, sectionIndex, itemIndex)}\\\\n                                  className=\\\\\\\"text-red-400 hover:text-red-300 p-1\\\\\\\"\\\\n                                &amp;amp;gt;\\\\n                                  &amp;amp;lt;Trash2 className=\\\\\\\"w-4 h-4\\\\\\\" /&amp;amp;gt;\\\\n                                &amp;amp;lt;/button&amp;amp;gt;\\\\n                              &amp;amp;lt;/div&amp;amp;gt;\\\\n                            ))}\\\\n                            &amp;amp;lt;button\\\\n                              onClick={() =&amp;amp;gt; addSectionItem(slideIndex, sectionIndex)}\\\\n                              className=\\\\\\\"text-xs text-gray-400 hover:text-white flex items-center gap-1 mt-1\\\\\\\"\\\\n                            &amp;amp;gt;\\\\n                              &amp;amp;lt;Plus className=\\\\\\\"w-3 h-3\\\\\\\" /&amp;amp;gt; Add item\\\\n                            &amp;amp;lt;/button&amp;amp;gt;\\\\n                          &amp;amp;lt;/div&amp;amp;gt;\\\\n                        )}\\\\n                      &amp;amp;lt;/div&amp;amp;gt;\\\\n                    ))}\\\\n\\\\n                    {slide.highlight &amp;amp;amp;&amp;amp;amp; (\\\\n                      &amp;amp;lt;div&amp;amp;gt;\\\\n                        &amp;amp;lt;label className=\\\\\\\"block text-sm text-gray-400 mb-1\\\\\\\"&amp;amp;gt;Highlight Box&amp;amp;lt;/label&amp;amp;gt;\\\\n                        &amp;amp;lt;textarea\\\\n                          value={slide.highlight}\\\\n                          onChange={(e) =&amp;amp;gt; updateSlide(slideIndex, { highlight: e.target.value })}\\\\n                          rows={2}\\\\n                          className=\\\\\\\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\\\\\\\"\\\\n                        /&amp;amp;gt;\\\\n                      &amp;amp;lt;/div&amp;amp;gt;\\\\n                    )}\\\\n\\\\n                    {slide.footnote &amp;amp;amp;&amp;amp;amp; (\\\\n                      &amp;amp;lt;div&amp;amp;gt;\\\\n                        &amp;amp;lt;label className=\\\\\\\"block text-sm text-gray-400 mb-1\\\\\\\"&amp;amp;gt;Footnote&amp;amp;lt;/label&amp;amp;gt;\\\\n                        &amp;amp;lt;input\\\\n                          type=\\\\\\\"text\\\\\\\"\\\\n                          value={slide.footnote}\\\\n                          onChange={(e) =&amp;amp;gt; updateSlide(slideIndex, { footnote: e.target.value })}\\\\n                          className=\\\\\\\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\\\\\\\"\\\\n                        /&amp;amp;gt;\\\\n                      &amp;amp;lt;/div&amp;amp;gt;\\\\n                    )}\\\\n\\\\n                    {/* Image Section */}\\\\n                    &amp;amp;lt;div className=\\\\\\\"border-t border-gray-700 pt-4 mt-4\\\\\\\"&amp;amp;gt;\\\\n                      &amp;amp;lt;label className=\\\\\\\"block text-sm text-gray-400 mb-2\\\\\\\"&amp;amp;gt;Slide Image&amp;amp;lt;/label&amp;amp;gt;\\\\n                      \\\\n                      {slide.image?.url ? (\\\\n                        &amp;amp;lt;div className=\\\\\\\"relative\\\\\\\"&amp;amp;gt;\\\\n                          &amp;amp;lt;div className=\\\\\\\"relative w-full h-48 bg-gray-800 rounded-lg overflow-hidden\\\\\\\"&amp;amp;gt;\\\\n                            &amp;amp;lt;img\\\\n                              src={slide.image.url}\\\\n                              alt={slide.image.placeholder || 'Slide image'}\\\\n                              className=\\\\\\\"w-full h-full object-contain\\\\\\\"\\\\n                            /&amp;amp;gt;\\\\n                          &amp;amp;lt;/div&amp;amp;gt;\\\\n                          &amp;amp;lt;button\\\\n                            onClick={() =&amp;amp;gt; removeSlideImage(slideIndex)}\\\\n                            className=\\\\\\\"absolute top-2 right-2 bg-red-600 hover:bg-red-700 text-white p-1 rounded\\\\\\\"\\\\n                          &amp;amp;gt;\\\\n                            &amp;amp;lt;Trash2 className=\\\\\\\"w-4 h-4\\\\\\\" /&amp;amp;gt;\\\\n                          &amp;amp;lt;/button&amp;amp;gt;\\\\n                          &amp;amp;lt;p className=\\\\\\\"text-xs text-gray-500 mt-1\\\\\\\"&amp;amp;gt;{slide.image.placeholder}&amp;amp;lt;/p&amp;amp;gt;\\\\n                        &amp;amp;lt;/div&amp;amp;gt;\\\\n                      ) : (\\\\n                        &amp;amp;lt;div\\\\n                          onDrop={(e) =&amp;amp;gt; handleImageDrop(slideIndex, e)}\\\\n                          onDragOver={(e) =&amp;amp;gt; e.preventDefault()}\\\\n                          className=\\\\\\\"border-2 border-dashed border-gray-600 rounded-lg p-6 text-center hover:border-gray-500 transition-colors\\\\\\\"\\\\n                        &amp;amp;gt;\\\\n                          &amp;amp;lt;ImageIcon className=\\\\\\\"w-12 h-12 mx-auto text-gray-500 mb-3\\\\\\\" /&amp;amp;gt;\\\\n                          &amp;amp;lt;p className=\\\\\\\"text-sm text-gray-400 mb-2\\\\\\\"&amp;amp;gt;\\\\n                            {slide.image?.placeholder || 'Drag &amp;amp;amp; drop image here'}\\\\n                          &amp;amp;lt;/p&amp;amp;gt;\\\\n                          &amp;amp;lt;p className=\\\\\\\"text-xs text-gray-500 mb-3\\\\\\\"&amp;amp;gt;\\\\n                            Type: {slide.image?.type || 'Not set'}\\\\n                          &amp;amp;lt;/p&amp;amp;gt;\\\\n                          &amp;amp;lt;label className=\\\\\\\"cursor-pointer\\\\\\\"&amp;amp;gt;\\\\n                            &amp;amp;lt;span className=\\\\\\\"inline-flex items-center gap-2 px-3 py-1.5 bg-gray-700 hover:bg-gray-600 rounded text-sm text-white\\\\\\\"&amp;amp;gt;\\\\n                              &amp;amp;lt;Upload className=\\\\\\\"w-4 h-4\\\\\\\" /&amp;amp;gt;\\\\n                              Upload Image\\\\n                            &amp;amp;lt;/span&amp;amp;gt;\\\\n                            &amp;amp;lt;input\\\\n                              type=\\\\\\\"file\\\\\\\"\\\\n                              accept=\\\\\\\"image/*\\\\\\\"\\\\n                              onChange={(e) =&amp;amp;gt; handleImageUpload(slideIndex, e)}\\\\n                              className=\\\\\\\"hidden\\\\\\\"\\\\n                            /&amp;amp;gt;\\\\n                          &amp;amp;lt;/label&amp;amp;gt;\\\\n                        &amp;amp;lt;/div&amp;amp;gt;\\\\n                      )}\\\\n                      \\\\n                      &amp;amp;lt;div className=\\\\\\\"mt-2\\\\\\\"&amp;amp;gt;\\\\n                        &amp;amp;lt;label className=\\\\\\\"block text-xs text-gray-500 mb-1\\\\\\\"&amp;amp;gt;Image Description (for AI generation)&amp;amp;lt;/label&amp;amp;gt;\\\\n                        &amp;amp;lt;input\\\\n                          type=\\\\\\\"text\\\\\\\"\\\\n                          value={slide.image?.placeholder || ''}\\\\n                          onChange={(e) =&amp;amp;gt; updateSlideImage(slideIndex, {\\\\n                            ...slide.image,\\\\n                            type: slide.image?.type || 'infographic',\\\\n                            placeholder: e.target.value,\\\\n                          })}\\\\n                          placeholder=\\\\\\\"Describe the image you want...\\\\\\\"\\\\n                          className=\\\\\\\"w-full bg-gray-700 border border-gray-600 rounded px-2 py-1 text-sm text-white\\\\\\\"\\\\n                        /&amp;amp;gt;\\\\n                      &amp;amp;lt;/div&amp;amp;gt;\\\\n                      \\\\n                      &amp;amp;lt;div className=\\\\\\\"mt-2\\\\\\\"&amp;amp;gt;\\\\n                        &amp;amp;lt;label className=\\\\\\\"block text-xs text-gray-500 mb-1\\\\\\\"&amp;amp;gt;Image Type&amp;amp;lt;/label&amp;amp;gt;\\\\n                        &amp;amp;lt;select\\\\n                          value={slide.image?.type || 'infographic'}\\\\n                          onChange={(e) =&amp;amp;gt; updateSlideImage(slideIndex, {\\\\n                            ...slide.image,\\\\n                            type: e.target.value as SlideImage['type'],\\\\n                            placeholder: slide.image?.placeholder,\\\\n                          })}\\\\n                          className=\\\\\\\"w-full bg-gray-700 border border-gray-600 rounded px-2 py-1 text-sm text-white\\\\\\\"\\\\n                        &amp;amp;gt;\\\\n                          &amp;amp;lt;option value=\\\\\\\"icon\\\\\\\"&amp;amp;gt;Icon&amp;amp;lt;/option&amp;amp;gt;\\\\n                          &amp;amp;lt;option value=\\\\\\\"chart\\\\\\\"&amp;amp;gt;Chart&amp;amp;lt;/option&amp;amp;gt;\\\\n                          &amp;amp;lt;option value=\\\\\\\"mockup\\\\\\\"&amp;amp;gt;Mockup&amp;amp;lt;/option&amp;amp;gt;\\\\n                          &amp;amp;lt;option value=\\\\\\\"infographic\\\\\\\"&amp;amp;gt;Infographic&amp;amp;lt;/option&amp;amp;gt;\\\\n                          &amp;amp;lt;option value=\\\\\\\"photo\\\\\\\"&amp;amp;gt;Photo&amp;amp;lt;/option&amp;amp;gt;\\\\n                          &amp;amp;lt;option value=\\\\\\\"diagram\\\\\\\"&amp;amp;gt;Diagram&amp;amp;lt;/option&amp;amp;gt;\\\\n                        &amp;amp;lt;/select&amp;amp;gt;\\\\n                      &amp;amp;lt;/div&amp;amp;gt;\\\\n                    &amp;amp;lt;/div&amp;amp;gt;\\\\n                  &amp;amp;lt;/div&amp;amp;gt;\\\\n                )}\\\\n              &amp;amp;lt;/div&amp;amp;gt;\\\\n            ))}\\\\n        &amp;amp;lt;/section&amp;amp;gt;\\\\n\\\\n        {/* Ask Section */}\\\\n        &amp;amp;lt;section className=\\\\\\\"mb-8\\\\\\\"&amp;amp;gt;\\\\n          &amp;amp;lt;h2 className=\\\\\\\"text-lg font-semibold mb-4 text-gray-300\\\\\\\"&amp;amp;gt;The Ask&amp;amp;lt;/h2&amp;amp;gt;\\\\n          &amp;amp;lt;div className=\\\\\\\"bg-gray-900 rounded-lg p-4 space-y-4\\\\\\\"&amp;amp;gt;\\\\n            &amp;amp;lt;div&amp;amp;gt;\\\\n              &amp;amp;lt;label className=\\\\\\\"block text-sm text-gray-400 mb-1\\\\\\\"&amp;amp;gt;Amount&amp;amp;lt;/label&amp;amp;gt;\\\\n              &amp;amp;lt;input\\\\n                type=\\\\\\\"text\\\\\\\"\\\\n                value={content.ask.amount}\\\\n                onChange={(e) =&amp;amp;gt; updateAsk('amount', e.target.value)}\\\\n                className=\\\\\\\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\\\\\\\"\\\\n              /&amp;amp;gt;\\\\n            &amp;amp;lt;/div&amp;amp;gt;\\\\n            &amp;amp;lt;div&amp;amp;gt;\\\\n              &amp;amp;lt;label className=\\\\\\\"block text-sm text-gray-400 mb-1\\\\\\\"&amp;amp;gt;What we'll do with the funding&amp;amp;lt;/label&amp;amp;gt;\\\\n              {content.ask.items.map((item, index) =&amp;amp;gt; (\\\\n                &amp;amp;lt;div key={index} className=\\\\\\\"flex gap-2 mb-2\\\\\\\"&amp;amp;gt;\\\\n                  &amp;amp;lt;input\\\\n                    type=\\\\\\\"text\\\\\\\"\\\\n                    value={item}\\\\n                    onChange={(e) =&amp;amp;gt; {\\\\n                      const newItems = [...content.ask.items];\\\\n                      newItems[index] = e.target.value;\\\\n                      updateAsk('items', newItems);\\\\n                    }}\\\\n                    className=\\\\\\\"flex-1 bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\\\\\\\"\\\\n                  /&amp;amp;gt;\\\\n                  &amp;amp;lt;button\\\\n                    onClick={() =&amp;amp;gt; {\\\\n                      const newItems = content.ask.items.filter((_, i) =&amp;amp;gt; i !== index);\\\\n                      updateAsk('items', newItems);\\\\n                    }}\\\\n                    className=\\\\\\\"text-red-400 hover:text-red-300 p-2\\\\\\\"\\\\n                  &amp;amp;gt;\\\\n                    &amp;amp;lt;Trash2 className=\\\\\\\"w-4 h-4\\\\\\\" /&amp;amp;gt;\\\\n                  &amp;amp;lt;/button&amp;amp;gt;\\\\n                &amp;amp;lt;/div&amp;amp;gt;\\\\n              ))}\\\\n              &amp;amp;lt;button\\\\n                onClick={() =&amp;amp;gt; updateAsk('items', [...content.ask.items, ''])}\\\\n                className=\\\\\\\"text-sm text-gray-400 hover:text-white flex items-center gap-1\\\\\\\"\\\\n              &amp;amp;gt;\\\\n                &amp;amp;lt;Plus className=\\\\\\\"w-4 h-4\\\\\\\" /&amp;amp;gt; Add item\\\\n              &amp;amp;lt;/button&amp;amp;gt;\\\\n            &amp;amp;lt;/div&amp;amp;gt;\\\\n          &amp;amp;lt;/div&amp;amp;gt;\\\\n        &amp;amp;lt;/section&amp;amp;gt;\\\\n      &amp;amp;lt;/div&amp;amp;gt;\\\\n    &amp;amp;lt;/div&amp;amp;gt;\\\\n  );\\\\n}\\\\n\\\\n\\\",\""
                },
                {
                  "lineNumber": 3936,
                  "content": "                  \"content\": \"+ import { getDeckContent, updateDeckContent, resetDeckContent, DeckContent } from '@/lib/deck-content';\""
                },
                {
                  "lineNumber": 3984,
                  "content": "                  \"content\": \"+ import { DeckContent, SlideContent } from '@/lib/deck-content';\""
                },
                {
                  "lineNumber": 4048,
                  "content": "                  \"content\": \"+ import { getDeckContent, DeckContent, SlideContent } from '@/lib/deck-content';\""
                },
                {
                  "lineNumber": 4636,
                  "content": "                  \"content\": \"- import { DeckContent, SlideContent } from '@/lib/deck-content';\""
                },
                {
                  "lineNumber": 4640,
                  "content": "                  \"content\": \"+ import { DeckContent, SlideContent, SlideImage } from '@/lib/deck-content';\""
                },
                {
                  "lineNumber": 4856,
                  "content": "                  \"content\": \"  import { DeckContent, SlideContent, SlideImage } from '@/lib/deck-content';\""
                },
                {
                  "lineNumber": 5826,
                  "content": "  \"contents\": \"import React from 'react';\\nimport { Document, View, Text } from '@react-pdf/renderer';\\nimport { StyleSheet } from '@react-pdf/renderer';\\nimport { colors, fonts, fontSize, spacing } from './pdf-styles';\\nimport {\\n  Slide,\\n  Title,\\n  Heading,\\n  BulletList,\\n  Card,\\n  TwoColumn,\\n  BorderedSection,\\n  IconUsers,\\n  IconShield,\\n  IconBot,\\n  IconBox,\\n  TeamMember,\\n} from './pdf-components';\\nimport {\\n  EconomicsChart,\\n  ScalingDiagram,\\n  RoadmapTimeline,\\n  AgentWorkflowDiagram,\\n} from './pdf-charts';\\nimport {\\n  DirectorOSOverview,\\n} from './pdf-mockups';\\nimport { getDeckContent, DeckContent, SlideContent } from '@/lib/deck-content';\\n\\nconst localStyles = StyleSheet.create({\\n  coverCenter: {\\n    flex: 1,\\n    alignItems: 'center',\\n    justifyContent: 'center',\\n  },\\n  coverTitle: {\\n    fontFamily: fonts.heading,\\n    fontSize: 56,\\n    color: colors.white,\\n    marginBottom: spacing.md,\\n  },\\n  coverTagline: {\\n    fontFamily: fonts.body,\\n    fontSize: fontSize.subtitle,\\n    color: colors.gray[300],\\n    textAlign: 'center',\\n    maxWidth: 700,\\n    lineHeight: 1.4,\\n  },\\n  coverSubtagline: {\\n    fontFamily: fonts.body,\\n    fontSize: fontSize.body,\\n    color: colors.gray[400],\\n    textAlign: 'center',\\n    marginTop: spacing.md,\\n  },\\n  coverUrl: {\\n    fontFamily: fonts.body,\\n    fontSize: fontSize.body,\\n    color: colors.gray[500],\\n    marginTop: spacing.xxl,\\n  },\\n  contentArea: {\\n    flex: 1,\\n  },\\n  highlightBox: {\\n    backgroundColor: colors.gray[800],\\n    padding: spacing.md,\\n    borderRadius: 6,\\n    marginTop: spacing.md,\\n  },\\n  highlightText: {\\n    fontFamily: fonts.heading,\\n    fontSize: fontSize.body,\\n    color: colors.white,\\n    textAlign: 'center',\\n  },\\n  askBox: {\\n    backgroundColor: colors.gray[800],\\n    borderWidth: 2,\\n    borderColor: colors.white,\\n    padding: spacing.lg,\\n    borderRadius: 6,\\n    marginTop: spacing.md,\\n  },\\n  askTitle: {\\n    fontFamily: fonts.heading,\\n    fontSize: fontSize.heading,\\n    color: colors.white,\\n    marginBottom: spacing.sm,\\n  },\\n  askAmount: {\\n    fontFamily: fonts.heading,\\n    fontSize: 32,\\n    color: colors.white,\\n    marginBottom: spacing.sm,\\n  },\\n  sectionLabel: {\\n    fontFamily: fonts.body,\\n    fontSize: fontSize.tiny,\\n    color: colors.gray[500],\\n    marginBottom: spacing.xs,\\n    textTransform: 'uppercase',\\n  },\\n  bodyText: {\\n    fontFamily: fonts.body,\\n    fontSize: fontSize.body,\\n    color: colors.gray[300],\\n    lineHeight: 1.4,\\n    marginBottom: spacing.sm,\\n  },\\n  boldText: {\\n    fontFamily: fonts.heading,\\n    fontSize: fontSize.body,\\n    color: colors.white,\\n  },\\n  smallCard: {\\n    backgroundColor: colors.gray[800],\\n    borderRadius: 4,\\n    padding: spacing.sm,\\n    marginBottom: spacing.xs,\\n  },\\n  cardLabel: {\\n    fontFamily: fonts.body,\\n    fontSize: fontSize.tiny,\\n    color: colors.gray[400],\\n    marginBottom: 2,\\n  },\\n  cardValue: {\\n    fontFamily: fonts.heading,\\n    fontSize: fontSize.body,\\n    color: colors.white,\\n  },\\n  iconRow: {\\n    flexDirection: 'row',\\n    alignItems: 'center',\\n    marginBottom: spacing.xs,\\n    gap: spacing.sm,\\n  },\\n  teamGrid: {\\n    flexDirection: 'row',\\n    justifyContent: 'space-around',\\n    marginTop: spacing.md,\\n  },\\n  row: {\\n    flexDirection: 'row',\\n    gap: spacing.sm,\\n  },\\n  column: {\\n    flex: 1,\\n  },\\n});\\n\\n// Helper to render sections with items or text\\nfunction renderSections(sections: SlideContent['sections'], limit?: number) {\\n  const items = limit ? sections?.slice(0, limit) : sections;\\n  return items?.map((section, i) =&amp;gt; (\\n    &amp;lt;View key={i} style={{ marginBottom: spacing.sm }}&amp;gt;\\n      {section.heading &amp;amp;&amp;amp; &amp;lt;Heading level={3}&amp;gt;{section.heading}&amp;lt;/Heading&amp;gt;}\\n      {section.text &amp;amp;&amp;amp; &amp;lt;Text style={localStyles.bodyText}&amp;gt;{section.text}&amp;lt;/Text&amp;gt;}\\n      {section.items &amp;amp;&amp;amp; &amp;lt;BulletList items={section.items} /&amp;gt;}\\n    &amp;lt;/View&amp;gt;\\n  ));\\n}\\n\\n// Slide 1: Cover\\nfunction CoverSlide({ content }: { content: DeckContent }) {\\n  return (\\n    &amp;lt;Slide variant=\\\"dark\\\" pageNumber={1}&amp;gt;\\n      &amp;lt;View style={localStyles.coverCenter}&amp;gt;\\n        &amp;lt;Text style={localStyles.coverTitle}&amp;gt;{content.cover.title}&amp;lt;/Text&amp;gt;\\n        &amp;lt;Text style={localStyles.coverTagline}&amp;gt;{content.cover.tagline}&amp;lt;/Text&amp;gt;\\n        &amp;lt;Text style={localStyles.coverSubtagline}&amp;gt;{content.cover.subtagline}&amp;lt;/Text&amp;gt;\\n        &amp;lt;Text style={localStyles.coverUrl}&amp;gt;{content.cover.url}&amp;lt;/Text&amp;gt;\\n      &amp;lt;/View&amp;gt;\\n    &amp;lt;/Slide&amp;gt;\\n  );\\n}\\n\\n// Generic content slide\\nfunction ContentSlide({ slide, pageNumber, variant = 'dark' }: { slide: SlideContent; pageNumber: number; variant?: 'dark' | 'light' }) {\\n  return (\\n    &amp;lt;Slide variant={variant} pageNumber={pageNumber}&amp;gt;\\n      &amp;lt;Title subtitle={slide.subtitle}&amp;gt;{slide.title}&amp;lt;/Title&amp;gt;\\n      &amp;lt;View style={localStyles.contentArea}&amp;gt;\\n        {renderSections(slide.sections)}\\n        {slide.footnote &amp;amp;&amp;amp; &amp;lt;Text style={localStyles.bodyText}&amp;gt;{slide.footnote}&amp;lt;/Text&amp;gt;}\\n        {slide.highlight &amp;amp;&amp;amp; (\\n          &amp;lt;View style={localStyles.highlightBox}&amp;gt;\\n            &amp;lt;Text style={localStyles.highlightText}&amp;gt;{slide.highlight}&amp;lt;/Text&amp;gt;\\n          &amp;lt;/View&amp;gt;\\n        )}\\n      &amp;lt;/View&amp;gt;\\n    &amp;lt;/Slide&amp;gt;\\n  );\\n}\\n\\n// Two column slide\\nfunction TwoColumnSlide({ slide, pageNumber, variant = 'dark' }: { slide: SlideContent; pageNumber: number; variant?: 'dark' | 'light' }) {\\n  const leftSections = slide.sections?.slice(0, Math.ceil((slide.sections?.length || 0) / 2));\\n  const rightSections = slide.sections?.slice(Math.ceil((slide.sections?.length || 0) / 2));\\n  \\n  return (\\n    &amp;lt;Slide variant={variant} pageNumber={pageNumber}&amp;gt;\\n      &amp;lt;Title subtitle={slide.subtitle}&amp;gt;{slide.title}&amp;lt;/Title&amp;gt;\\n      &amp;lt;TwoColumn\\n        left={&amp;lt;View&amp;gt;{renderSections(leftSections)}&amp;lt;/View&amp;gt;}\\n        right={&amp;lt;View&amp;gt;{renderSections(rightSections)}&amp;lt;/View&amp;gt;}\\n      /&amp;gt;\\n      {slide.footnote &amp;amp;&amp;amp; &amp;lt;Text style={localStyles.bodyText}&amp;gt;{slide.footnote}&amp;lt;/Text&amp;gt;}\\n      {slide.highlight &amp;amp;&amp;amp; (\\n        &amp;lt;View style={localStyles.highlightBox}&amp;gt;\\n          &amp;lt;Text style={localStyles.highlightText}&amp;gt;{slide.highlight}&amp;lt;/Text&amp;gt;\\n        &amp;lt;/View&amp;gt;\\n      )}\\n    &amp;lt;/Slide&amp;gt;\\n  );\\n}\\n\\n// Director What We Are slide with icons\\nfunction DirectorWhatWeAreSlide({ slide, pageNumber }: { slide: SlideContent; pageNumber: number }) {\\n  return (\\n    &amp;lt;Slide variant=\\\"light\\\" pageNumber={pageNumber}&amp;gt;\\n      &amp;lt;Title subtitle={slide.subtitle}&amp;gt;{slide.title}&amp;lt;/Title&amp;gt;\\n      &amp;lt;TwoColumn\\n        left={\\n          &amp;lt;Card variant=\\\"bordered\\\"&amp;gt;\\n            &amp;lt;View style={localStyles.iconRow}&amp;gt;\\n              &amp;lt;IconBox icon={&amp;lt;IconShield size={20} /&amp;gt;} /&amp;gt;\\n              &amp;lt;Heading level={3}&amp;gt;{slide.sections?.[0]?.heading}&amp;lt;/Heading&amp;gt;\\n            &amp;lt;/View&amp;gt;\\n            {slide.sections?.[0]?.items &amp;amp;&amp;amp; &amp;lt;BulletList items={slide.sections[0].items} /&amp;gt;}\\n          &amp;lt;/Card&amp;gt;\\n        }\\n        right={\\n          &amp;lt;Card variant=\\\"bordered\\\"&amp;gt;\\n            &amp;lt;View style={localStyles.iconRow}&amp;gt;\\n              &amp;lt;IconBox icon={&amp;lt;IconUsers size={20} /&amp;gt;} /&amp;gt;\\n              &amp;lt;Heading level={3}&amp;gt;{slide.sections?.[1]?.heading}&amp;lt;/Heading&amp;gt;\\n            &amp;lt;/View&amp;gt;\\n            {slide.sections?.[1]?.items &amp;amp;&amp;amp; &amp;lt;BulletList items={slide.sections[1].items} /&amp;gt;}\\n          &amp;lt;/Card&amp;gt;\\n        }\\n      /&amp;gt;\\n      {slide.highlight &amp;amp;&amp;amp; (\\n        &amp;lt;View style={localStyles.highlightBox}&amp;gt;\\n          &amp;lt;Text style={localStyles.highlightText}&amp;gt;{slide.highlight}&amp;lt;/Text&amp;gt;\\n        &amp;lt;/View&amp;gt;\\n      )}\\n    &amp;lt;/Slide&amp;gt;\\n  );\\n}\\n\\n// Director Pod slide with scaling diagram\\nfunction DirectorPodSlide({ slide, pageNumber }: { slide: SlideContent; pageNumber: number }) {\\n  return (\\n    &amp;lt;Slide variant=\\\"light\\\" pageNumber={pageNumber}&amp;gt;\\n      &amp;lt;Title subtitle={slide.subtitle}&amp;gt;{slide.title}&amp;lt;/Title&amp;gt;\\n      &amp;lt;ScalingDiagram /&amp;gt;\\n      &amp;lt;View style={{ ...localStyles.row, marginTop: spacing.sm }}&amp;gt;\\n        {slide.sections?.map((section, i) =&amp;gt; (\\n          &amp;lt;Card key={i} variant=\\\"bordered\\\" style={localStyles.column}&amp;gt;\\n            &amp;lt;Heading level={3}&amp;gt;{section.heading}&amp;lt;/Heading&amp;gt;\\n            {section.items &amp;amp;&amp;amp; &amp;lt;BulletList items={section.items} /&amp;gt;}\\n            {section.text &amp;amp;&amp;amp; &amp;lt;Text style={localStyles.bodyText}&amp;gt;{section.text}&amp;lt;/Text&amp;gt;}\\n          &amp;lt;/Card&amp;gt;\\n        ))}\\n      &amp;lt;/View&amp;gt;\\n    &amp;lt;/Slide&amp;gt;\\n  );\\n}\\n\\n// Director OS slide with mockups\\nfunction DirectorOSSlide({ slide, pageNumber }: { slide: SlideContent; pageNumber: number }) {\\n  return (\\n    &amp;lt;Slide variant=\\\"dark\\\" pageNumber={pageNumber}&amp;gt;\\n      &amp;lt;Title subtitle={slide.subtitle}&amp;gt;{slide.title}&amp;lt;/Title&amp;gt;\\n      &amp;lt;DirectorOSOverview /&amp;gt;\\n      &amp;lt;View style={{ ...localStyles.row, marginTop: spacing.sm, flexWrap: 'wrap' }}&amp;gt;\\n        {slide.sections?.map((section, i) =&amp;gt; (\\n          &amp;lt;View key={i} style={{ ...localStyles.smallCard, width: '48%' }}&amp;gt;\\n            &amp;lt;Text style={localStyles.cardValue}&amp;gt;{section.heading}&amp;lt;/Text&amp;gt;\\n            &amp;lt;Text style={localStyles.cardLabel}&amp;gt;{section.text}&amp;lt;/Text&amp;gt;\\n          &amp;lt;/View&amp;gt;\\n        ))}\\n      &amp;lt;/View&amp;gt;\\n    &amp;lt;/Slide&amp;gt;\\n  );\\n}\\n\\n// AI Agents slide with workflow\\nfunction AIAgentsSlide({ slide, pageNumber }: { slide: SlideContent; pageNumber: number }) {\\n  return (\\n    &amp;lt;Slide variant=\\\"light\\\" pageNumber={pageNumber}&amp;gt;\\n      &amp;lt;Title subtitle={slide.subtitle}&amp;gt;{slide.title}&amp;lt;/Title&amp;gt;\\n      &amp;lt;View style={{ ...localStyles.row, flexWrap: 'wrap' }}&amp;gt;\\n        {slide.sections?.map((section, i) =&amp;gt; (\\n          &amp;lt;Card key={i} variant=\\\"bordered\\\" style={{ width: '48%', marginBottom: spacing.xs }}&amp;gt;\\n            &amp;lt;View style={localStyles.iconRow}&amp;gt;\\n              &amp;lt;IconBot size={16} /&amp;gt;\\n              &amp;lt;Text style={localStyles.boldText}&amp;gt;{section.heading}&amp;lt;/Text&amp;gt;\\n            &amp;lt;/View&amp;gt;\\n            {section.items &amp;amp;&amp;amp; &amp;lt;BulletList items={section.items} /&amp;gt;}\\n          &amp;lt;/Card&amp;gt;\\n        ))}\\n      &amp;lt;/View&amp;gt;\\n      &amp;lt;AgentWorkflowDiagram /&amp;gt;\\n    &amp;lt;/Slide&amp;gt;\\n  );\\n}\\n\\n// Economics slide with chart\\nfunction EconomicsSlide({ slide, pageNumber }: { slide: SlideContent; pageNumber: number }) {\\n  return (\\n    &amp;lt;Slide variant=\\\"dark\\\" pageNumber={pageNumber}&amp;gt;\\n      &amp;lt;Title subtitle={slide.subtitle}&amp;gt;{slide.title}&amp;lt;/Title&amp;gt;\\n      &amp;lt;EconomicsChart /&amp;gt;\\n      {slide.footnote &amp;amp;&amp;amp; &amp;lt;Text style={localStyles.bodyText}&amp;gt;{slide.footnote}&amp;lt;/Text&amp;gt;}\\n    &amp;lt;/Slide&amp;gt;\\n  );\\n}\\n\\n// Team slide with members\\nfunction TeamSlide({ slide, pageNumber }: { slide: SlideContent; pageNumber: number }) {\\n  return (\\n    &amp;lt;Slide variant=\\\"dark\\\" pageNumber={pageNumber}&amp;gt;\\n      &amp;lt;Title subtitle={slide.subtitle}&amp;gt;{slide.title}&amp;lt;/Title&amp;gt;\\n      &amp;lt;View style={localStyles.teamGrid}&amp;gt;\\n        {slide.sections?.map((section, i) =&amp;gt; (\\n          &amp;lt;TeamMember \\n            key={i} \\n            name={section.heading || ''} \\n            role={section.text || ''} \\n          /&amp;gt;\\n        ))}\\n      &amp;lt;/View&amp;gt;\\n      {slide.footnote &amp;amp;&amp;amp; (\\n        &amp;lt;Card variant=\\\"bordered\\\" style={{ marginTop: spacing.md }}&amp;gt;\\n          &amp;lt;Text style={localStyles.bodyText}&amp;gt;{slide.footnote}&amp;lt;/Text&amp;gt;\\n        &amp;lt;/Card&amp;gt;\\n      )}\\n    &amp;lt;/Slide&amp;gt;\\n  );\\n}\\n\\n// Roadmap slide with timeline and ask\\nfunction RoadmapSlide({ slide, ask, pageNumber }: { slide: SlideContent; ask: DeckContent['ask']; pageNumber: number }) {\\n  return (\\n    &amp;lt;Slide variant=\\\"light\\\" pageNumber={pageNumber}&amp;gt;\\n      &amp;lt;Title&amp;gt;{slide.title}&amp;lt;/Title&amp;gt;\\n      &amp;lt;RoadmapTimeline /&amp;gt;\\n      &amp;lt;View style={localStyles.askBox}&amp;gt;\\n        &amp;lt;Text style={localStyles.askTitle}&amp;gt;Ask&amp;lt;/Text&amp;gt;\\n        &amp;lt;Text style={localStyles.askAmount}&amp;gt;{ask.amount}&amp;lt;/Text&amp;gt;\\n        &amp;lt;BulletList items={ask.items} color={colors.white} /&amp;gt;\\n      &amp;lt;/View&amp;gt;\\n    &amp;lt;/Slide&amp;gt;\\n  );\\n}\\n\\n// Main Document\\nexport function DirectorPitchDeck() {\\n  const content = getDeckContent();\\n  \\n  // Helper to get slide by ID\\n  const getSlide = (id: string) =&amp;gt; content.slides.find(s =&amp;gt; s.id === id);\\n  \\n  return (\\n    &amp;lt;Document\\n      title=\\\"Director Pitch Deck\\\"\\n      author=\\\"Director\\\"\\n      subject=\\\"AI-native backbone for nonprofits\\\"\\n      keywords=\\\"director, nonprofit, AI, operations, fundraising\\\"\\n    &amp;gt;\\n      {/* 1. Cover */}\\n      &amp;lt;CoverSlide content={content} /&amp;gt;\\n      \\n      {/* 2. Problem - Founders */}\\n      {getSlide('problem-founders') &amp;amp;&amp;amp; (\\n        &amp;lt;ContentSlide slide={getSlide('problem-founders')!} pageNumber={2} /&amp;gt;\\n      )}\\n      \\n      {/* 3. Problem - Downshifted */}\\n      {getSlide('problem-downshifted') &amp;amp;&amp;amp; (\\n        &amp;lt;TwoColumnSlide slide={getSlide('problem-downshifted')!} pageNumber={3} variant=\\\"light\\\" /&amp;gt;\\n      )}\\n      \\n      {/* 4. Foundations as Buyers */}\\n      {getSlide('customer-foundations') &amp;amp;&amp;amp; (\\n        &amp;lt;TwoColumnSlide slide={getSlide('customer-foundations')!} pageNumber={4} variant=\\\"dark\\\" /&amp;gt;\\n      )}\\n      \\n      {/* 5. Market Opportunity */}\\n      {getSlide('market') &amp;amp;&amp;amp; (\\n        &amp;lt;ContentSlide slide={getSlide('market')!} pageNumber={5} variant=\\\"light\\\" /&amp;gt;\\n      )}\\n      \\n      {/* 6. Broken Options */}\\n      {getSlide('broken-options') &amp;amp;&amp;amp; (\\n        &amp;lt;ContentSlide slide={getSlide('broken-options')!} pageNumber={6} /&amp;gt;\\n      )}\\n      \\n      {/* 7. What We Are */}\\n      {getSlide('what-we-are') &amp;amp;&amp;amp; (\\n        &amp;lt;DirectorWhatWeAreSlide slide={getSlide('what-we-are')!} pageNumber={7} /&amp;gt;\\n      )}\\n      \\n      {/* 8. Fundraising Philosophy */}\\n      {getSlide('fundraising-philosophy') &amp;amp;&amp;amp; (\\n        &amp;lt;TwoColumnSlide slide={getSlide('fundraising-philosophy')!} pageNumber={8} /&amp;gt;\\n      )}\\n      \\n      {/* 9. Director Pod */}\\n      {getSlide('director-pod') &amp;amp;&amp;amp; (\\n        &amp;lt;DirectorPodSlide slide={getSlide('director-pod')!} pageNumber={9} /&amp;gt;\\n      )}\\n      \\n      {/* 10. Director OS */}\\n      {getSlide('director-os') &amp;amp;&amp;amp; (\\n        &amp;lt;DirectorOSSlide slide={getSlide('director-os')!} pageNumber={10} /&amp;gt;\\n      )}\\n      \\n      {/* 11. AI Agents */}\\n      {getSlide('ai-agents') &amp;amp;&amp;amp; (\\n        &amp;lt;AIAgentsSlide slide={getSlide('ai-agents')!} pageNumber={11} /&amp;gt;\\n      )}\\n      \\n      {/* 12. Economics */}\\n      {getSlide('economics') &amp;amp;&amp;amp; (\\n        &amp;lt;EconomicsSlide slide={getSlide('economics')!} pageNumber={12} /&amp;gt;\\n      )}\\n      \\n      {/* 13. Why Now */}\\n      {getSlide('why-now') &amp;amp;&amp;amp; (\\n        &amp;lt;TwoColumnSlide slide={getSlide('why-now')!} pageNumber={13} variant=\\\"light\\\" /&amp;gt;\\n      )}\\n      \\n      {/* 14. Go-to-Market */}\\n      {getSlide('go-to-market') &amp;amp;&amp;amp; (\\n        &amp;lt;ContentSlide slide={getSlide('go-to-market')!} pageNumber={14} /&amp;gt;\\n      )}\\n      \\n      {/* 15. Business Model */}\\n      {getSlide('business-model') &amp;amp;&amp;amp; (\\n        &amp;lt;ContentSlide slide={getSlide('business-model')!} pageNumber={15} variant=\\\"light\\\" /&amp;gt;\\n      )}\\n      \\n      {/* 16. Team */}\\n      {getSlide('team') &amp;amp;&amp;amp; (\\n        &amp;lt;TeamSlide slide={getSlide('team')!} pageNumber={16} /&amp;gt;\\n      )}\\n      \\n      {/* 17. Current Customers &amp;amp; Traction */}\\n      {getSlide('current-customers') &amp;amp;&amp;amp; (\\n        &amp;lt;ContentSlide slide={getSlide('current-customers')!} pageNumber={17} variant=\\\"light\\\" /&amp;gt;\\n      )}\\n      \\n      {/* 18. Roadmap &amp;amp; Ask */}\\n      {getSlide('roadmap') &amp;amp;&amp;amp; (\\n        &amp;lt;RoadmapSlide slide={getSlide('roadmap')!} ask={content.ask} pageNumber={18} /&amp;gt;\\n      )}\\n    &amp;lt;/Document&amp;gt;\\n  );\\n}\\n\\nexport default DirectorPitchDeck;\\n\","
                }
              ]
            },
            {
              "file": "./app/api/deck/ai-edit/route.ts",
              "matches": [
                {
                  "lineNumber": 4,
                  "content": "import { getDeckContent, DeckContent } from '@/lib/deck-content';"
                }
              ]
            },
            {
              "file": "./.specstory/history/2025-12-09_14-44Z-make-this-live-on-the-internet-using-my-dev-studio-for.md",
              "matches": [
                {
                  "lineNumber": 2377,
                  "content": "  \"contents\": \"import { openai } from '@ai-sdk/openai';\\nimport { generateText } from 'ai';\\nimport { NextResponse } from 'next/server';\\nimport { getDeckContent, DeckContent } from '@/lib/deck-content';\\n\\nconst SYSTEM_PROMPT = &amp;#96;You are an AI assistant that helps edit pitch deck content. You receive the current deck content as JSON and a user instruction describing what changes to make.\\n\\nYour job is to:\\n1. Understand the user's request\\n2. Return the modified deck content as valid JSON\\n3. Provide a brief description of what you changed\\n\\nThe deck structure has:\\n- cover: { title, tagline, subtagline, url }\\n- slides: array of slides, each with { id, title, subtitle?, sections?, highlight?, footnote?, image? }\\n- ask: { amount, items[] }\\n\\nEach slide section has: { heading?, items[]?, text? }\\nEach slide image has: { type, placeholder, url? }\\n\\nIMPORTANT RULES:\\n- Return ONLY valid JSON in your response\\n- Preserve the existing structure and IDs unless explicitly asked to change them\\n- When adding a new slide, generate a unique kebab-case id\\n- Keep the same formatting style as the existing content\\n- Be concise in titles and bullet points\\n\\nRespond with a JSON object in this exact format:\\n{\\n  \\\"success\\\": true,\\n  \\\"content\\\": { ...the full updated deck content... },\\n  \\\"description\\\": \\\"Brief description of changes made\\\",\\n  \\\"changes\\\": [\\\"List of specific changes made\\\"]\\n}\\n\\nIf the request is unclear or cannot be fulfilled, respond with:\\n{\\n  \\\"success\\\": false,\\n  \\\"error\\\": \\\"Explanation of why the request cannot be fulfilled\\\"\\n}&amp;#96;;\\n\\nexport async function POST(request: Request) {\\n  try {\\n    const { instruction, currentContent } = await request.json();\\n\\n    if (!instruction) {\\n      return NextResponse.json({ error: 'Instruction is required' }, { status: 400 });\\n    }\\n\\n    // Get current content if not provided\\n    const deckContent = currentContent || getDeckContent();\\n\\n    const { text } = await generateText({\\n      model: openai('gpt-4o'),\\n      system: SYSTEM_PROMPT,\\n      prompt: &amp;#96;Current deck content:\\n\\\\&amp;#96;\\\\&amp;#96;\\\\&amp;#96;json\\n${JSON.stringify(deckContent, null, 2)}\\n\\\\&amp;#96;\\\\&amp;#96;\\\\&amp;#96;\\n\\nUser instruction: ${instruction}\\n\\nPlease provide the updated deck content as JSON.&amp;#96;,\\n      maxTokens: 8000,\\n    });\\n\\n    // Parse the AI response\\n    let result;\\n    try {\\n      // Try to extract JSON from the response\\n      const jsonMatch = text.match(/\\\\{[\\\\s\\\\S]*\\\\}/);\\n      if (jsonMatch) {\\n        result = JSON.parse(jsonMatch[0]);\\n      } else {\\n        throw new Error('No JSON found in response');\\n      }\\n    } catch (parseError) {\\n      console.error('Failed to parse AI response:', text);\\n      return NextResponse.json({\\n        success: false,\\n        error: 'Failed to parse AI response. Please try rephrasing your request.',\\n        rawResponse: text,\\n      }, { status: 500 });\\n    }\\n\\n    if (!result.success) {\\n      return NextResponse.json(result, { status: 400 });\\n    }\\n\\n    // Validate the content structure\\n    if (!result.content || !result.content.cover || !result.content.slides || !result.content.ask) {\\n      return NextResponse.json({\\n        success: false,\\n        error: 'AI returned invalid deck structure',\\n      }, { status: 500 });\\n    }\\n\\n    return NextResponse.json({\\n      success: true,\\n      content: result.content,\\n      description: result.description || 'Changes applied',\\n      changes: result.changes || [],\\n    });\\n  } catch (error) {\\n    console.error('Error in AI edit:', error);\\n    return NextResponse.json({\\n      success: false,\\n      error: error instanceof Error ? error.message : 'Failed to process AI edit',\\n    }, { status: 500 });\\n  }\\n}\\n\","
                }
              ]
            },
            {
              "file": "./app/api/deck-content/route.ts",
              "matches": [
                {
                  "lineNumber": 2,
                  "content": "import { getDeckContent, updateDeckContent, resetDeckContent, DeckContent } from '@/lib/deck-content';"
                }
              ]
            },
            {
              "file": "./app/api/deck-content/versions/[id]/restore/route.ts",
              "matches": [
                {
                  "lineNumber": 5,
                  "content": "import { updateDeckContent, DeckContent } from '@/lib/deck-content';"
                }
              ]
            },
            {
              "file": "./.specstory/history/2025-12-09_14-18Z-foundations-customer-segment-and-ai-website-changes.md",
              "matches": [
                {
                  "lineNumber": 166,
                  "content": "  \"contents\": \"'use client';\\n\\nimport { useState, useEffect, useCallback, useRef } from 'react';\\nimport Link from 'next/link';\\nimport { Button } from '@/components/ui/button';\\nimport { ArrowLeft, Save, RotateCcw, Eye, Loader2, Plus, Trash2, ChevronDown, ChevronRight, ImageIcon, Upload, Undo2, Redo2 } from 'lucide-react';\\nimport { DeckContent, SlideContent, SlideImage } from '@/lib/deck-content';\\nimport Image from 'next/image';\\n\\nconst MAX_HISTORY = 50;\\n\\nexport default function DeckEditorPage() {\\n  const [content, setContent] = useState&amp;lt;DeckContent | null&amp;gt;(null);\\n  const [isLoading, setIsLoading] = useState(true);\\n  const [isSaving, setIsSaving] = useState(false);\\n  const [expandedSlides, setExpandedSlides] = useState&amp;lt;Set&amp;lt;string&amp;gt;&amp;gt;(new Set());\\n  const [hasChanges, setHasChanges] = useState(false);\\n  \\n  // Undo/Redo state\\n  const [history, setHistory] = useState&amp;lt;DeckContent[]&amp;gt;([]);\\n  const [historyIndex, setHistoryIndex] = useState(-1);\\n  const isUndoRedo = useRef(false);\\n\\n  // Keyboard shortcuts for undo/redo\\n  useEffect(() =&amp;gt; {\\n    const handleKeyDown = (e: KeyboardEvent) =&amp;gt; {\\n      if ((e.metaKey || e.ctrlKey) &amp;amp;&amp;amp; e.key === 'z') {\\n        e.preventDefault();\\n        if (e.shiftKey) {\\n          redo();\\n        } else {\\n          undo();\\n        }\\n      }\\n    };\\n    \\n    window.addEventListener('keydown', handleKeyDown);\\n    return () =&amp;gt; window.removeEventListener('keydown', handleKeyDown);\\n  }, [historyIndex, history]);\\n\\n  useEffect(() =&amp;gt; {\\n    fetchContent();\\n  }, []);\\n\\n  const fetchContent = async () =&amp;gt; {\\n    setIsLoading(true);\\n    try {\\n      const response = await fetch('/api/deck-content');\\n      const data = await response.json();\\n      setContent(data);\\n      // Initialize history with loaded content\\n      setHistory([data]);\\n      setHistoryIndex(0);\\n    } catch (error) {\\n      console.error('Failed to fetch content:', error);\\n    } finally {\\n      setIsLoading(false);\\n    }\\n  };\\n\\n  // Push new state to history\\n  const pushToHistory = useCallback((newContent: DeckContent) =&amp;gt; {\\n    if (isUndoRedo.current) {\\n      isUndoRedo.current = false;\\n      return;\\n    }\\n    \\n    setHistory(prev =&amp;gt; {\\n      // Remove any future states if we're not at the end\\n      const newHistory = prev.slice(0, historyIndex + 1);\\n      // Add new state\\n      newHistory.push(newContent);\\n      // Limit history size\\n      if (newHistory.length &amp;gt; MAX_HISTORY) {\\n        newHistory.shift();\\n        return newHistory;\\n      }\\n      return newHistory;\\n    });\\n    setHistoryIndex(prev =&amp;gt; Math.min(prev + 1, MAX_HISTORY - 1));\\n  }, [historyIndex]);\\n\\n  // Undo function\\n  const undo = useCallback(() =&amp;gt; {\\n    if (historyIndex &amp;gt; 0) {\\n      isUndoRedo.current = true;\\n      const newIndex = historyIndex - 1;\\n      setHistoryIndex(newIndex);\\n      setContent(history[newIndex]);\\n      setHasChanges(true);\\n    }\\n  }, [historyIndex, history]);\\n\\n  // Redo function\\n  const redo = useCallback(() =&amp;gt; {\\n    if (historyIndex &amp;lt; history.length - 1) {\\n      isUndoRedo.current = true;\\n      const newIndex = historyIndex + 1;\\n      setHistoryIndex(newIndex);\\n      setContent(history[newIndex]);\\n      setHasChanges(true);\\n    }\\n  }, [historyIndex, history]);\\n\\n  const canUndo = historyIndex &amp;gt; 0;\\n  const canRedo = historyIndex &amp;lt; history.length - 1;\\n\\n  const saveContent = async () =&amp;gt; {\\n    if (!content) return;\\n    setIsSaving(true);\\n    try {\\n      const response = await fetch('/api/deck-content', {\\n        method: 'PUT',\\n        headers: { 'Content-Type': 'application/json' },\\n        body: JSON.stringify(content),\\n      });\\n      if (response.ok) {\\n        setHasChanges(false);\\n        alert('Content saved successfully!');\\n      }\\n    } catch (error) {\\n      console.error('Failed to save content:', error);\\n      alert('Failed to save content');\\n    } finally {\\n      setIsSaving(false);\\n    }\\n  };\\n\\n  const resetContent = async () =&amp;gt; {\\n    if (!confirm('Reset all content to defaults? This cannot be undone.')) return;\\n    try {\\n      const response = await fetch('/api/deck-content', { method: 'DELETE' });\\n      const data = await response.json();\\n      setContent(data);\\n      setHistory([data]);\\n      setHistoryIndex(0);\\n      setHasChanges(false);\\n    } catch (error) {\\n      console.error('Failed to reset content:', error);\\n    }\\n  };\\n\\n  const updateCover = (field: keyof DeckContent['cover'], value: string) =&amp;gt; {\\n    if (!content) return;\\n    const newContent = { ...content, cover: { ...content.cover, [field]: value } };\\n    setContent(newContent);\\n    pushToHistory(newContent);\\n    setHasChanges(true);\\n  };\\n\\n  const updateSlide = (index: number, updates: Partial&amp;lt;SlideContent&amp;gt;) =&amp;gt; {\\n    if (!content) return;\\n    const newSlides = [...content.slides];\\n    newSlides[index] = { ...newSlides[index], ...updates };\\n    const newContent = { ...content, slides: newSlides };\\n    setContent(newContent);\\n    pushToHistory(newContent);\\n    setHasChanges(true);\\n  };\\n\\n  const updateSlideSection = (slideIndex: number, sectionIndex: number, updates: Partial&amp;lt;SlideContent['sections'][0]&amp;gt;) =&amp;gt; {\\n    if (!content) return;\\n    const newSlides = [...content.slides];\\n    const newSections = [...(newSlides[slideIndex].sections || [])];\\n    newSections[sectionIndex] = { ...newSections[sectionIndex], ...updates };\\n    newSlides[slideIndex] = { ...newSlides[slideIndex], sections: newSections };\\n    const newContent = { ...content, slides: newSlides };\\n    setContent(newContent);\\n    pushToHistory(newContent);\\n    setHasChanges(true);\\n  };\\n\\n  const updateSectionItems = (slideIndex: number, sectionIndex: number, items: string[]) =&amp;gt; {\\n    updateSlideSection(slideIndex, sectionIndex, { items });\\n  };\\n\\n  const addSectionItem = (slideIndex: number, sectionIndex: number) =&amp;gt; {\\n    if (!content) return;\\n    const currentItems = content.slides[slideIndex].sections?.[sectionIndex]?.items || [];\\n    updateSectionItems(slideIndex, sectionIndex, [...currentItems, '']);\\n  };\\n\\n  const removeSectionItem = (slideIndex: number, sectionIndex: number, itemIndex: number) =&amp;gt; {\\n    if (!content) return;\\n    const currentItems = content.slides[slideIndex].sections?.[sectionIndex]?.items || [];\\n    updateSectionItems(slideIndex, sectionIndex, currentItems.filter((_, i) =&amp;gt; i !== itemIndex));\\n  };\\n\\n  const updateAsk = (field: 'amount' | 'items', value: string | string[]) =&amp;gt; {\\n    if (!content) return;\\n    const newContent = { ...content, ask: { ...content.ask, [field]: value } };\\n    setContent(newContent);\\n    pushToHistory(newContent);\\n    setHasChanges(true);\\n  };\\n\\n  const toggleSlide = (slideId: string) =&amp;gt; {\\n    const newExpanded = new Set(expandedSlides);\\n    if (newExpanded.has(slideId)) {\\n      newExpanded.delete(slideId);\\n    } else {\\n      newExpanded.add(slideId);\\n    }\\n    setExpandedSlides(newExpanded);\\n  };\\n\\n  const updateSlideImage = (slideIndex: number, image: SlideImage | undefined) =&amp;gt; {\\n    if (!content) return;\\n    const newSlides = [...content.slides];\\n    newSlides[slideIndex] = { ...newSlides[slideIndex], image };\\n    const newContent = { ...content, slides: newSlides };\\n    setContent(newContent);\\n    pushToHistory(newContent);\\n    setHasChanges(true);\\n  };\\n\\n  const handleImageDrop = async (slideIndex: number, e: React.DragEvent&amp;lt;HTMLDivElement&amp;gt;) =&amp;gt; {\\n    e.preventDefault();\\n    const file = e.dataTransfer.files[0];\\n    if (!file || !file.type.startsWith('image/')) return;\\n    \\n    // Convert to base64 for now (in production, upload to storage)\\n    const reader = new FileReader();\\n    reader.onload = () =&amp;gt; {\\n      const currentImage = content?.slides[slideIndex]?.image;\\n      updateSlideImage(slideIndex, {\\n        ...currentImage,\\n        type: currentImage?.type || 'infographic',\\n        url: reader.result as string,\\n        placeholder: currentImage?.placeholder,\\n      });\\n    };\\n    reader.readAsDataURL(file);\\n  };\\n\\n  const handleImageUpload = async (slideIndex: number, e: React.ChangeEvent&amp;lt;HTMLInputElement&amp;gt;) =&amp;gt; {\\n    const file = e.target.files?.[0];\\n    if (!file || !file.type.startsWith('image/')) return;\\n    \\n    const reader = new FileReader();\\n    reader.onload = () =&amp;gt; {\\n      const currentImage = content?.slides[slideIndex]?.image;\\n      updateSlideImage(slideIndex, {\\n        ...currentImage,\\n        type: currentImage?.type || 'infographic',\\n        url: reader.result as string,\\n        placeholder: currentImage?.placeholder,\\n      });\\n    };\\n    reader.readAsDataURL(file);\\n  };\\n\\n  const removeSlideImage = (slideIndex: number) =&amp;gt; {\\n    if (!content) return;\\n    const currentImage = content.slides[slideIndex]?.image;\\n    if (currentImage) {\\n      updateSlideImage(slideIndex, { ...currentImage, url: undefined });\\n    }\\n  };\\n\\n  if (isLoading) {\\n    return (\\n      &amp;lt;div className=\\\"min-h-screen bg-gray-950 text-white flex items-center justify-center\\\"&amp;gt;\\n        &amp;lt;Loader2 className=\\\"w-8 h-8 animate-spin\\\" /&amp;gt;\\n      &amp;lt;/div&amp;gt;\\n    );\\n  }\\n\\n  if (!content) {\\n    return (\\n      &amp;lt;div className=\\\"min-h-screen bg-gray-950 text-white flex items-center justify-center\\\"&amp;gt;\\n        &amp;lt;p&amp;gt;Failed to load content&amp;lt;/p&amp;gt;\\n      &amp;lt;/div&amp;gt;\\n    );\\n  }\\n\\n  return (\\n    &amp;lt;div className=\\\"min-h-screen bg-gray-950 text-white\\\"&amp;gt;\\n      {/* Header */}\\n      &amp;lt;div className=\\\"sticky top-0 z-10 bg-gray-900 border-b border-gray-800\\\"&amp;gt;\\n        &amp;lt;div className=\\\"container px-4 py-4 flex items-center justify-between\\\"&amp;gt;\\n          &amp;lt;div className=\\\"flex items-center gap-4\\\"&amp;gt;\\n            &amp;lt;Link href=\\\"/admin\\\" className=\\\"text-gray-400 hover:text-white\\\"&amp;gt;\\n              &amp;lt;ArrowLeft className=\\\"w-5 h-5\\\" /&amp;gt;\\n            &amp;lt;/Link&amp;gt;\\n            &amp;lt;h1 className=\\\"text-xl font-bold\\\"&amp;gt;Edit Pitch Deck&amp;lt;/h1&amp;gt;\\n            {hasChanges &amp;amp;&amp;amp; (\\n              &amp;lt;span className=\\\"text-xs bg-yellow-600 px-2 py-1 rounded\\\"&amp;gt;Unsaved changes&amp;lt;/span&amp;gt;\\n            )}\\n          &amp;lt;/div&amp;gt;\\n          \\n          &amp;lt;div className=\\\"flex items-center gap-2\\\"&amp;gt;\\n            &amp;lt;Button\\n              onClick={undo}\\n              disabled={!canUndo}\\n              variant=\\\"outline\\\"\\n              size=\\\"sm\\\"\\n              className=\\\"border-gray-700 text-gray-300 disabled:opacity-30\\\"\\n              title=\\\"Undo (Cmd+Z)\\\"\\n            &amp;gt;\\n              &amp;lt;Undo2 className=\\\"w-4 h-4\\\" /&amp;gt;\\n            &amp;lt;/Button&amp;gt;\\n            &amp;lt;Button\\n              onClick={redo}\\n              disabled={!canRedo}\\n              variant=\\\"outline\\\"\\n              size=\\\"sm\\\"\\n              className=\\\"border-gray-700 text-gray-300 disabled:opacity-30\\\"\\n              title=\\\"Redo (Cmd+Shift+Z)\\\"\\n            &amp;gt;\\n              &amp;lt;Redo2 className=\\\"w-4 h-4\\\" /&amp;gt;\\n            &amp;lt;/Button&amp;gt;\\n            &amp;lt;div className=\\\"w-px h-6 bg-gray-700 mx-1\\\" /&amp;gt;\\n            &amp;lt;Button\\n              onClick={resetContent}\\n              variant=\\\"outline\\\"\\n              size=\\\"sm\\\"\\n              className=\\\"border-gray-700 text-gray-300\\\"\\n            &amp;gt;\\n              &amp;lt;RotateCcw className=\\\"w-4 h-4 mr-2\\\" /&amp;gt;\\n              Reset\\n            &amp;lt;/Button&amp;gt;\\n            &amp;lt;Link href=\\\"/deck\\\" target=\\\"_blank\\\"&amp;gt;\\n              &amp;lt;Button variant=\\\"outline\\\" size=\\\"sm\\\" className=\\\"border-gray-700 text-gray-300\\\"&amp;gt;\\n                &amp;lt;Eye className=\\\"w-4 h-4 mr-2\\\" /&amp;gt;\\n                Preview\\n              &amp;lt;/Button&amp;gt;\\n            &amp;lt;/Link&amp;gt;\\n            &amp;lt;Button\\n              onClick={saveContent}\\n              disabled={isSaving || !hasChanges}\\n              size=\\\"sm\\\"\\n              className=\\\"bg-white text-black hover:bg-gray-200\\\"\\n            &amp;gt;\\n              {isSaving ? &amp;lt;Loader2 className=\\\"w-4 h-4 mr-2 animate-spin\\\" /&amp;gt; : &amp;lt;Save className=\\\"w-4 h-4 mr-2\\\" /&amp;gt;}\\n              Save\\n            &amp;lt;/Button&amp;gt;\\n          &amp;lt;/div&amp;gt;\\n        &amp;lt;/div&amp;gt;\\n      &amp;lt;/div&amp;gt;\\n\\n      &amp;lt;div className=\\\"container px-4 py-8 max-w-4xl\\\"&amp;gt;\\n        {/* Cover Section */}\\n        &amp;lt;section className=\\\"mb-8\\\"&amp;gt;\\n          &amp;lt;h2 className=\\\"text-lg font-semibold mb-4 text-gray-300\\\"&amp;gt;Slides&amp;lt;/h2&amp;gt;\\n          &amp;lt;div className=\\\"bg-gray-900 rounded-lg overflow-hidden mb-2\\\"&amp;gt;\\n            &amp;lt;button\\n              onClick={() =&amp;gt; toggleSlide('cover')}\\n              className=\\\"w-full px-4 py-3 flex items-center justify-between hover:bg-gray-800 transition-colors\\\"\\n            &amp;gt;\\n              &amp;lt;span className=\\\"font-medium\\\"&amp;gt;1. Cover Slide&amp;lt;/span&amp;gt;\\n              {expandedSlides.has('cover') ? (\\n                &amp;lt;ChevronDown className=\\\"w-5 h-5 text-gray-400\\\" /&amp;gt;\\n              ) : (\\n                &amp;lt;ChevronRight className=\\\"w-5 h-5 text-gray-400\\\" /&amp;gt;\\n              )}\\n            &amp;lt;/button&amp;gt;\\n            \\n            {expandedSlides.has('cover') &amp;amp;&amp;amp; (\\n              &amp;lt;div className=\\\"px-4 pb-4 space-y-4 border-t border-gray-800\\\"&amp;gt;\\n                &amp;lt;div className=\\\"pt-4\\\"&amp;gt;\\n                  &amp;lt;label className=\\\"block text-sm text-gray-400 mb-1\\\"&amp;gt;Title&amp;lt;/label&amp;gt;\\n                  &amp;lt;input\\n                    type=\\\"text\\\"\\n                    value={content.cover.title}\\n                    onChange={(e) =&amp;gt; updateCover('title', e.target.value)}\\n                    className=\\\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\\\"\\n                  /&amp;gt;\\n                &amp;lt;/div&amp;gt;\\n                &amp;lt;div&amp;gt;\\n                  &amp;lt;label className=\\\"block text-sm text-gray-400 mb-1\\\"&amp;gt;Tagline&amp;lt;/label&amp;gt;\\n                  &amp;lt;textarea\\n                    value={content.cover.tagline}\\n                    onChange={(e) =&amp;gt; updateCover('tagline', e.target.value)}\\n                    rows={2}\\n                    className=\\\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\\\"\\n                  /&amp;gt;\\n                &amp;lt;/div&amp;gt;\\n                &amp;lt;div&amp;gt;\\n                  &amp;lt;label className=\\\"block text-sm text-gray-400 mb-1\\\"&amp;gt;Subtagline&amp;lt;/label&amp;gt;\\n                  &amp;lt;input\\n                    type=\\\"text\\\"\\n                    value={content.cover.subtagline}\\n                    onChange={(e) =&amp;gt; updateCover('subtagline', e.target.value)}\\n                    className=\\\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\\\"\\n                  /&amp;gt;\\n                &amp;lt;/div&amp;gt;\\n                &amp;lt;div&amp;gt;\\n                  &amp;lt;label className=\\\"block text-sm text-gray-400 mb-1\\\"&amp;gt;URL&amp;lt;/label&amp;gt;\\n                  &amp;lt;input\\n                    type=\\\"text\\\"\\n                    value={content.cover.url}\\n                    onChange={(e) =&amp;gt; updateCover('url', e.target.value)}\\n                    className=\\\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\\\"\\n                  /&amp;gt;\\n                &amp;lt;/div&amp;gt;\\n              &amp;lt;/div&amp;gt;\\n            )}\\n          &amp;lt;/div&amp;gt;\\n\\n          {content.slides.map((slide, slideIndex) =&amp;gt; (\\n              &amp;lt;div key={slide.id} className=\\\"bg-gray-900 rounded-lg overflow-hidden\\\"&amp;gt;\\n                &amp;lt;button\\n                  onClick={() =&amp;gt; toggleSlide(slide.id)}\\n                  className=\\\"w-full px-4 py-3 flex items-center justify-between hover:bg-gray-800 transition-colors\\\"\\n                &amp;gt;\\n                  &amp;lt;span className=\\\"font-medium\\\"&amp;gt;\\n                    {slideIndex + 2}. {slide.title}\\n                  &amp;lt;/span&amp;gt;\\n                  {expandedSlides.has(slide.id) ? (\\n                    &amp;lt;ChevronDown className=\\\"w-5 h-5 text-gray-400\\\" /&amp;gt;\\n                  ) : (\\n                    &amp;lt;ChevronRight className=\\\"w-5 h-5 text-gray-400\\\" /&amp;gt;\\n                  )}\\n                &amp;lt;/button&amp;gt;\\n                \\n                {expandedSlides.has(slide.id) &amp;amp;&amp;amp; (\\n                  &amp;lt;div className=\\\"px-4 pb-4 space-y-4 border-t border-gray-800\\\"&amp;gt;\\n                    &amp;lt;div className=\\\"pt-4\\\"&amp;gt;\\n                      &amp;lt;label className=\\\"block text-sm text-gray-400 mb-1\\\"&amp;gt;Title&amp;lt;/label&amp;gt;\\n                      &amp;lt;input\\n                        type=\\\"text\\\"\\n                        value={slide.title}\\n                        onChange={(e) =&amp;gt; updateSlide(slideIndex, { title: e.target.value })}\\n                        className=\\\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\\\"\\n                      /&amp;gt;\\n                    &amp;lt;/div&amp;gt;\\n                    \\n                    &amp;lt;div&amp;gt;\\n                      &amp;lt;label className=\\\"block text-sm text-gray-400 mb-1\\\"&amp;gt;Subtitle&amp;lt;/label&amp;gt;\\n                      &amp;lt;input\\n                        type=\\\"text\\\"\\n                        value={slide.subtitle || ''}\\n                        onChange={(e) =&amp;gt; updateSlide(slideIndex, { subtitle: e.target.value })}\\n                        className=\\\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\\\"\\n                      /&amp;gt;\\n                    &amp;lt;/div&amp;gt;\\n\\n                    {/* Sections */}\\n                    {slide.sections?.map((section, sectionIndex) =&amp;gt; (\\n                      &amp;lt;div key={sectionIndex} className=\\\"bg-gray-800 rounded p-3 space-y-3\\\"&amp;gt;\\n                        &amp;lt;div&amp;gt;\\n                          &amp;lt;label className=\\\"block text-xs text-gray-500 mb-1\\\"&amp;gt;Section Heading&amp;lt;/label&amp;gt;\\n                          &amp;lt;input\\n                            type=\\\"text\\\"\\n                            value={section.heading || ''}\\n                            onChange={(e) =&amp;gt; updateSlideSection(slideIndex, sectionIndex, { heading: e.target.value })}\\n                            className=\\\"w-full bg-gray-700 border border-gray-600 rounded px-2 py-1 text-sm text-white\\\"\\n                          /&amp;gt;\\n                        &amp;lt;/div&amp;gt;\\n                        \\n                        {section.text !== undefined &amp;amp;&amp;amp; (\\n                          &amp;lt;div&amp;gt;\\n                            &amp;lt;label className=\\\"block text-xs text-gray-500 mb-1\\\"&amp;gt;Text&amp;lt;/label&amp;gt;\\n                            &amp;lt;textarea\\n                              value={section.text}\\n                              onChange={(e) =&amp;gt; updateSlideSection(slideIndex, sectionIndex, { text: e.target.value })}\\n                              rows={2}\\n                              className=\\\"w-full bg-gray-700 border border-gray-600 rounded px-2 py-1 text-sm text-white\\\"\\n                            /&amp;gt;\\n                          &amp;lt;/div&amp;gt;\\n                        )}\\n                        \\n                        {section.items &amp;amp;&amp;amp; (\\n                          &amp;lt;div&amp;gt;\\n                            &amp;lt;label className=\\\"block text-xs text-gray-500 mb-1\\\"&amp;gt;Bullet Points&amp;lt;/label&amp;gt;\\n                            {section.items.map((item, itemIndex) =&amp;gt; (\\n                              &amp;lt;div key={itemIndex} className=\\\"flex gap-2 mb-1\\\"&amp;gt;\\n                                &amp;lt;input\\n                                  type=\\\"text\\\"\\n                                  value={item}\\n                                  onChange={(e) =&amp;gt; {\\n                                    const newItems = [...section.items!];\\n                                    newItems[itemIndex] = e.target.value;\\n                                    updateSectionItems(slideIndex, sectionIndex, newItems);\\n                                  }}\\n                                  className=\\\"flex-1 bg-gray-700 border border-gray-600 rounded px-2 py-1 text-sm text-white\\\"\\n                                /&amp;gt;\\n                                &amp;lt;button\\n                                  onClick={() =&amp;gt; removeSectionItem(slideIndex, sectionIndex, itemIndex)}\\n                                  className=\\\"text-red-400 hover:text-red-300 p-1\\\"\\n                                &amp;gt;\\n                                  &amp;lt;Trash2 className=\\\"w-4 h-4\\\" /&amp;gt;\\n                                &amp;lt;/button&amp;gt;\\n                              &amp;lt;/div&amp;gt;\\n                            ))}\\n                            &amp;lt;button\\n                              onClick={() =&amp;gt; addSectionItem(slideIndex, sectionIndex)}\\n                              className=\\\"text-xs text-gray-400 hover:text-white flex items-center gap-1 mt-1\\\"\\n                            &amp;gt;\\n                              &amp;lt;Plus className=\\\"w-3 h-3\\\" /&amp;gt; Add item\\n                            &amp;lt;/button&amp;gt;\\n                          &amp;lt;/div&amp;gt;\\n                        )}\\n                      &amp;lt;/div&amp;gt;\\n                    ))}\\n\\n                    {slide.highlight &amp;amp;&amp;amp; (\\n                      &amp;lt;div&amp;gt;\\n                        &amp;lt;label className=\\\"block text-sm text-gray-400 mb-1\\\"&amp;gt;Highlight Box&amp;lt;/label&amp;gt;\\n                        &amp;lt;textarea\\n                          value={slide.highlight}\\n                          onChange={(e) =&amp;gt; updateSlide(slideIndex, { highlight: e.target.value })}\\n                          rows={2}\\n                          className=\\\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\\\"\\n                        /&amp;gt;\\n                      &amp;lt;/div&amp;gt;\\n                    )}\\n\\n                    {slide.footnote &amp;amp;&amp;amp; (\\n                      &amp;lt;div&amp;gt;\\n                        &amp;lt;label className=\\\"block text-sm text-gray-400 mb-1\\\"&amp;gt;Footnote&amp;lt;/label&amp;gt;\\n                        &amp;lt;input\\n                          type=\\\"text\\\"\\n                          value={slide.footnote}\\n                          onChange={(e) =&amp;gt; updateSlide(slideIndex, { footnote: e.target.value })}\\n                          className=\\\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\\\"\\n                        /&amp;gt;\\n                      &amp;lt;/div&amp;gt;\\n                    )}\\n\\n                    {/* Image Section */}\\n                    &amp;lt;div className=\\\"border-t border-gray-700 pt-4 mt-4\\\"&amp;gt;\\n                      &amp;lt;label className=\\\"block text-sm text-gray-400 mb-2\\\"&amp;gt;Slide Image&amp;lt;/label&amp;gt;\\n                      \\n                      {slide.image?.url ? (\\n                        &amp;lt;div className=\\\"relative\\\"&amp;gt;\\n                          &amp;lt;div className=\\\"relative w-full h-48 bg-gray-800 rounded-lg overflow-hidden\\\"&amp;gt;\\n                            &amp;lt;img\\n                              src={slide.image.url}\\n                              alt={slide.image.placeholder || 'Slide image'}\\n                              className=\\\"w-full h-full object-contain\\\"\\n                            /&amp;gt;\\n                          &amp;lt;/div&amp;gt;\\n                          &amp;lt;button\\n                            onClick={() =&amp;gt; removeSlideImage(slideIndex)}\\n                            className=\\\"absolute top-2 right-2 bg-red-600 hover:bg-red-700 text-white p-1 rounded\\\"\\n                          &amp;gt;\\n                            &amp;lt;Trash2 className=\\\"w-4 h-4\\\" /&amp;gt;\\n                          &amp;lt;/button&amp;gt;\\n                          &amp;lt;p className=\\\"text-xs text-gray-500 mt-1\\\"&amp;gt;{slide.image.placeholder}&amp;lt;/p&amp;gt;\\n                        &amp;lt;/div&amp;gt;\\n                      ) : (\\n                        &amp;lt;div\\n                          onDrop={(e) =&amp;gt; handleImageDrop(slideIndex, e)}\\n                          onDragOver={(e) =&amp;gt; e.preventDefault()}\\n                          className=\\\"border-2 border-dashed border-gray-600 rounded-lg p-6 text-center hover:border-gray-500 transition-colors\\\"\\n                        &amp;gt;\\n                          &amp;lt;ImageIcon className=\\\"w-12 h-12 mx-auto text-gray-500 mb-3\\\" /&amp;gt;\\n                          &amp;lt;p className=\\\"text-sm text-gray-400 mb-2\\\"&amp;gt;\\n                            {slide.image?.placeholder || 'Drag &amp;amp; drop image here'}\\n                          &amp;lt;/p&amp;gt;\\n                          &amp;lt;p className=\\\"text-xs text-gray-500 mb-3\\\"&amp;gt;\\n                            Type: {slide.image?.type || 'Not set'}\\n                          &amp;lt;/p&amp;gt;\\n                          &amp;lt;label className=\\\"cursor-pointer\\\"&amp;gt;\\n                            &amp;lt;span className=\\\"inline-flex items-center gap-2 px-3 py-1.5 bg-gray-700 hover:bg-gray-600 rounded text-sm text-white\\\"&amp;gt;\\n                              &amp;lt;Upload className=\\\"w-4 h-4\\\" /&amp;gt;\\n                              Upload Image\\n                            &amp;lt;/span&amp;gt;\\n                            &amp;lt;input\\n                              type=\\\"file\\\"\\n                              accept=\\\"image/*\\\"\\n                              onChange={(e) =&amp;gt; handleImageUpload(slideIndex, e)}\\n                              className=\\\"hidden\\\"\\n                            /&amp;gt;\\n                          &amp;lt;/label&amp;gt;\\n                        &amp;lt;/div&amp;gt;\\n                      )}\\n                      \\n                      &amp;lt;div className=\\\"mt-2\\\"&amp;gt;\\n                        &amp;lt;label className=\\\"block text-xs text-gray-500 mb-1\\\"&amp;gt;Image Description (for AI generation)&amp;lt;/label&amp;gt;\\n                        &amp;lt;input\\n                          type=\\\"text\\\"\\n                          value={slide.image?.placeholder || ''}\\n                          onChange={(e) =&amp;gt; updateSlideImage(slideIndex, {\\n                            ...slide.image,\\n                            type: slide.image?.type || 'infographic',\\n                            placeholder: e.target.value,\\n                          })}\\n                          placeholder=\\\"Describe the image you want...\\\"\\n                          className=\\\"w-full bg-gray-700 border border-gray-600 rounded px-2 py-1 text-sm text-white\\\"\\n                        /&amp;gt;\\n                      &amp;lt;/div&amp;gt;\\n                      \\n                      &amp;lt;div className=\\\"mt-2\\\"&amp;gt;\\n                        &amp;lt;label className=\\\"block text-xs text-gray-500 mb-1\\\"&amp;gt;Image Type&amp;lt;/label&amp;gt;\\n                        &amp;lt;select\\n                          value={slide.image?.type || 'infographic'}\\n                          onChange={(e) =&amp;gt; updateSlideImage(slideIndex, {\\n                            ...slide.image,\\n                            type: e.target.value as SlideImage['type'],\\n                            placeholder: slide.image?.placeholder,\\n                          })}\\n                          className=\\\"w-full bg-gray-700 border border-gray-600 rounded px-2 py-1 text-sm text-white\\\"\\n                        &amp;gt;\\n                          &amp;lt;option value=\\\"icon\\\"&amp;gt;Icon&amp;lt;/option&amp;gt;\\n                          &amp;lt;option value=\\\"chart\\\"&amp;gt;Chart&amp;lt;/option&amp;gt;\\n                          &amp;lt;option value=\\\"mockup\\\"&amp;gt;Mockup&amp;lt;/option&amp;gt;\\n                          &amp;lt;option value=\\\"infographic\\\"&amp;gt;Infographic&amp;lt;/option&amp;gt;\\n                          &amp;lt;option value=\\\"photo\\\"&amp;gt;Photo&amp;lt;/option&amp;gt;\\n                          &amp;lt;option value=\\\"diagram\\\"&amp;gt;Diagram&amp;lt;/option&amp;gt;\\n                        &amp;lt;/select&amp;gt;\\n                      &amp;lt;/div&amp;gt;\\n                    &amp;lt;/div&amp;gt;\\n                  &amp;lt;/div&amp;gt;\\n                )}\\n              &amp;lt;/div&amp;gt;\\n            ))}\\n        &amp;lt;/section&amp;gt;\\n\\n        {/* Ask Section */}\\n        &amp;lt;section className=\\\"mb-8\\\"&amp;gt;\\n          &amp;lt;h2 className=\\\"text-lg font-semibold mb-4 text-gray-300\\\"&amp;gt;The Ask&amp;lt;/h2&amp;gt;\\n          &amp;lt;div className=\\\"bg-gray-900 rounded-lg p-4 space-y-4\\\"&amp;gt;\\n            &amp;lt;div&amp;gt;\\n              &amp;lt;label className=\\\"block text-sm text-gray-400 mb-1\\\"&amp;gt;Amount&amp;lt;/label&amp;gt;\\n              &amp;lt;input\\n                type=\\\"text\\\"\\n                value={content.ask.amount}\\n                onChange={(e) =&amp;gt; updateAsk('amount', e.target.value)}\\n                className=\\\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\\\"\\n              /&amp;gt;\\n            &amp;lt;/div&amp;gt;\\n            &amp;lt;div&amp;gt;\\n              &amp;lt;label className=\\\"block text-sm text-gray-400 mb-1\\\"&amp;gt;What we'll do with the funding&amp;lt;/label&amp;gt;\\n              {content.ask.items.map((item, index) =&amp;gt; (\\n                &amp;lt;div key={index} className=\\\"flex gap-2 mb-2\\\"&amp;gt;\\n                  &amp;lt;input\\n                    type=\\\"text\\\"\\n                    value={item}\\n                    onChange={(e) =&amp;gt; {\\n                      const newItems = [...content.ask.items];\\n                      newItems[index] = e.target.value;\\n                      updateAsk('items', newItems);\\n                    }}\\n                    className=\\\"flex-1 bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\\\"\\n                  /&amp;gt;\\n                  &amp;lt;button\\n                    onClick={() =&amp;gt; {\\n                      const newItems = content.ask.items.filter((_, i) =&amp;gt; i !== index);\\n                      updateAsk('items', newItems);\\n                    }}\\n                    className=\\\"text-red-400 hover:text-red-300 p-2\\\"\\n                  &amp;gt;\\n                    &amp;lt;Trash2 className=\\\"w-4 h-4\\\" /&amp;gt;\\n                  &amp;lt;/button&amp;gt;\\n                &amp;lt;/div&amp;gt;\\n              ))}\\n              &amp;lt;button\\n                onClick={() =&amp;gt; updateAsk('items', [...content.ask.items, ''])}\\n                className=\\\"text-sm text-gray-400 hover:text-white flex items-center gap-1\\\"\\n              &amp;gt;\\n                &amp;lt;Plus className=\\\"w-4 h-4\\\" /&amp;gt; Add item\\n              &amp;lt;/button&amp;gt;\\n            &amp;lt;/div&amp;gt;\\n          &amp;lt;/div&amp;gt;\\n        &amp;lt;/section&amp;gt;\\n      &amp;lt;/div&amp;gt;\\n    &amp;lt;/div&amp;gt;\\n  );\\n}\\n\\n\","
                },
                {
                  "lineNumber": 196,
                  "content": "  \"contents\": \"import { NextResponse } from 'next/server';\\nimport { getDeckContent, updateDeckContent, resetDeckContent, DeckContent } from '@/lib/deck-content';\\n\\nexport async function GET() {\\n  try {\\n    const content = getDeckContent();\\n    return NextResponse.json(content);\\n  } catch (error) {\\n    console.error('Error fetching deck content:', error);\\n    return NextResponse.json({ error: 'Failed to fetch content' }, { status: 500 });\\n  }\\n}\\n\\nexport async function PUT(request: Request) {\\n  try {\\n    const body = await request.json() as Partial&amp;lt;DeckContent&amp;gt;;\\n    const updatedContent = updateDeckContent(body);\\n    return NextResponse.json(updatedContent);\\n  } catch (error) {\\n    console.error('Error updating deck content:', error);\\n    return NextResponse.json({ error: 'Failed to update content' }, { status: 500 });\\n  }\\n}\\n\\nexport async function DELETE() {\\n  try {\\n    const content = resetDeckContent();\\n    return NextResponse.json(content);\\n  } catch (error) {\\n    console.error('Error resetting deck content:', error);\\n    return NextResponse.json({ error: 'Failed to reset content' }, { status: 500 });\\n  }\\n}\\n\\n\","
                },
                {
                  "lineNumber": 1711,
                  "content": "  \"contents\": \"import { NextResponse } from 'next/server';\\nimport { getDeckContent, updateDeckContent, resetDeckContent, DeckContent } from '@/lib/deck-content';\\n\\nexport async function GET() {\\n  try {\\n    const content = getDeckContent();\\n    return NextResponse.json(content);\\n  } catch (error) {\\n    console.error('Error fetching deck content:', error);\\n    return NextResponse.json({ error: 'Failed to fetch content' }, { status: 500 });\\n  }\\n}\\n\\nexport async function PUT(request: Request) {\\n  try {\\n    const body = await request.json() as Partial&amp;lt;DeckContent&amp;gt;;\\n    const updatedContent = updateDeckContent(body);\\n    return NextResponse.json(updatedContent);\\n  } catch (error) {\\n    console.error('Error updating deck content:', error);\\n    return NextResponse.json({ error: 'Failed to update content' }, { status: 500 });\\n  }\\n}\\n\\nexport async function DELETE() {\\n  try {\\n    const content = resetDeckContent();\\n    return NextResponse.json(content);\\n  } catch (error) {\\n    console.error('Error resetting deck content:', error);\\n    return NextResponse.json({ error: 'Failed to reset content' }, { status: 500 });\\n  }\\n}\\n\\n\","
                },
                {
                  "lineNumber": 1984,
                  "content": "  \"contents\": \"'use client';\\n\\nimport { useState, useEffect, useCallback, useRef } from 'react';\\nimport Link from 'next/link';\\nimport { Button } from '@/components/ui/button';\\nimport { ArrowLeft, Save, RotateCcw, Eye, Loader2, Plus, Trash2, ChevronDown, ChevronRight, ImageIcon, Upload, Undo2, Redo2 } from 'lucide-react';\\nimport { DeckContent, SlideContent, SlideImage } from '@/lib/deck-content';\\nimport Image from 'next/image';\\n\\nconst MAX_HISTORY = 50;\\n\\nexport default function DeckEditorPage() {\\n  const [content, setContent] = useState&amp;lt;DeckContent | null&amp;gt;(null);\\n  const [isLoading, setIsLoading] = useState(true);\\n  const [isSaving, setIsSaving] = useState(false);\\n  const [expandedSlides, setExpandedSlides] = useState&amp;lt;Set&amp;lt;string&amp;gt;&amp;gt;(new Set());\\n  const [hasChanges, setHasChanges] = useState(false);\\n  \\n  // Undo/Redo state\\n  const [history, setHistory] = useState&amp;lt;DeckContent[]&amp;gt;([]);\\n  const [historyIndex, setHistoryIndex] = useState(-1);\\n  const isUndoRedo = useRef(false);\\n\\n  // Keyboard shortcuts for undo/redo\\n  useEffect(() =&amp;gt; {\\n    const handleKeyDown = (e: KeyboardEvent) =&amp;gt; {\\n      if ((e.metaKey || e.ctrlKey) &amp;amp;&amp;amp; e.key === 'z') {\\n        e.preventDefault();\\n        if (e.shiftKey) {\\n          redo();\\n        } else {\\n          undo();\\n        }\\n      }\\n    };\\n    \\n    window.addEventListener('keydown', handleKeyDown);\\n    return () =&amp;gt; window.removeEventListener('keydown', handleKeyDown);\\n  }, [historyIndex, history]);\\n\\n  useEffect(() =&amp;gt; {\\n    fetchContent();\\n  }, []);\\n\\n  const fetchContent = async () =&amp;gt; {\\n    setIsLoading(true);\\n    try {\\n      const response = await fetch('/api/deck-content');\\n      const data = await response.json();\\n      setContent(data);\\n      // Initialize history with loaded content\\n      setHistory([data]);\\n      setHistoryIndex(0);\\n    } catch (error) {\\n      console.error('Failed to fetch content:', error);\\n    } finally {\\n      setIsLoading(false);\\n    }\\n  };\\n\\n  // Push new state to history\\n  const pushToHistory = useCallback((newContent: DeckContent) =&amp;gt; {\\n    if (isUndoRedo.current) {\\n      isUndoRedo.current = false;\\n      return;\\n    }\\n    \\n    setHistory(prev =&amp;gt; {\\n      // Remove any future states if we're not at the end\\n      const newHistory = prev.slice(0, historyIndex + 1);\\n      // Add new state\\n      newHistory.push(newContent);\\n      // Limit history size\\n      if (newHistory.length &amp;gt; MAX_HISTORY) {\\n        newHistory.shift();\\n        return newHistory;\\n      }\\n      return newHistory;\\n    });\\n    setHistoryIndex(prev =&amp;gt; Math.min(prev + 1, MAX_HISTORY - 1));\\n  }, [historyIndex]);\\n\\n  // Undo function\\n  const undo = useCallback(() =&amp;gt; {\\n    if (historyIndex &amp;gt; 0) {\\n      isUndoRedo.current = true;\\n      const newIndex = historyIndex - 1;\\n      setHistoryIndex(newIndex);\\n      setContent(history[newIndex]);\\n      setHasChanges(true);\\n    }\\n  }, [historyIndex, history]);\\n\\n  // Redo function\\n  const redo = useCallback(() =&amp;gt; {\\n    if (historyIndex &amp;lt; history.length - 1) {\\n      isUndoRedo.current = true;\\n      const newIndex = historyIndex + 1;\\n      setHistoryIndex(newIndex);\\n      setContent(history[newIndex]);\\n      setHasChanges(true);\\n    }\\n  }, [historyIndex, history]);\\n\\n  const canUndo = historyIndex &amp;gt; 0;\\n  const canRedo = historyIndex &amp;lt; history.length - 1;\\n\\n  const saveContent = async () =&amp;gt; {\\n    if (!content) return;\\n    setIsSaving(true);\\n    try {\\n      const response = await fetch('/api/deck-content', {\\n        method: 'PUT',\\n        headers: { 'Content-Type': 'application/json' },\\n        body: JSON.stringify(content),\\n      });\\n      if (response.ok) {\\n        setHasChanges(false);\\n        alert('Content saved successfully!');\\n      }\\n    } catch (error) {\\n      console.error('Failed to save content:', error);\\n      alert('Failed to save content');\\n    } finally {\\n      setIsSaving(false);\\n    }\\n  };\\n\\n  const resetContent = async () =&amp;gt; {\\n    if (!confirm('Reset all content to defaults? This cannot be undone.')) return;\\n    try {\\n      const response = await fetch('/api/deck-content', { method: 'DELETE' });\\n      const data = await response.json();\\n      setContent(data);\\n      setHistory([data]);\\n      setHistoryIndex(0);\\n      setHasChanges(false);\\n    } catch (error) {\\n      console.error('Failed to reset content:', error);\\n    }\\n  };\\n\\n  const updateCover = (field: keyof DeckContent['cover'], value: string) =&amp;gt; {\\n    if (!content) return;\\n    const newContent = { ...content, cover: { ...content.cover, [field]: value } };\\n    setContent(newContent);\\n    pushToHistory(newContent);\\n    setHasChanges(true);\\n  };\\n\\n  const updateSlide = (index: number, updates: Partial&amp;lt;SlideContent&amp;gt;) =&amp;gt; {\\n    if (!content) return;\\n    const newSlides = [...content.slides];\\n    newSlides[index] = { ...newSlides[index], ...updates };\\n    const newContent = { ...content, slides: newSlides };\\n    setContent(newContent);\\n    pushToHistory(newContent);\\n    setHasChanges(true);\\n  };\\n\\n  const updateSlideSection = (slideIndex: number, sectionIndex: number, updates: Partial&amp;lt;SlideContent['sections'][0]&amp;gt;) =&amp;gt; {\\n    if (!content) return;\\n    const newSlides = [...content.slides];\\n    const newSections = [...(newSlides[slideIndex].sections || [])];\\n    newSections[sectionIndex] = { ...newSections[sectionIndex], ...updates };\\n    newSlides[slideIndex] = { ...newSlides[slideIndex], sections: newSections };\\n    const newContent = { ...content, slides: newSlides };\\n    setContent(newContent);\\n    pushToHistory(newContent);\\n    setHasChanges(true);\\n  };\\n\\n  const updateSectionItems = (slideIndex: number, sectionIndex: number, items: string[]) =&amp;gt; {\\n    updateSlideSection(slideIndex, sectionIndex, { items });\\n  };\\n\\n  const addSectionItem = (slideIndex: number, sectionIndex: number) =&amp;gt; {\\n    if (!content) return;\\n    const currentItems = content.slides[slideIndex].sections?.[sectionIndex]?.items || [];\\n    updateSectionItems(slideIndex, sectionIndex, [...currentItems, '']);\\n  };\\n\\n  const removeSectionItem = (slideIndex: number, sectionIndex: number, itemIndex: number) =&amp;gt; {\\n    if (!content) return;\\n    const currentItems = content.slides[slideIndex].sections?.[sectionIndex]?.items || [];\\n    updateSectionItems(slideIndex, sectionIndex, currentItems.filter((_, i) =&amp;gt; i !== itemIndex));\\n  };\\n\\n  const updateAsk = (field: 'amount' | 'items', value: string | string[]) =&amp;gt; {\\n    if (!content) return;\\n    const newContent = { ...content, ask: { ...content.ask, [field]: value } };\\n    setContent(newContent);\\n    pushToHistory(newContent);\\n    setHasChanges(true);\\n  };\\n\\n  const toggleSlide = (slideId: string) =&amp;gt; {\\n    const newExpanded = new Set(expandedSlides);\\n    if (newExpanded.has(slideId)) {\\n      newExpanded.delete(slideId);\\n    } else {\\n      newExpanded.add(slideId);\\n    }\\n    setExpandedSlides(newExpanded);\\n  };\\n\\n  const updateSlideImage = (slideIndex: number, image: SlideImage | undefined) =&amp;gt; {\\n    if (!content) return;\\n    const newSlides = [...content.slides];\\n    newSlides[slideIndex] = { ...newSlides[slideIndex], image };\\n    const newContent = { ...content, slides: newSlides };\\n    setContent(newContent);\\n    pushToHistory(newContent);\\n    setHasChanges(true);\\n  };\\n\\n  const handleImageDrop = async (slideIndex: number, e: React.DragEvent&amp;lt;HTMLDivElement&amp;gt;) =&amp;gt; {\\n    e.preventDefault();\\n    const file = e.dataTransfer.files[0];\\n    if (!file || !file.type.startsWith('image/')) return;\\n    \\n    // Convert to base64 for now (in production, upload to storage)\\n    const reader = new FileReader();\\n    reader.onload = () =&amp;gt; {\\n      const currentImage = content?.slides[slideIndex]?.image;\\n      updateSlideImage(slideIndex, {\\n        ...currentImage,\\n        type: currentImage?.type || 'infographic',\\n        url: reader.result as string,\\n        placeholder: currentImage?.placeholder,\\n      });\\n    };\\n    reader.readAsDataURL(file);\\n  };\\n\\n  const handleImageUpload = async (slideIndex: number, e: React.ChangeEvent&amp;lt;HTMLInputElement&amp;gt;) =&amp;gt; {\\n    const file = e.target.files?.[0];\\n    if (!file || !file.type.startsWith('image/')) return;\\n    \\n    const reader = new FileReader();\\n    reader.onload = () =&amp;gt; {\\n      const currentImage = content?.slides[slideIndex]?.image;\\n      updateSlideImage(slideIndex, {\\n        ...currentImage,\\n        type: currentImage?.type || 'infographic',\\n        url: reader.result as string,\\n        placeholder: currentImage?.placeholder,\\n      });\\n    };\\n    reader.readAsDataURL(file);\\n  };\\n\\n  const removeSlideImage = (slideIndex: number) =&amp;gt; {\\n    if (!content) return;\\n    const currentImage = content.slides[slideIndex]?.image;\\n    if (currentImage) {\\n      updateSlideImage(slideIndex, { ...currentImage, url: undefined });\\n    }\\n  };\\n\\n  if (isLoading) {\\n    return (\\n      &amp;lt;div className=\\\"min-h-screen bg-gray-950 text-white flex items-center justify-center\\\"&amp;gt;\\n        &amp;lt;Loader2 className=\\\"w-8 h-8 animate-spin\\\" /&amp;gt;\\n      &amp;lt;/div&amp;gt;\\n    );\\n  }\\n\\n  if (!content) {\\n    return (\\n      &amp;lt;div className=\\\"min-h-screen bg-gray-950 text-white flex items-center justify-center\\\"&amp;gt;\\n        &amp;lt;p&amp;gt;Failed to load content&amp;lt;/p&amp;gt;\\n      &amp;lt;/div&amp;gt;\\n    );\\n  }\\n\\n  return (\\n    &amp;lt;div className=\\\"min-h-screen bg-gray-950 text-white\\\"&amp;gt;\\n      {/* Header */}\\n      &amp;lt;div className=\\\"sticky top-0 z-10 bg-gray-900 border-b border-gray-800\\\"&amp;gt;\\n        &amp;lt;div className=\\\"container px-4 py-4 flex items-center justify-between\\\"&amp;gt;\\n          &amp;lt;div className=\\\"flex items-center gap-4\\\"&amp;gt;\\n            &amp;lt;Link href=\\\"/admin\\\" className=\\\"text-gray-400 hover:text-white\\\"&amp;gt;\\n              &amp;lt;ArrowLeft className=\\\"w-5 h-5\\\" /&amp;gt;\\n            &amp;lt;/Link&amp;gt;\\n            &amp;lt;h1 className=\\\"text-xl font-bold\\\"&amp;gt;Edit Pitch Deck&amp;lt;/h1&amp;gt;\\n            {hasChanges &amp;amp;&amp;amp; (\\n              &amp;lt;span className=\\\"text-xs bg-yellow-600 px-2 py-1 rounded\\\"&amp;gt;Unsaved changes&amp;lt;/span&amp;gt;\\n            )}\\n          &amp;lt;/div&amp;gt;\\n          \\n          &amp;lt;div className=\\\"flex items-center gap-2\\\"&amp;gt;\\n            &amp;lt;Button\\n              onClick={undo}\\n              disabled={!canUndo}\\n              variant=\\\"outline\\\"\\n              size=\\\"sm\\\"\\n              className=\\\"border-gray-700 text-gray-300 disabled:opacity-30\\\"\\n              title=\\\"Undo (Cmd+Z)\\\"\\n            &amp;gt;\\n              &amp;lt;Undo2 className=\\\"w-4 h-4\\\" /&amp;gt;\\n            &amp;lt;/Button&amp;gt;\\n            &amp;lt;Button\\n              onClick={redo}\\n              disabled={!canRedo}\\n              variant=\\\"outline\\\"\\n              size=\\\"sm\\\"\\n              className=\\\"border-gray-700 text-gray-300 disabled:opacity-30\\\"\\n              title=\\\"Redo (Cmd+Shift+Z)\\\"\\n            &amp;gt;\\n              &amp;lt;Redo2 className=\\\"w-4 h-4\\\" /&amp;gt;\\n            &amp;lt;/Button&amp;gt;\\n            &amp;lt;div className=\\\"w-px h-6 bg-gray-700 mx-1\\\" /&amp;gt;\\n            &amp;lt;Button\\n              onClick={resetContent}\\n              variant=\\\"outline\\\"\\n              size=\\\"sm\\\"\\n              className=\\\"border-gray-700 text-gray-300\\\"\\n            &amp;gt;\\n              &amp;lt;RotateCcw className=\\\"w-4 h-4 mr-2\\\" /&amp;gt;\\n              Reset\\n            &amp;lt;/Button&amp;gt;\\n            &amp;lt;Link href=\\\"/deck\\\" target=\\\"_blank\\\"&amp;gt;\\n              &amp;lt;Button variant=\\\"outline\\\" size=\\\"sm\\\" className=\\\"border-gray-700 text-gray-300\\\"&amp;gt;\\n                &amp;lt;Eye className=\\\"w-4 h-4 mr-2\\\" /&amp;gt;\\n                Preview\\n              &amp;lt;/Button&amp;gt;\\n            &amp;lt;/Link&amp;gt;\\n            &amp;lt;Button\\n              onClick={saveContent}\\n              disabled={isSaving || !hasChanges}\\n              size=\\\"sm\\\"\\n              className=\\\"bg-white text-black hover:bg-gray-200\\\"\\n            &amp;gt;\\n              {isSaving ? &amp;lt;Loader2 className=\\\"w-4 h-4 mr-2 animate-spin\\\" /&amp;gt; : &amp;lt;Save className=\\\"w-4 h-4 mr-2\\\" /&amp;gt;}\\n              Save\\n            &amp;lt;/Button&amp;gt;\\n          &amp;lt;/div&amp;gt;\\n        &amp;lt;/div&amp;gt;\\n      &amp;lt;/div&amp;gt;\\n\\n      &amp;lt;div className=\\\"container px-4 py-8 max-w-4xl\\\"&amp;gt;\\n        {/* Cover Section */}\\n        &amp;lt;section className=\\\"mb-8\\\"&amp;gt;\\n          &amp;lt;h2 className=\\\"text-lg font-semibold mb-4 text-gray-300\\\"&amp;gt;Slides&amp;lt;/h2&amp;gt;\\n          &amp;lt;div className=\\\"bg-gray-900 rounded-lg overflow-hidden mb-2\\\"&amp;gt;\\n            &amp;lt;button\\n              onClick={() =&amp;gt; toggleSlide('cover')}\\n              className=\\\"w-full px-4 py-3 flex items-center justify-between hover:bg-gray-800 transition-colors\\\"\\n            &amp;gt;\\n              &amp;lt;span className=\\\"font-medium\\\"&amp;gt;1. Cover Slide&amp;lt;/span&amp;gt;\\n              {expandedSlides.has('cover') ? (\\n                &amp;lt;ChevronDown className=\\\"w-5 h-5 text-gray-400\\\" /&amp;gt;\\n              ) : (\\n                &amp;lt;ChevronRight className=\\\"w-5 h-5 text-gray-400\\\" /&amp;gt;\\n              )}\\n            &amp;lt;/button&amp;gt;\\n            \\n            {expandedSlides.has('cover') &amp;amp;&amp;amp; (\\n              &amp;lt;div className=\\\"px-4 pb-4 space-y-4 border-t border-gray-800\\\"&amp;gt;\\n                &amp;lt;div className=\\\"pt-4\\\"&amp;gt;\\n                  &amp;lt;label className=\\\"block text-sm text-gray-400 mb-1\\\"&amp;gt;Title&amp;lt;/label&amp;gt;\\n                  &amp;lt;input\\n                    type=\\\"text\\\"\\n                    value={content.cover.title}\\n                    onChange={(e) =&amp;gt; updateCover('title', e.target.value)}\\n                    className=\\\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\\\"\\n                  /&amp;gt;\\n                &amp;lt;/div&amp;gt;\\n                &amp;lt;div&amp;gt;\\n                  &amp;lt;label className=\\\"block text-sm text-gray-400 mb-1\\\"&amp;gt;Tagline&amp;lt;/label&amp;gt;\\n                  &amp;lt;textarea\\n                    value={content.cover.tagline}\\n                    onChange={(e) =&amp;gt; updateCover('tagline', e.target.value)}\\n                    rows={2}\\n                    className=\\\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\\\"\\n                  /&amp;gt;\\n                &amp;lt;/div&amp;gt;\\n                &amp;lt;div&amp;gt;\\n                  &amp;lt;label className=\\\"block text-sm text-gray-400 mb-1\\\"&amp;gt;Subtagline&amp;lt;/label&amp;gt;\\n                  &amp;lt;input\\n                    type=\\\"text\\\"\\n                    value={content.cover.subtagline}\\n                    onChange={(e) =&amp;gt; updateCover('subtagline', e.target.value)}\\n                    className=\\\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\\\"\\n                  /&amp;gt;\\n                &amp;lt;/div&amp;gt;\\n                &amp;lt;div&amp;gt;\\n                  &amp;lt;label className=\\\"block text-sm text-gray-400 mb-1\\\"&amp;gt;URL&amp;lt;/label&amp;gt;\\n                  &amp;lt;input\\n                    type=\\\"text\\\"\\n                    value={content.cover.url}\\n                    onChange={(e) =&amp;gt; updateCover('url', e.target.value)}\\n                    className=\\\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\\\"\\n                  /&amp;gt;\\n                &amp;lt;/div&amp;gt;\\n              &amp;lt;/div&amp;gt;\\n            )}\\n          &amp;lt;/div&amp;gt;\\n\\n          {content.slides.map((slide, slideIndex) =&amp;gt; (\\n              &amp;lt;div key={slide.id} className=\\\"bg-gray-900 rounded-lg overflow-hidden\\\"&amp;gt;\\n                &amp;lt;button\\n                  onClick={() =&amp;gt; toggleSlide(slide.id)}\\n                  className=\\\"w-full px-4 py-3 flex items-center justify-between hover:bg-gray-800 transition-colors\\\"\\n                &amp;gt;\\n                  &amp;lt;span className=\\\"font-medium\\\"&amp;gt;\\n                    {slideIndex + 2}. {slide.title}\\n                  &amp;lt;/span&amp;gt;\\n                  {expandedSlides.has(slide.id) ? (\\n                    &amp;lt;ChevronDown className=\\\"w-5 h-5 text-gray-400\\\" /&amp;gt;\\n                  ) : (\\n                    &amp;lt;ChevronRight className=\\\"w-5 h-5 text-gray-400\\\" /&amp;gt;\\n                  )}\\n                &amp;lt;/button&amp;gt;\\n                \\n                {expandedSlides.has(slide.id) &amp;amp;&amp;amp; (\\n                  &amp;lt;div className=\\\"px-4 pb-4 space-y-4 border-t border-gray-800\\\"&amp;gt;\\n                    &amp;lt;div className=\\\"pt-4\\\"&amp;gt;\\n                      &amp;lt;label className=\\\"block text-sm text-gray-400 mb-1\\\"&amp;gt;Title&amp;lt;/label&amp;gt;\\n                      &amp;lt;input\\n                        type=\\\"text\\\"\\n                        value={slide.title}\\n                        onChange={(e) =&amp;gt; updateSlide(slideIndex, { title: e.target.value })}\\n                        className=\\\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\\\"\\n                      /&amp;gt;\\n                    &amp;lt;/div&amp;gt;\\n                    \\n                    &amp;lt;div&amp;gt;\\n                      &amp;lt;label className=\\\"block text-sm text-gray-400 mb-1\\\"&amp;gt;Subtitle&amp;lt;/label&amp;gt;\\n                      &amp;lt;input\\n                        type=\\\"text\\\"\\n                        value={slide.subtitle || ''}\\n                        onChange={(e) =&amp;gt; updateSlide(slideIndex, { subtitle: e.target.value })}\\n                        className=\\\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\\\"\\n                      /&amp;gt;\\n                    &amp;lt;/div&amp;gt;\\n\\n                    {/* Sections */}\\n                    {slide.sections?.map((section, sectionIndex) =&amp;gt; (\\n                      &amp;lt;div key={sectionIndex} className=\\\"bg-gray-800 rounded p-3 space-y-3\\\"&amp;gt;\\n                        &amp;lt;div&amp;gt;\\n                          &amp;lt;label className=\\\"block text-xs text-gray-500 mb-1\\\"&amp;gt;Section Heading&amp;lt;/label&amp;gt;\\n                          &amp;lt;input\\n                            type=\\\"text\\\"\\n                            value={section.heading || ''}\\n                            onChange={(e) =&amp;gt; updateSlideSection(slideIndex, sectionIndex, { heading: e.target.value })}\\n                            className=\\\"w-full bg-gray-700 border border-gray-600 rounded px-2 py-1 text-sm text-white\\\"\\n                          /&amp;gt;\\n                        &amp;lt;/div&amp;gt;\\n                        \\n                        {section.text !== undefined &amp;amp;&amp;amp; (\\n                          &amp;lt;div&amp;gt;\\n                            &amp;lt;label className=\\\"block text-xs text-gray-500 mb-1\\\"&amp;gt;Text&amp;lt;/label&amp;gt;\\n                            &amp;lt;textarea\\n                              value={section.text}\\n                              onChange={(e) =&amp;gt; updateSlideSection(slideIndex, sectionIndex, { text: e.target.value })}\\n                              rows={2}\\n                              className=\\\"w-full bg-gray-700 border border-gray-600 rounded px-2 py-1 text-sm text-white\\\"\\n                            /&amp;gt;\\n                          &amp;lt;/div&amp;gt;\\n                        )}\\n                        \\n                        {section.items &amp;amp;&amp;amp; (\\n                          &amp;lt;div&amp;gt;\\n                            &amp;lt;label className=\\\"block text-xs text-gray-500 mb-1\\\"&amp;gt;Bullet Points&amp;lt;/label&amp;gt;\\n                            {section.items.map((item, itemIndex) =&amp;gt; (\\n                              &amp;lt;div key={itemIndex} className=\\\"flex gap-2 mb-1\\\"&amp;gt;\\n                                &amp;lt;input\\n                                  type=\\\"text\\\"\\n                                  value={item}\\n                                  onChange={(e) =&amp;gt; {\\n                                    const newItems = [...section.items!];\\n                                    newItems[itemIndex] = e.target.value;\\n                                    updateSectionItems(slideIndex, sectionIndex, newItems);\\n                                  }}\\n                                  className=\\\"flex-1 bg-gray-700 border border-gray-600 rounded px-2 py-1 text-sm text-white\\\"\\n                                /&amp;gt;\\n                                &amp;lt;button\\n                                  onClick={() =&amp;gt; removeSectionItem(slideIndex, sectionIndex, itemIndex)}\\n                                  className=\\\"text-red-400 hover:text-red-300 p-1\\\"\\n                                &amp;gt;\\n                                  &amp;lt;Trash2 className=\\\"w-4 h-4\\\" /&amp;gt;\\n                                &amp;lt;/button&amp;gt;\\n                              &amp;lt;/div&amp;gt;\\n                            ))}\\n                            &amp;lt;button\\n                              onClick={() =&amp;gt; addSectionItem(slideIndex, sectionIndex)}\\n                              className=\\\"text-xs text-gray-400 hover:text-white flex items-center gap-1 mt-1\\\"\\n                            &amp;gt;\\n                              &amp;lt;Plus className=\\\"w-3 h-3\\\" /&amp;gt; Add item\\n                            &amp;lt;/button&amp;gt;\\n                          &amp;lt;/div&amp;gt;\\n                        )}\\n                      &amp;lt;/div&amp;gt;\\n                    ))}\\n\\n                    {slide.highlight &amp;amp;&amp;amp; (\\n                      &amp;lt;div&amp;gt;\\n                        &amp;lt;label className=\\\"block text-sm text-gray-400 mb-1\\\"&amp;gt;Highlight Box&amp;lt;/label&amp;gt;\\n                        &amp;lt;textarea\\n                          value={slide.highlight}\\n                          onChange={(e) =&amp;gt; updateSlide(slideIndex, { highlight: e.target.value })}\\n                          rows={2}\\n                          className=\\\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\\\"\\n                        /&amp;gt;\\n                      &amp;lt;/div&amp;gt;\\n                    )}\\n\\n                    {slide.footnote &amp;amp;&amp;amp; (\\n                      &amp;lt;div&amp;gt;\\n                        &amp;lt;label className=\\\"block text-sm text-gray-400 mb-1\\\"&amp;gt;Footnote&amp;lt;/label&amp;gt;\\n                        &amp;lt;input\\n                          type=\\\"text\\\"\\n                          value={slide.footnote}\\n                          onChange={(e) =&amp;gt; updateSlide(slideIndex, { footnote: e.target.value })}\\n                          className=\\\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\\\"\\n                        /&amp;gt;\\n                      &amp;lt;/div&amp;gt;\\n                    )}\\n\\n                    {/* Image Section */}\\n                    &amp;lt;div className=\\\"border-t border-gray-700 pt-4 mt-4\\\"&amp;gt;\\n                      &amp;lt;label className=\\\"block text-sm text-gray-400 mb-2\\\"&amp;gt;Slide Image&amp;lt;/label&amp;gt;\\n                      \\n                      {slide.image?.url ? (\\n                        &amp;lt;div className=\\\"relative\\\"&amp;gt;\\n                          &amp;lt;div className=\\\"relative w-full h-48 bg-gray-800 rounded-lg overflow-hidden\\\"&amp;gt;\\n                            &amp;lt;img\\n                              src={slide.image.url}\\n                              alt={slide.image.placeholder || 'Slide image'}\\n                              className=\\\"w-full h-full object-contain\\\"\\n                            /&amp;gt;\\n                          &amp;lt;/div&amp;gt;\\n                          &amp;lt;button\\n                            onClick={() =&amp;gt; removeSlideImage(slideIndex)}\\n                            className=\\\"absolute top-2 right-2 bg-red-600 hover:bg-red-700 text-white p-1 rounded\\\"\\n                          &amp;gt;\\n                            &amp;lt;Trash2 className=\\\"w-4 h-4\\\" /&amp;gt;\\n                          &amp;lt;/button&amp;gt;\\n                          &amp;lt;p className=\\\"text-xs text-gray-500 mt-1\\\"&amp;gt;{slide.image.placeholder}&amp;lt;/p&amp;gt;\\n                        &amp;lt;/div&amp;gt;\\n                      ) : (\\n                        &amp;lt;div\\n                          onDrop={(e) =&amp;gt; handleImageDrop(slideIndex, e)}\\n                          onDragOver={(e) =&amp;gt; e.preventDefault()}\\n                          className=\\\"border-2 border-dashed border-gray-600 rounded-lg p-6 text-center hover:border-gray-500 transition-colors\\\"\\n                        &amp;gt;\\n                          &amp;lt;ImageIcon className=\\\"w-12 h-12 mx-auto text-gray-500 mb-3\\\" /&amp;gt;\\n                          &amp;lt;p className=\\\"text-sm text-gray-400 mb-2\\\"&amp;gt;\\n                            {slide.image?.placeholder || 'Drag &amp;amp; drop image here'}\\n                          &amp;lt;/p&amp;gt;\\n                          &amp;lt;p className=\\\"text-xs text-gray-500 mb-3\\\"&amp;gt;\\n                            Type: {slide.image?.type || 'Not set'}\\n                          &amp;lt;/p&amp;gt;\\n                          &amp;lt;label className=\\\"cursor-pointer\\\"&amp;gt;\\n                            &amp;lt;span className=\\\"inline-flex items-center gap-2 px-3 py-1.5 bg-gray-700 hover:bg-gray-600 rounded text-sm text-white\\\"&amp;gt;\\n                              &amp;lt;Upload className=\\\"w-4 h-4\\\" /&amp;gt;\\n                              Upload Image\\n                            &amp;lt;/span&amp;gt;\\n                            &amp;lt;input\\n                              type=\\\"file\\\"\\n                              accept=\\\"image/*\\\"\\n                              onChange={(e) =&amp;gt; handleImageUpload(slideIndex, e)}\\n                              className=\\\"hidden\\\"\\n                            /&amp;gt;\\n                          &amp;lt;/label&amp;gt;\\n                        &amp;lt;/div&amp;gt;\\n                      )}\\n                      \\n                      &amp;lt;div className=\\\"mt-2\\\"&amp;gt;\\n                        &amp;lt;label className=\\\"block text-xs text-gray-500 mb-1\\\"&amp;gt;Image Description (for AI generation)&amp;lt;/label&amp;gt;\\n                        &amp;lt;input\\n                          type=\\\"text\\\"\\n                          value={slide.image?.placeholder || ''}\\n                          onChange={(e) =&amp;gt; updateSlideImage(slideIndex, {\\n                            ...slide.image,\\n                            type: slide.image?.type || 'infographic',\\n                            placeholder: e.target.value,\\n                          })}\\n                          placeholder=\\\"Describe the image you want...\\\"\\n                          className=\\\"w-full bg-gray-700 border border-gray-600 rounded px-2 py-1 text-sm text-white\\\"\\n                        /&amp;gt;\\n                      &amp;lt;/div&amp;gt;\\n                      \\n                      &amp;lt;div className=\\\"mt-2\\\"&amp;gt;\\n                        &amp;lt;label className=\\\"block text-xs text-gray-500 mb-1\\\"&amp;gt;Image Type&amp;lt;/label&amp;gt;\\n                        &amp;lt;select\\n                          value={slide.image?.type || 'infographic'}\\n                          onChange={(e) =&amp;gt; updateSlideImage(slideIndex, {\\n                            ...slide.image,\\n                            type: e.target.value as SlideImage['type'],\\n                            placeholder: slide.image?.placeholder,\\n                          })}\\n                          className=\\\"w-full bg-gray-700 border border-gray-600 rounded px-2 py-1 text-sm text-white\\\"\\n                        &amp;gt;\\n                          &amp;lt;option value=\\\"icon\\\"&amp;gt;Icon&amp;lt;/option&amp;gt;\\n                          &amp;lt;option value=\\\"chart\\\"&amp;gt;Chart&amp;lt;/option&amp;gt;\\n                          &amp;lt;option value=\\\"mockup\\\"&amp;gt;Mockup&amp;lt;/option&amp;gt;\\n                          &amp;lt;option value=\\\"infographic\\\"&amp;gt;Infographic&amp;lt;/option&amp;gt;\\n                          &amp;lt;option value=\\\"photo\\\"&amp;gt;Photo&amp;lt;/option&amp;gt;\\n                          &amp;lt;option value=\\\"diagram\\\"&amp;gt;Diagram&amp;lt;/option&amp;gt;\\n                        &amp;lt;/select&amp;gt;\\n                      &amp;lt;/div&amp;gt;\\n                    &amp;lt;/div&amp;gt;\\n                  &amp;lt;/div&amp;gt;\\n                )}\\n              &amp;lt;/div&amp;gt;\\n            ))}\\n        &amp;lt;/section&amp;gt;\\n\\n        {/* Ask Section */}\\n        &amp;lt;section className=\\\"mb-8\\\"&amp;gt;\\n          &amp;lt;h2 className=\\\"text-lg font-semibold mb-4 text-gray-300\\\"&amp;gt;The Ask&amp;lt;/h2&amp;gt;\\n          &amp;lt;div className=\\\"bg-gray-900 rounded-lg p-4 space-y-4\\\"&amp;gt;\\n            &amp;lt;div&amp;gt;\\n              &amp;lt;label className=\\\"block text-sm text-gray-400 mb-1\\\"&amp;gt;Amount&amp;lt;/label&amp;gt;\\n              &amp;lt;input\\n                type=\\\"text\\\"\\n                value={content.ask.amount}\\n                onChange={(e) =&amp;gt; updateAsk('amount', e.target.value)}\\n                className=\\\"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\\\"\\n              /&amp;gt;\\n            &amp;lt;/div&amp;gt;\\n            &amp;lt;div&amp;gt;\\n              &amp;lt;label className=\\\"block text-sm text-gray-400 mb-1\\\"&amp;gt;What we'll do with the funding&amp;lt;/label&amp;gt;\\n              {content.ask.items.map((item, index) =&amp;gt; (\\n                &amp;lt;div key={index} className=\\\"flex gap-2 mb-2\\\"&amp;gt;\\n                  &amp;lt;input\\n                    type=\\\"text\\\"\\n                    value={item}\\n                    onChange={(e) =&amp;gt; {\\n                      const newItems = [...content.ask.items];\\n                      newItems[index] = e.target.value;\\n                      updateAsk('items', newItems);\\n                    }}\\n                    className=\\\"flex-1 bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white\\\"\\n                  /&amp;gt;\\n                  &amp;lt;button\\n                    onClick={() =&amp;gt; {\\n                      const newItems = content.ask.items.filter((_, i) =&amp;gt; i !== index);\\n                      updateAsk('items', newItems);\\n                    }}\\n                    className=\\\"text-red-400 hover:text-red-300 p-2\\\"\\n                  &amp;gt;\\n                    &amp;lt;Trash2 className=\\\"w-4 h-4\\\" /&amp;gt;\\n                  &amp;lt;/button&amp;gt;\\n                &amp;lt;/div&amp;gt;\\n              ))}\\n              &amp;lt;button\\n                onClick={() =&amp;gt; updateAsk('items', [...content.ask.items, ''])}\\n                className=\\\"text-sm text-gray-400 hover:text-white flex items-center gap-1\\\"\\n              &amp;gt;\\n                &amp;lt;Plus className=\\\"w-4 h-4\\\" /&amp;gt; Add item\\n              &amp;lt;/button&amp;gt;\\n            &amp;lt;/div&amp;gt;\\n          &amp;lt;/div&amp;gt;\\n        &amp;lt;/section&amp;gt;\\n      &amp;lt;/div&amp;gt;\\n    &amp;lt;/div&amp;gt;\\n  );\\n}\\n\\n\","
                }
              ]
            },
            {
              "file": "./.specstory/history/2025-12-08_21-02Z-convert-website-for-director-for-good.md",
              "matches": [
                {
                  "lineNumber": 9569,
                  "content": "+ import { getDeckContent, updateDeckContent, resetDeckContent, DeckContent } from '@/lib/deck-content';"
                },
                {
                  "lineNumber": 9642,
                  "content": "+ import { DeckContent, SlideContent } from '@/lib/deck-content';"
                },
                {
                  "lineNumber": 10072,
                  "content": "+ import { getDeckContent } from \"@/lib/deck-content\";"
                },
                {
                  "lineNumber": 11327,
                  "content": "+ import { getDeckContent, DeckContent, SlideContent } from '@/lib/deck-content';"
                },
                {
                  "lineNumber": 14922,
                  "content": "- import { DeckContent, SlideContent } from '@/lib/deck-content';"
                },
                {
                  "lineNumber": 14924,
                  "content": "+ import { DeckContent, SlideContent, SlideImage } from '@/lib/deck-content';"
                },
                {
                  "lineNumber": 17274,
                  "content": "  import { DeckContent, SlideContent, SlideImage } from '@/lib/deck-content';"
                }
              ]
            }
          ],
          "totalLines": 39,
          "totalMatchedLines": 39
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
Too many results, let me be more specific.</details></think>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "getDeckContent|updateDeckContent|resetDeckContent",
  "path": "/Users/boskombp16/GitHub/directorforgood.org",
  "glob": "*.ts",
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "getDeckContent|updateDeckContent|resetDeckContent",
    "path": "/Users/boskombp16/GitHub/directorforgood.org",
    "outputMode": "content",
    "workspaceResults": {
      "/Users/boskombp16/GitHub/directorforgood.org": {
        "content": {
          "matches": [
            {
              "file": "./lib/deck-content-server.ts",
              "matches": [
                {
                  "lineNumber": 20,
                  "content": "export function getDeckContent(): DeckContent {"
                },
                {
                  "lineNumber": 34,
                  "content": "export function updateDeckContent(content: Partial&lt;DeckContent&gt;): DeckContent {"
                },
                {
                  "lineNumber": 37,
                  "content": "    const currentContent = getDeckContent();"
                },
                {
                  "lineNumber": 48,
                  "content": "export function resetDeckContent(): DeckContent {"
                }
              ]
            },
            {
              "file": "./app/api/deck/ai-edit/route.ts",
              "matches": [
                {
                  "lineNumber": 4,
                  "content": "import { getDeckContent, DeckContent } from '@/lib/deck-content';"
                },
                {
                  "lineNumber": 51,
                  "content": "    const deckContent = currentContent || getDeckContent();"
                }
              ]
            },
            {
              "file": "./app/api/deck-content/route.ts",
              "matches": [
                {
                  "lineNumber": 2,
                  "content": "import { getDeckContent, updateDeckContent, resetDeckContent, DeckContent } from '@/lib/deck-content';"
                },
                {
                  "lineNumber": 8,
                  "content": "    const content = getDeckContent();"
                },
                {
                  "lineNumber": 31,
                  "content": "    const updatedContent = updateDeckContent(contentToUpdate);"
                },
                {
                  "lineNumber": 53,
                  "content": "    const content = resetDeckContent();"
                }
              ]
            },
            {
              "file": "./app/api/deck-content/versions/[id]/restore/route.ts",
              "matches": [
                {
                  "lineNumber": 5,
                  "content": "import { updateDeckContent, DeckContent } from '@/lib/deck-content';"
                },
                {
                  "lineNumber": 32,
                  "content": "    const restoredContent = updateDeckContent(version.content as DeckContent);"
                }
              ]
            }
          ],
          "totalLines": 12,
          "totalMatchedLines": 12
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
I need to update the imports in:
1. `./app/api/deck/ai-edit/route.ts`
2. `./app/api/deck-content/route.ts`
3. `./app/api/deck-content/versions/[id]/restore/route.ts`

Let me read each file and update the imports.</details></think>

---

<tool-use data-tool-type="unknown" data-tool-name="read_file_v2">
<details>
<summary>Tool use: **read_file_v2**</summary>


Parameters:

```json
{
  "targetFile": "/Users/boskombp16/GitHub/directorforgood.org/app/api/deck/ai-edit/route.ts",
  "charsLimit": 1000000,
  "effectiveUri": "/Users/boskombp16/GitHub/directorforgood.org/app/api/deck/ai-edit/route.ts"
}
```
Result:

```json
{
  "contents": "import { openai } from '@ai-sdk/openai';\nimport { generateText } from 'ai';\nimport { NextResponse } from 'next/server';\nimport { getDeckContent, DeckContent } from '@/lib/deck-content';\n\nconst SYSTEM_PROMPT = &#96;You are an AI assistant that helps edit pitch deck content. You receive the current deck content as JSON and a user instruction describing what changes to make.\n\nYour job is to:\n1. Understand the user's request\n2. Return the modified deck content as valid JSON\n3. Provide a brief description of what you changed\n\nThe deck structure has:\n- cover: { title, tagline, subtagline, url }\n- slides: array of slides, each with { id, title, subtitle?, sections?, highlight?, footnote?, image? }\n- ask: { amount, items[] }\n\nEach slide section has: { heading?, items[]?, text? }\nEach slide image has: { type, placeholder, url? }\n\nIMPORTANT RULES:\n- Return ONLY valid JSON in your response\n- Preserve the existing structure and IDs unless explicitly asked to change them\n- When adding a new slide, generate a unique kebab-case id\n- Keep the same formatting style as the existing content\n- Be concise in titles and bullet points\n\nRespond with a JSON object in this exact format:\n{\n  \"success\": true,\n  \"content\": { ...the full updated deck content... },\n  \"description\": \"Brief description of changes made\",\n  \"changes\": [\"List of specific changes made\"]\n}\n\nIf the request is unclear or cannot be fulfilled, respond with:\n{\n  \"success\": false,\n  \"error\": \"Explanation of why the request cannot be fulfilled\"\n}&#96;;\n\nexport async function POST(request: Request) {\n  try {\n    const { instruction, currentContent } = await request.json();\n\n    if (!instruction) {\n      return NextResponse.json({ error: 'Instruction is required' }, { status: 400 });\n    }\n\n    // Get current content if not provided\n    const deckContent = currentContent || getDeckContent();\n\n    const { text } = await generateText({\n      model: openai('gpt-4o'),\n      system: SYSTEM_PROMPT,\n      prompt: &#96;Current deck content:\n\\&#96;\\&#96;\\&#96;json\n${JSON.stringify(deckContent, null, 2)}\n\\&#96;\\&#96;\\&#96;\n\nUser instruction: ${instruction}\n\nPlease provide the updated deck content as JSON.&#96;,\n      maxOutputTokens: 8000,\n    });\n\n    // Parse the AI response\n    let result;\n    try {\n      // Try to extract JSON from the response\n      const jsonMatch = text.match(/\\{[\\s\\S]*\\}/);\n      if (jsonMatch) {\n        result = JSON.parse(jsonMatch[0]);\n      } else {\n        throw new Error('No JSON found in response');\n      }\n    } catch (parseError) {\n      console.error('Failed to parse AI response:', text);\n      return NextResponse.json({\n        success: false,\n        error: 'Failed to parse AI response. Please try rephrasing your request.',\n        rawResponse: text,\n      }, { status: 500 });\n    }\n\n    if (!result.success) {\n      return NextResponse.json(result, { status: 400 });\n    }\n\n    // Validate the content structure\n    if (!result.content || !result.content.cover || !result.content.slides || !result.content.ask) {\n      return NextResponse.json({\n        success: false,\n        error: 'AI returned invalid deck structure',\n      }, { status: 500 });\n    }\n\n    return NextResponse.json({\n      success: true,\n      content: result.content,\n      description: result.description || 'Changes applied',\n      changes: result.changes || [],\n    });\n  } catch (error) {\n    console.error('Error in AI edit:', error);\n    return NextResponse.json({\n      success: false,\n      error: error instanceof Error ? error.message : 'Failed to process AI edit',\n    }, { status: 500 });\n  }\n}\n",
  "totalLinesInFile": 112
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="read_file_v2">
<details>
<summary>Tool use: **read_file_v2**</summary>


Parameters:

```json
{
  "targetFile": "/Users/boskombp16/GitHub/directorforgood.org/app/api/deck-content/route.ts",
  "charsLimit": 1000000,
  "effectiveUri": "/Users/boskombp16/GitHub/directorforgood.org/app/api/deck-content/route.ts"
}
```
Result:

```json
{
  "contents": "import { NextResponse } from 'next/server';\nimport { getDeckContent, updateDeckContent, resetDeckContent, DeckContent } from '@/lib/deck-content';\nimport { db } from '@/db';\nimport { deckVersions } from '@/db/schema';\n\nexport async function GET() {\n  try {\n    const content = getDeckContent();\n    return NextResponse.json(content);\n  } catch (error) {\n    console.error('Error fetching deck content:', error);\n    return NextResponse.json({ error: 'Failed to fetch content' }, { status: 500 });\n  }\n}\n\nexport async function PUT(request: Request) {\n  try {\n    const body = await request.json() as { content?: Partial&lt;DeckContent&gt;; description?: string } | Partial&lt;DeckContent&gt;;\n    \n    // Support both { content, description } format and direct content format\n    let contentToUpdate: Partial&lt;DeckContent&gt;;\n    let description: string | undefined;\n    \n    if ('content' in body &amp;&amp; typeof body.content === 'object') {\n      contentToUpdate = body.content as Partial&lt;DeckContent&gt;;\n      description = (body as { description?: string }).description;\n    } else {\n      contentToUpdate = body as Partial&lt;DeckContent&gt;;\n    }\n    \n    const updatedContent = updateDeckContent(contentToUpdate);\n    \n    // Auto-save version to database\n    try {\n      await db.insert(deckVersions).values({\n        content: updatedContent,\n        description: description || &#96;Manual save at ${new Date().toLocaleString()}&#96;,\n      });\n    } catch (dbError) {\n      // Log but don't fail the request if version save fails\n      console.error('Failed to save version to database:', dbError);\n    }\n    \n    return NextResponse.json(updatedContent);\n  } catch (error) {\n    console.error('Error updating deck content:', error);\n    return NextResponse.json({ error: 'Failed to update content' }, { status: 500 });\n  }\n}\n\nexport async function DELETE() {\n  try {\n    const content = resetDeckContent();\n    \n    // Save version before reset\n    try {\n      await db.insert(deckVersions).values({\n        content: content,\n        description: 'Reset to defaults',\n      });\n    } catch (dbError) {\n      console.error('Failed to save version to database:', dbError);\n    }\n    \n    return NextResponse.json(content);\n  } catch (error) {\n    console.error('Error resetting deck content:', error);\n    return NextResponse.json({ error: 'Failed to reset content' }, { status: 500 });\n  }\n}\n\n",
  "totalLinesInFile": 72
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="read_file_v2">
<details>
<summary>Tool use: **read_file_v2**</summary>


Parameters:

```json
{
  "targetFile": "/Users/boskombp16/GitHub/directorforgood.org/app/api/deck-content/versions/[id]/restore/route.ts",
  "charsLimit": 1000000,
  "effectiveUri": "/Users/boskombp16/GitHub/directorforgood.org/app/api/deck-content/versions/[id]/restore/route.ts"
}
```
Result:

```json
{
  "contents": "import { NextResponse } from 'next/server';\nimport { db } from '@/db';\nimport { deckVersions } from '@/db/schema';\nimport { eq } from 'drizzle-orm';\nimport { updateDeckContent, DeckContent } from '@/lib/deck-content';\n\n// POST /api/deck-content/versions/[id]/restore - Restore a specific version\nexport async function POST(\n  request: Request,\n  { params }: { params: Promise&lt;{ id: string }&gt; }\n) {\n  try {\n    const { id } = await params;\n    const versionId = parseInt(id, 10);\n\n    if (isNaN(versionId)) {\n      return NextResponse.json({ error: 'Invalid version ID' }, { status: 400 });\n    }\n\n    // Get the version from the database\n    const [version] = await db\n      .select()\n      .from(deckVersions)\n      .where(eq(deckVersions.id, versionId))\n      .limit(1);\n\n    if (!version) {\n      return NextResponse.json({ error: 'Version not found' }, { status: 404 });\n    }\n\n    // Restore the content\n    const restoredContent = updateDeckContent(version.content as DeckContent);\n\n    // Create a new version entry for this restore action\n    await db.insert(deckVersions).values({\n      content: restoredContent,\n      description: &#96;Restored from version #${versionId}&#96;,\n    });\n\n    return NextResponse.json({\n      success: true,\n      content: restoredContent,\n      message: &#96;Restored from version #${versionId}&#96;,\n    });\n  } catch (error) {\n    console.error('Error restoring deck version:', error);\n    return NextResponse.json({ error: 'Failed to restore version' }, { status: 500 });\n  }\n}\n",
  "totalLinesInFile": 50
}
```
Status: **completed**


</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
Now I need to update all three files to import the server functions from `deck-content-server.ts` instead of `deck-content.ts`.Good, I've updated all the imports. Now the `deck-content.ts` file no longer has any Node.js-specific imports (fs, path), so it can be safely imported by client components. The server-only functions are now in `deck-content-server.ts` which is only imported by API routes (server-side code).

Let me verify that `deck-content.ts` is clean now.</details></think>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "/Users/boskombp16/GitHub/directorforgood.org/app/api/deck/ai-edit/route.ts"
}
```
Additional data:

```json
{
  "codeblockId": "5c07ee84-855a-4eb7-9ec2-ee483e768026"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "/Users/boskombp16/GitHub/directorforgood.org/app/api/deck-content/route.ts"
}
```
Additional data:

```json
{
  "codeblockId": "a0e6cdb0-f592-414b-9ff5-0a783469a9b9"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "/Users/boskombp16/GitHub/directorforgood.org/app/api/deck-content/versions/[id]/restore/route.ts"
}
```
Additional data:

```json
{
  "codeblockId": "ca649352-2d33-49da-8587-c1ce136a18ed"
}
```
Status: **completed**


</details>
</tool-use>

---



---

Done. The fix:

1. **Removed** `fs` and `path` imports and server functions from `lib/deck-content.ts`
2. **Created** `lib/deck-content-server.ts` with the file system operations
3. **Updated** the 3 API routes to import server functions from the new file

The client component (`app/admin/deck/page.tsx`) can now safely import types and `defaultSlideOrder` from `deck-content.ts` since it no longer has Node.js dependencies.

---

_**User (2025-12-09 10:50Z)**_



---

_**Agent (model claude-4.5-opus-high-thinking, mode Agent)**_

<think><details><summary>Thought Process</summary>
The error shows that `app/page.tsx` is trying to import `getDeckContent` from `@/lib/deck-content`, but I moved that function to `deck-content-server.ts`. Let me fix this file.</details></think>

---

<tool-use data-tool-type="unknown" data-tool-name="read_file_v2">
<details>
<summary>Tool use: **read_file_v2**</summary>


Parameters:

```json
{
  "targetFile": "/Users/boskombp16/GitHub/directorforgood.org/app/page.tsx",
  "charsLimit": 1000000,
  "effectiveUri": "/Users/boskombp16/GitHub/directorforgood.org/app/page.tsx"
}
```
Result:

```json
{
  "contents": "import Link from \"next/link\";\nimport { Button } from \"@/components/ui/button\";\nimport { ArrowRight, Users, TrendingUp, Shield, FileText, Bot, DollarSign, Clock, Target, CheckCircle2 } from \"lucide-react\";\nimport { SiteHeader } from \"@/components/site-header\";\nimport { SiteFooter } from \"@/components/site-footer\";\nimport { getDeckContent } from \"@/lib/deck-content\";\n\nexport const dynamic = \"force-dynamic\";\n\nexport default async function HomePage() {\n  const content = getDeckContent();\n  \n  // Helper to find a slide by ID\n  const getSlide = (id: string) =&gt; content.slides.find(s =&gt; s.id === id);\n\n  return (\n    &lt;div className=\"bg-black text-white min-h-screen\"&gt;\n      &lt;SiteHeader /&gt;\n\n      {/* Hero Section */}\n      &lt;section className=\"relative min-h-[90vh] flex items-center justify-center overflow-hidden bg-gradient-to-b from-gray-900 via-black to-black\"&gt;\n        &lt;div className=\"absolute inset-0 bg-[radial-gradient(circle_at_50%_50%,rgba(120,119,198,0.1),transparent_50%)]\" /&gt;\n        \n        &lt;div className=\"relative z-10 container text-center px-4 py-20\"&gt;\n          &lt;h1 className=\"text-6xl md:text-8xl font-bold mb-6 tracking-tight\"&gt;\n            {content.cover.title}\n          &lt;/h1&gt;\n          &lt;p className=\"text-2xl md:text-3xl text-gray-300 mb-4 font-light max-w-4xl mx-auto\"&gt;\n            {content.cover.tagline}\n          &lt;/p&gt;\n          &lt;p className=\"text-xl md:text-2xl text-gray-400 mb-12 max-w-3xl mx-auto\"&gt;\n            {content.cover.subtagline}\n          &lt;/p&gt;\n          &lt;p className=\"text-lg text-gray-500 mb-8\"&gt;{content.cover.url}&lt;/p&gt;\n          &lt;div className=\"flex flex-wrap gap-4 justify-center mt-10\"&gt;\n            &lt;Button\n              asChild\n              size=\"lg\"\n              className=\"bg-white text-black hover:bg-gray-200 font-semibold text-lg px-8 py-6\"\n            &gt;\n              &lt;a href=\"#contact\"&gt;Get Started&lt;/a&gt;\n            &lt;/Button&gt;\n            &lt;Button\n              asChild\n              size=\"lg\"\n              variant=\"outline\"\n              className=\"border-gray-600 text-white hover:bg-gray-900 hover:border-white text-lg px-8 py-6\"\n            &gt;\n              &lt;a href=\"#solution\"&gt;Learn More&lt;/a&gt;\n            &lt;/Button&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n      &lt;/section&gt;\n\n      {/* Problem 1: Founders Are the Whole Leadership Team */}\n      {(() =&gt; {\n        const slide = getSlide('problem-founders');\n        if (!slide) return null;\n        return (\n          &lt;section id=\"problem\" className=\"py-20 bg-black\"&gt;\n            &lt;div className=\"container px-4\"&gt;\n              &lt;div className=\"max-w-4xl mx-auto\"&gt;\n                &lt;h2 className=\"text-4xl md:text-5xl font-bold mb-4\"&gt;{slide.title}&lt;/h2&gt;\n                &lt;p className=\"text-2xl md:text-3xl text-gray-300 mb-12\"&gt;\n                  {slide.subtitle}\n                &lt;/p&gt;\n                {slide.sections?.map((section, i) =&gt; (\n                  &lt;div key={i}&gt;\n                    {section.heading &amp;&amp; &lt;p className=\"text-xl text-gray-400 mb-8\"&gt;{section.heading}&lt;/p&gt;}\n                    {section.items &amp;&amp; (\n                      &lt;ul className=\"space-y-4 text-lg text-gray-300 mb-8\"&gt;\n                        {section.items.map((item, j) =&gt; (\n                          &lt;li key={j} className=\"flex items-start gap-3\"&gt;\n                            &lt;CheckCircle2 className=\"w-6 h-6 text-white mt-1 flex-shrink-0\" /&gt;\n                            &lt;span&gt;{item}&lt;/span&gt;\n                          &lt;/li&gt;\n                        ))}\n                      &lt;/ul&gt;\n                    )}\n                  &lt;/div&gt;\n                ))}\n                {(slide.footnote || slide.highlight) &amp;&amp; (\n                  &lt;p className=\"text-xl text-gray-300 mt-8\"&gt;\n                    {slide.footnote} {slide.highlight}\n                  &lt;/p&gt;\n                )}\n              &lt;/div&gt;\n            &lt;/div&gt;\n          &lt;/section&gt;\n        );\n      })()}\n\n      {/* Problem 2: Downshifted Orgs */}\n      {(() =&gt; {\n        const slide = getSlide('problem-downshifted');\n        if (!slide) return null;\n        return (\n          &lt;section className=\"py-20 bg-gray-900\"&gt;\n            &lt;div className=\"container px-4\"&gt;\n              &lt;div className=\"max-w-4xl mx-auto\"&gt;\n                &lt;h2 className=\"text-4xl md:text-5xl font-bold mb-4\"&gt;{slide.title}&lt;/h2&gt;\n                &lt;p className=\"text-xl text-gray-300 mb-8\"&gt;{slide.subtitle}&lt;/p&gt;\n                &lt;div className=\"grid md:grid-cols-2 gap-8 mb-8\"&gt;\n                  {slide.sections?.slice(0, 2).map((section, i) =&gt; (\n                    &lt;div key={i}&gt;\n                      &lt;h3 className=\"text-xl font-semibold mb-4 text-white\"&gt;{section.heading}&lt;/h3&gt;\n                      {section.items &amp;&amp; (\n                        &lt;ul className=\"space-y-3 text-gray-300\"&gt;\n                          {section.items.map((item, j) =&gt; (\n                            &lt;li key={j} className=\"flex items-start gap-2\"&gt;\n                              &lt;CheckCircle2 className=\"w-5 h-5 text-white mt-1 flex-shrink-0\" /&gt;\n                              &lt;span&gt;{item}&lt;/span&gt;\n                            &lt;/li&gt;\n                          ))}\n                        &lt;/ul&gt;\n                      )}\n                    &lt;/div&gt;\n                  ))}\n                &lt;/div&gt;\n                {slide.footnote &amp;&amp; &lt;p className=\"text-xl text-gray-300 mt-8\"&gt;{slide.footnote}&lt;/p&gt;}\n                {slide.highlight &amp;&amp; (\n                  &lt;p className=\"text-2xl text-white font-semibold mt-6\"&gt;{slide.highlight}&lt;/p&gt;\n                )}\n              &lt;/div&gt;\n            &lt;/div&gt;\n          &lt;/section&gt;\n        );\n      })()}\n\n      {/* Ideal Customer: Foundations as Buyers */}\n      {(() =&gt; {\n        const slide = getSlide('customer-foundations');\n        if (!slide) return null;\n        return (\n          &lt;section className=\"py-20 bg-black\"&gt;\n            &lt;div className=\"container px-4\"&gt;\n              &lt;div className=\"max-w-4xl mx-auto\"&gt;\n                &lt;h2 className=\"text-4xl md:text-5xl font-bold mb-4\"&gt;{slide.title}&lt;/h2&gt;\n                &lt;p className=\"text-xl text-gray-300 mb-8\"&gt;{slide.subtitle}&lt;/p&gt;\n                &lt;div className=\"grid md:grid-cols-2 gap-8 mb-8\"&gt;\n                  {slide.sections?.map((section, i) =&gt; (\n                    &lt;div key={i}&gt;\n                      &lt;h3 className=\"text-xl font-semibold mb-4 text-white\"&gt;{section.heading}&lt;/h3&gt;\n                      {section.items &amp;&amp; (\n                        &lt;ul className=\"space-y-3 text-gray-300\"&gt;\n                          {section.items.map((item, j) =&gt; (\n                            &lt;li key={j} className=\"flex items-start gap-2\"&gt;\n                              &lt;CheckCircle2 className=\"w-5 h-5 text-white mt-1 flex-shrink-0\" /&gt;\n                              &lt;span&gt;{item}&lt;/span&gt;\n                            &lt;/li&gt;\n                          ))}\n                        &lt;/ul&gt;\n                      )}\n                    &lt;/div&gt;\n                  ))}\n                &lt;/div&gt;\n                {slide.highlight &amp;&amp; (\n                  &lt;p className=\"text-2xl text-white font-semibold mt-6\"&gt;{slide.highlight}&lt;/p&gt;\n                )}\n              &lt;/div&gt;\n            &lt;/div&gt;\n          &lt;/section&gt;\n        );\n      })()}\n\n      {/* Market Opportunity */}\n      {(() =&gt; {\n        const slide = getSlide('market');\n        if (!slide) return null;\n        return (\n          &lt;section className=\"py-20 bg-gray-900\"&gt;\n            &lt;div className=\"container px-4\"&gt;\n              &lt;div className=\"max-w-4xl mx-auto\"&gt;\n                &lt;h2 className=\"text-4xl md:text-5xl font-bold mb-4\"&gt;{slide.title}&lt;/h2&gt;\n                &lt;p className=\"text-xl text-gray-300 mb-12\"&gt;{slide.subtitle}&lt;/p&gt;\n                \n                &lt;div className=\"space-y-8 mb-12\"&gt;\n                  {slide.sections?.map((section, i) =&gt; (\n                    &lt;div key={i} className=\"bg-black/50 rounded-lg p-6\"&gt;\n                      &lt;h3 className=\"text-2xl font-semibold mb-4 text-white\"&gt;{section.heading}&lt;/h3&gt;\n                      {section.items &amp;&amp; (\n                        &lt;ul className=\"space-y-3 text-gray-300\"&gt;\n                          {section.items.map((item, j) =&gt; (\n                            &lt;li key={j} className=\"flex items-start gap-2\"&gt;\n                              &lt;CheckCircle2 className=\"w-5 h-5 text-green-400 mt-1 flex-shrink-0\" /&gt;\n                              &lt;span&gt;{item}&lt;/span&gt;\n                            &lt;/li&gt;\n                          ))}\n                        &lt;/ul&gt;\n                      )}\n                    &lt;/div&gt;\n                  ))}\n                &lt;/div&gt;\n\n                {slide.highlight &amp;&amp; (\n                  &lt;p className=\"text-2xl text-white font-semibold text-center mb-4\"&gt;{slide.highlight}&lt;/p&gt;\n                )}\n                {slide.footnote &amp;&amp; (\n                  &lt;p className=\"text-sm text-gray-500 text-center\"&gt;{slide.footnote}&lt;/p&gt;\n                )}\n              &lt;/div&gt;\n            &lt;/div&gt;\n          &lt;/section&gt;\n        );\n      })()}\n\n      {/* Broken Options */}\n      {(() =&gt; {\n        const slide = getSlide('broken-options');\n        if (!slide) return null;\n        return (\n          &lt;section className=\"py-20 bg-black\"&gt;\n            &lt;div className=\"container px-4\"&gt;\n              &lt;div className=\"max-w-4xl mx-auto\"&gt;\n                &lt;h2 className=\"text-4xl md:text-5xl font-bold mb-12\"&gt;{slide.title}&lt;/h2&gt;\n                &lt;p className=\"text-xl text-gray-300 mb-12\"&gt;{slide.subtitle}&lt;/p&gt;\n                \n                &lt;div className=\"space-y-8 mb-12\"&gt;\n                  {slide.sections?.map((section, i) =&gt; (\n                    &lt;div key={i} className=\"border-l-4 border-gray-700 pl-6\"&gt;\n                      &lt;h3 className=\"text-2xl font-semibold mb-3\"&gt;{section.heading}&lt;/h3&gt;\n                      {section.text &amp;&amp; &lt;p className=\"text-gray-300\"&gt;{section.text}&lt;/p&gt;}\n                      {section.items &amp;&amp; (\n                        &lt;ul className=\"text-gray-300 space-y-1 ml-4\"&gt;\n                          {section.items.map((item, j) =&gt; (\n                            &lt;li key={j}&gt;{item}&lt;/li&gt;\n                          ))}\n                        &lt;/ul&gt;\n                      )}\n                    &lt;/div&gt;\n                  ))}\n                &lt;/div&gt;\n                \n                {slide.highlight &amp;&amp; &lt;p className=\"text-xl text-gray-300\"&gt;{slide.highlight}&lt;/p&gt;}\n              &lt;/div&gt;\n            &lt;/div&gt;\n          &lt;/section&gt;\n        );\n      })()}\n\n      {/* Director - What We Are */}\n      {(() =&gt; {\n        const slide = getSlide('what-we-are');\n        if (!slide) return null;\n        return (\n          &lt;section id=\"solution\" className=\"py-20 bg-gray-900\"&gt;\n            &lt;div className=\"container px-4\"&gt;\n              &lt;div className=\"max-w-4xl mx-auto\"&gt;\n                &lt;h2 className=\"text-4xl md:text-5xl font-bold mb-12\"&gt;{slide.title}&lt;/h2&gt;\n                &lt;p className=\"text-2xl text-gray-300 mb-12\"&gt;{slide.subtitle}&lt;/p&gt;\n                \n                &lt;div className=\"space-y-8 mb-12\"&gt;\n                  {slide.sections?.map((section, i) =&gt; (\n                    &lt;div key={i}&gt;\n                      &lt;h3 className=\"text-2xl font-semibold mb-4 flex items-center gap-3\"&gt;\n                        {i === 0 ? &lt;Shield className=\"w-8 h-8\" /&gt; : &lt;Users className=\"w-8 h-8\" /&gt;}\n                        {section.heading}\n                      &lt;/h3&gt;\n                      {section.items &amp;&amp; (\n                        &lt;ul className=\"space-y-2 text-gray-300 ml-11\"&gt;\n                          {section.items.map((item, j) =&gt; (\n                            &lt;li key={j}&gt;• {item}&lt;/li&gt;\n                          ))}\n                        &lt;/ul&gt;\n                      )}\n                    &lt;/div&gt;\n                  ))}\n                &lt;/div&gt;\n                \n                {slide.highlight &amp;&amp; &lt;p className=\"text-xl text-gray-300\"&gt;{slide.highlight}&lt;/p&gt;}\n              &lt;/div&gt;\n            &lt;/div&gt;\n          &lt;/section&gt;\n        );\n      })()}\n\n      {/* Fundraising Philosophy */}\n      {(() =&gt; {\n        const slide = getSlide('fundraising-philosophy');\n        if (!slide) return null;\n        return (\n          &lt;section className=\"py-20 bg-black\"&gt;\n            &lt;div className=\"container px-4\"&gt;\n              &lt;div className=\"max-w-4xl mx-auto\"&gt;\n                &lt;h2 className=\"text-4xl md:text-5xl font-bold mb-12\"&gt;{slide.title}&lt;/h2&gt;\n                &lt;p className=\"text-xl text-gray-300 mb-8\"&gt;{slide.subtitle}&lt;/p&gt;\n                \n                &lt;div className=\"grid md:grid-cols-2 gap-8 mb-8\"&gt;\n                  {slide.sections?.slice(0, 2).map((section, i) =&gt; (\n                    &lt;div key={i}&gt;\n                      &lt;h3 className=\"text-xl font-semibold mb-4 text-white\"&gt;{section.heading}&lt;/h3&gt;\n                      {section.items &amp;&amp; (\n                        &lt;ul className=\"space-y-2 text-gray-300\"&gt;\n                          {section.items.map((item, j) =&gt; (\n                            &lt;li key={j}&gt;• {item}&lt;/li&gt;\n                          ))}\n                        &lt;/ul&gt;\n                      )}\n                    &lt;/div&gt;\n                  ))}\n                &lt;/div&gt;\n                \n                {slide.sections?.[2] &amp;&amp; (\n                  &lt;div className=\"border-l-4 border-white pl-6 mb-8\"&gt;\n                    &lt;h3 className=\"text-xl font-semibold mb-4 text-white\"&gt;{slide.sections[2].heading}&lt;/h3&gt;\n                    {slide.sections[2].items &amp;&amp; (\n                      &lt;ul className=\"space-y-2 text-gray-300\"&gt;\n                        {slide.sections[2].items.map((item, j) =&gt; (\n                          &lt;li key={j}&gt;• {item}&lt;/li&gt;\n                        ))}\n                      &lt;/ul&gt;\n                    )}\n                  &lt;/div&gt;\n                )}\n                \n                {slide.highlight &amp;&amp; &lt;p className=\"text-xl text-gray-300\"&gt;{slide.highlight}&lt;/p&gt;}\n              &lt;/div&gt;\n            &lt;/div&gt;\n          &lt;/section&gt;\n        );\n      })()}\n\n      {/* Director Pod - Capacity Ramp */}\n      {(() =&gt; {\n        const slide = getSlide('director-pod');\n        if (!slide) return null;\n        return (\n          &lt;section className=\"py-20 bg-gray-900\"&gt;\n            &lt;div className=\"container px-4\"&gt;\n              &lt;div className=\"max-w-4xl mx-auto\"&gt;\n                &lt;h2 className=\"text-4xl md:text-5xl font-bold mb-4\"&gt;{slide.title}&lt;/h2&gt;\n                &lt;p className=\"text-xl text-gray-300 mb-12\"&gt;{slide.subtitle}&lt;/p&gt;\n                \n                &lt;div className=\"space-y-12\"&gt;\n                  {slide.sections?.map((section, i) =&gt; (\n                    &lt;div key={i} className=\"border border-gray-700 rounded-lg p-6\"&gt;\n                      &lt;h3 className=\"text-2xl font-semibold mb-4\"&gt;{section.heading}&lt;/h3&gt;\n                      {section.items &amp;&amp; (\n                        &lt;ul className=\"space-y-2 text-gray-300\"&gt;\n                          {section.items.map((item, j) =&gt; (\n                            &lt;li key={j}&gt;• {item}&lt;/li&gt;\n                          ))}\n                        &lt;/ul&gt;\n                      )}\n                      {section.text &amp;&amp; &lt;p className=\"text-gray-300\"&gt;{section.text}&lt;/p&gt;}\n                    &lt;/div&gt;\n                  ))}\n                &lt;/div&gt;\n              &lt;/div&gt;\n            &lt;/div&gt;\n          &lt;/section&gt;\n        );\n      })()}\n\n      {/* Director OS - Product Overview */}\n      {(() =&gt; {\n        const slide = getSlide('director-os');\n        if (!slide) return null;\n        const icons = [TrendingUp, DollarSign, Shield, FileText];\n        return (\n          &lt;section className=\"py-20 bg-black\"&gt;\n            &lt;div className=\"container px-4\"&gt;\n              &lt;div className=\"max-w-4xl mx-auto\"&gt;\n                &lt;h2 className=\"text-4xl md:text-5xl font-bold mb-4\"&gt;{slide.title}&lt;/h2&gt;\n                &lt;p className=\"text-2xl text-gray-300 mb-12\"&gt;{slide.subtitle}&lt;/p&gt;\n                \n                &lt;div className=\"grid md:grid-cols-2 gap-6 mb-8\"&gt;\n                  {slide.sections?.map((section, i) =&gt; {\n                    const Icon = icons[i] || Shield;\n                    return (\n                      &lt;div key={i} className=\"border border-gray-800 rounded-lg p-6\"&gt;\n                        &lt;h3 className=\"text-xl font-semibold mb-3 flex items-center gap-2\"&gt;\n                          &lt;Icon className=\"w-6 h-6\" /&gt;\n                          {section.heading}\n                        &lt;/h3&gt;\n                        {section.text &amp;&amp; &lt;p className=\"text-gray-300\"&gt;{section.text}&lt;/p&gt;}\n                      &lt;/div&gt;\n                    );\n                  })}\n                &lt;/div&gt;\n                \n                {slide.footnote &amp;&amp; &lt;p className=\"text-lg text-gray-400\"&gt;{slide.footnote}&lt;/p&gt;}\n              &lt;/div&gt;\n            &lt;/div&gt;\n          &lt;/section&gt;\n        );\n      })()}\n\n      {/* AI Agents */}\n      {(() =&gt; {\n        const slide = getSlide('ai-agents');\n        if (!slide) return null;\n        return (\n          &lt;section className=\"py-20 bg-gray-900\"&gt;\n            &lt;div className=\"container px-4\"&gt;\n              &lt;div className=\"max-w-4xl mx-auto\"&gt;\n                &lt;h2 className=\"text-4xl md:text-5xl font-bold mb-4\"&gt;{slide.title}&lt;/h2&gt;\n                &lt;p className=\"text-xl text-gray-300 mb-12\"&gt;{slide.subtitle}&lt;/p&gt;\n                \n                &lt;div className=\"space-y-6 mb-8\"&gt;\n                  {slide.sections?.map((section, i) =&gt; (\n                    &lt;div key={i} className=\"border-l-4 border-white pl-6\"&gt;\n                      &lt;h3 className=\"text-xl font-semibold mb-2 flex items-center gap-2\"&gt;\n                        &lt;Bot className=\"w-6 h-6\" /&gt;\n                        {section.heading}\n                      &lt;/h3&gt;\n                      {section.items &amp;&amp; (\n                        &lt;ul className=\"space-y-1 text-gray-300 ml-8\"&gt;\n                          {section.items.map((item, j) =&gt; (\n                            &lt;li key={j}&gt;• {item}&lt;/li&gt;\n                          ))}\n                        &lt;/ul&gt;\n                      )}\n                    &lt;/div&gt;\n                  ))}\n                &lt;/div&gt;\n                \n                {slide.highlight &amp;&amp; (\n                  &lt;div className=\"border border-gray-700 rounded-lg p-6 bg-black/50\"&gt;\n                    &lt;p className=\"text-lg text-gray-300\"&gt;{slide.highlight}&lt;/p&gt;\n                  &lt;/div&gt;\n                )}\n              &lt;/div&gt;\n            &lt;/div&gt;\n          &lt;/section&gt;\n        );\n      })()}\n\n      {/* Economics */}\n      {(() =&gt; {\n        const slide = getSlide('economics');\n        if (!slide) return null;\n        return (\n          &lt;section className=\"py-20 bg-black\"&gt;\n            &lt;div className=\"container px-4\"&gt;\n              &lt;div className=\"max-w-4xl mx-auto\"&gt;\n                &lt;h2 className=\"text-4xl md:text-5xl font-bold mb-12\"&gt;{slide.title}&lt;/h2&gt;\n                &lt;p className=\"text-xl text-gray-300 mb-12\"&gt;{slide.subtitle}&lt;/p&gt;\n                \n                &lt;div className=\"grid md:grid-cols-2 gap-8 mb-12\"&gt;\n                  {slide.sections?.map((section, i) =&gt; (\n                    &lt;div key={i} className={&#96;border rounded-lg p-6 ${i === 1 ? 'border-white bg-gray-900' : 'border-gray-700'}&#96;}&gt;\n                      &lt;h3 className=\"text-xl font-semibold mb-4\"&gt;{section.heading}&lt;/h3&gt;\n                      {section.items &amp;&amp; (\n                        &lt;ul className=\"space-y-2 text-gray-300\"&gt;\n                          {section.items.map((item, j) =&gt; (\n                            &lt;li key={j}&gt;• {item}&lt;/li&gt;\n                          ))}\n                        &lt;/ul&gt;\n                      )}\n                    &lt;/div&gt;\n                  ))}\n                &lt;/div&gt;\n                \n                {slide.footnote &amp;&amp; &lt;p className=\"text-lg text-gray-300\"&gt;{slide.footnote}&lt;/p&gt;}\n              &lt;/div&gt;\n            &lt;/div&gt;\n          &lt;/section&gt;\n        );\n      })()}\n\n      {/* Why Now */}\n      {(() =&gt; {\n        const slide = getSlide('why-now');\n        if (!slide) return null;\n        return (\n          &lt;section className=\"py-20 bg-gray-900\"&gt;\n            &lt;div className=\"container px-4\"&gt;\n              &lt;div className=\"max-w-4xl mx-auto\"&gt;\n                &lt;h2 className=\"text-4xl md:text-5xl font-bold mb-12\"&gt;{slide.title}&lt;/h2&gt;\n                &lt;p className=\"text-xl text-gray-300 mb-12\"&gt;{slide.subtitle}&lt;/p&gt;\n                \n                &lt;div className=\"space-y-8\"&gt;\n                  {slide.sections?.map((section, i) =&gt; (\n                    &lt;div key={i}&gt;\n                      &lt;h3 className=\"text-2xl font-semibold mb-4\"&gt;{section.heading}&lt;/h3&gt;\n                      {section.items &amp;&amp; (\n                        &lt;ul className=\"space-y-2 text-gray-300\"&gt;\n                          {section.items.map((item, j) =&gt; (\n                            &lt;li key={j}&gt;• {item}&lt;/li&gt;\n                          ))}\n                        &lt;/ul&gt;\n                      )}\n                    &lt;/div&gt;\n                  ))}\n                &lt;/div&gt;\n                \n                {slide.highlight &amp;&amp; (\n                  &lt;div className=\"border-l-4 border-white pl-6 mt-8\"&gt;\n                    &lt;p className=\"text-xl text-gray-300\"&gt;{slide.highlight}&lt;/p&gt;\n                  &lt;/div&gt;\n                )}\n              &lt;/div&gt;\n            &lt;/div&gt;\n          &lt;/section&gt;\n        );\n      })()}\n\n      {/* Go-to-Market */}\n      {(() =&gt; {\n        const slide = getSlide('go-to-market');\n        if (!slide) return null;\n        return (\n          &lt;section className=\"py-20 bg-black\"&gt;\n            &lt;div className=\"container px-4\"&gt;\n              &lt;div className=\"max-w-4xl mx-auto\"&gt;\n                &lt;h2 className=\"text-4xl md:text-5xl font-bold mb-12\"&gt;{slide.title}&lt;/h2&gt;\n                &lt;p className=\"text-xl text-gray-300 mb-8\"&gt;{slide.subtitle}&lt;/p&gt;\n                \n                &lt;div className=\"space-y-6 mb-8\"&gt;\n                  {slide.sections?.slice(0, 3).map((section, i) =&gt; (\n                    &lt;div key={i} className=\"border-l-4 border-gray-700 pl-6\"&gt;\n                      &lt;h3 className=\"text-xl font-semibold mb-2\"&gt;{section.heading}&lt;/h3&gt;\n                      {section.text &amp;&amp; &lt;p className=\"text-gray-300\"&gt;{section.text}&lt;/p&gt;}\n                    &lt;/div&gt;\n                  ))}\n                &lt;/div&gt;\n                \n                {slide.sections?.[3] &amp;&amp; (\n                  &lt;div className=\"border border-gray-700 rounded-lg p-6 bg-gray-900\"&gt;\n                    &lt;h3 className=\"text-xl font-semibold mb-4\"&gt;{slide.sections[3].heading}&lt;/h3&gt;\n                    {slide.sections[3].items &amp;&amp; (\n                      &lt;ul className=\"space-y-2 text-gray-300\"&gt;\n                        {slide.sections[3].items.map((item, j) =&gt; (\n                          &lt;li key={j}&gt;• {item}&lt;/li&gt;\n                        ))}\n                      &lt;/ul&gt;\n                    )}\n                  &lt;/div&gt;\n                )}\n              &lt;/div&gt;\n            &lt;/div&gt;\n          &lt;/section&gt;\n        );\n      })()}\n\n      {/* Business Model */}\n      {(() =&gt; {\n        const slide = getSlide('business-model');\n        if (!slide) return null;\n        return (\n          &lt;section className=\"py-20 bg-gray-900\"&gt;\n            &lt;div className=\"container px-4\"&gt;\n              &lt;div className=\"max-w-4xl mx-auto\"&gt;\n                &lt;h2 className=\"text-4xl md:text-5xl font-bold mb-12\"&gt;{slide.title}&lt;/h2&gt;\n                &lt;p className=\"text-xl text-gray-300 mb-8\"&gt;{slide.subtitle}&lt;/p&gt;\n                \n                &lt;div className=\"space-y-6 mb-8\"&gt;\n                  {slide.sections?.map((section, i) =&gt; (\n                    &lt;div key={i}&gt;\n                      &lt;h3 className=\"text-xl font-semibold mb-3\"&gt;{section.heading}&lt;/h3&gt;\n                      {section.items &amp;&amp; (\n                        &lt;ul className=\"space-y-2 text-gray-300\"&gt;\n                          {section.items.map((item, j) =&gt; (\n                            &lt;li key={j}&gt;• {item}&lt;/li&gt;\n                          ))}\n                        &lt;/ul&gt;\n                      )}\n                    &lt;/div&gt;\n                  ))}\n                &lt;/div&gt;\n              &lt;/div&gt;\n            &lt;/div&gt;\n          &lt;/section&gt;\n        );\n      })()}\n\n      {/* Strategic Partners &amp; Structure */}\n      {(() =&gt; {\n        const slide = getSlide('strategic-partners');\n        if (!slide) return null;\n        return (\n          &lt;section className=\"py-20 bg-black\"&gt;\n            &lt;div className=\"container px-4\"&gt;\n              &lt;div className=\"max-w-4xl mx-auto\"&gt;\n                &lt;h2 className=\"text-4xl md:text-5xl font-bold mb-4\"&gt;{slide.title}&lt;/h2&gt;\n                &lt;p className=\"text-xl text-gray-300 mb-12\"&gt;{slide.subtitle}&lt;/p&gt;\n                \n                &lt;div className=\"grid md:grid-cols-2 gap-8 mb-8\"&gt;\n                  {slide.sections?.slice(0, 2).map((section, i) =&gt; (\n                    &lt;div key={i} className=\"border border-gray-700 rounded-lg p-6\"&gt;\n                      &lt;h3 className=\"text-xl font-semibold mb-4 text-white\"&gt;{section.heading}&lt;/h3&gt;\n                      {section.items &amp;&amp; (\n                        &lt;ul className=\"space-y-3 text-gray-300\"&gt;\n                          {section.items.map((item, j) =&gt; (\n                            &lt;li key={j} className=\"flex items-start gap-2\"&gt;\n                              &lt;CheckCircle2 className=\"w-5 h-5 text-green-400 mt-1 flex-shrink-0\" /&gt;\n                              &lt;span&gt;{item}&lt;/span&gt;\n                            &lt;/li&gt;\n                          ))}\n                        &lt;/ul&gt;\n                      )}\n                    &lt;/div&gt;\n                  ))}\n                &lt;/div&gt;\n\n                {/* Governance section */}\n                {slide.sections?.[2] &amp;&amp; (\n                  &lt;div className=\"border border-gray-600 rounded-lg p-6 bg-gray-900 mb-8\"&gt;\n                    &lt;h3 className=\"text-xl font-semibold mb-4 text-white\"&gt;{slide.sections[2].heading}&lt;/h3&gt;\n                    {slide.sections[2].items &amp;&amp; (\n                      &lt;ul className=\"space-y-3 text-gray-300\"&gt;\n                        {slide.sections[2].items.map((item, j) =&gt; (\n                          &lt;li key={j} className=\"flex items-start gap-2\"&gt;\n                            &lt;Shield className=\"w-5 h-5 text-blue-400 mt-1 flex-shrink-0\" /&gt;\n                            &lt;span&gt;{item}&lt;/span&gt;\n                          &lt;/li&gt;\n                        ))}\n                      &lt;/ul&gt;\n                    )}\n                  &lt;/div&gt;\n                )}\n\n                {slide.highlight &amp;&amp; (\n                  &lt;p className=\"text-xl text-white font-semibold text-center\"&gt;{slide.highlight}&lt;/p&gt;\n                )}\n              &lt;/div&gt;\n            &lt;/div&gt;\n          &lt;/section&gt;\n        );\n      })()}\n\n      {/* Team */}\n      {(() =&gt; {\n        const slide = getSlide('team');\n        if (!slide) return null;\n        return (\n          &lt;section className=\"py-20 bg-black\"&gt;\n            &lt;div className=\"container px-4\"&gt;\n              &lt;div className=\"max-w-4xl mx-auto\"&gt;\n                &lt;h2 className=\"text-4xl md:text-5xl font-bold mb-12\"&gt;{slide.title}&lt;/h2&gt;\n                &lt;p className=\"text-xl text-gray-300 mb-8\"&gt;{slide.subtitle}&lt;/p&gt;\n                \n                {/* Team Members with Photos */}\n                {slide.teamMembers &amp;&amp; (\n                  &lt;div className=\"grid md:grid-cols-2 gap-8 mb-12\"&gt;\n                    {slide.teamMembers.map((member: { name: string; role: string; bio: string; image: string }, i: number) =&gt; (\n                      &lt;div key={i} className=\"flex gap-6 items-start\"&gt;\n                        &lt;img \n                          src={member.image} \n                          alt={member.name}\n                          className=\"w-32 h-32 rounded-full object-cover border-2 border-gray-700\"\n                        /&gt;\n                        &lt;div&gt;\n                          &lt;h3 className=\"text-2xl font-semibold mb-1\"&gt;{member.name}&lt;/h3&gt;\n                          &lt;p className=\"text-lg text-gray-400 mb-2\"&gt;{member.role}&lt;/p&gt;\n                          &lt;p className=\"text-gray-300 text-sm\"&gt;{member.bio}&lt;/p&gt;\n                        &lt;/div&gt;\n                      &lt;/div&gt;\n                    ))}\n                  &lt;/div&gt;\n                )}\n                \n                {/* Open Roles */}\n                &lt;h3 className=\"text-2xl font-semibold mb-6 text-gray-400\"&gt;Open Roles&lt;/h3&gt;\n                &lt;div className=\"space-y-6 mb-8\"&gt;\n                  {slide.sections?.map((section, i) =&gt; (\n                    &lt;div key={i} className=\"border-l-4 border-gray-700 pl-6\"&gt;\n                      &lt;h3 className=\"text-xl font-semibold mb-2\"&gt;{section.heading}&lt;/h3&gt;\n                      {section.text &amp;&amp; &lt;p className=\"text-gray-300\"&gt;{section.text}&lt;/p&gt;}\n                    &lt;/div&gt;\n                  ))}\n                &lt;/div&gt;\n                \n                {slide.footnote &amp;&amp; (\n                  &lt;div className=\"border border-gray-700 rounded-lg p-6 bg-gray-900\"&gt;\n                    &lt;p className=\"text-lg text-gray-300\"&gt;{slide.footnote}&lt;/p&gt;\n                  &lt;/div&gt;\n                )}\n              &lt;/div&gt;\n            &lt;/div&gt;\n          &lt;/section&gt;\n        );\n      })()}\n\n      {/* Roadmap &amp; Ask */}\n      {(() =&gt; {\n        const slide = getSlide('roadmap');\n        if (!slide) return null;\n        return (\n          &lt;section id=\"contact\" className=\"py-20 bg-gray-900\"&gt;\n            &lt;div className=\"container px-4\"&gt;\n              &lt;div className=\"max-w-4xl mx-auto\"&gt;\n                &lt;h2 className=\"text-4xl md:text-5xl font-bold mb-12\"&gt;{slide.title}&lt;/h2&gt;\n                \n                &lt;div className=\"space-y-8 mb-12\"&gt;\n                  &lt;h3 className=\"text-2xl font-semibold mb-4\"&gt;Roadmap&lt;/h3&gt;\n                  \n                  {slide.sections?.map((section, i) =&gt; (\n                    &lt;div key={i} className={&#96;border-l-4 pl-6 mb-6 ${i === 0 ? 'border-white' : 'border-gray-700'}&#96;}&gt;\n                      &lt;h4 className=\"text-xl font-semibold mb-3\"&gt;{section.heading}&lt;/h4&gt;\n                      {section.items &amp;&amp; (\n                        &lt;ul className=\"space-y-2 text-gray-300\"&gt;\n                          {section.items.map((item, j) =&gt; (\n                            &lt;li key={j}&gt;• {item}&lt;/li&gt;\n                          ))}\n                        &lt;/ul&gt;\n                      )}\n                    &lt;/div&gt;\n                  ))}\n                &lt;/div&gt;\n                \n                {/* The Ask */}\n                &lt;div className=\"border border-white rounded-lg p-6 bg-black\"&gt;\n                  &lt;h3 className=\"text-2xl font-semibold mb-4\"&gt;Ask&lt;/h3&gt;\n                  &lt;p className=\"text-4xl font-bold text-white mb-4\"&gt;{content.ask.amount}&lt;/p&gt;\n                  &lt;ul className=\"space-y-2 text-gray-300\"&gt;\n                    {content.ask.items.map((item, i) =&gt; (\n                      &lt;li key={i}&gt;• {item}&lt;/li&gt;\n                    ))}\n                  &lt;/ul&gt;\n                &lt;/div&gt;\n              &lt;/div&gt;\n            &lt;/div&gt;\n          &lt;/section&gt;\n        );\n      })()}\n\n      {/* CTA Section */}\n      &lt;section className=\"py-24 bg-gradient-to-r from-gray-900 to-black\"&gt;\n        &lt;div className=\"container px-4 text-center\"&gt;\n          &lt;h2 className=\"text-4xl md:text-5xl font-bold mb-6\"&gt;\n            Ready to Build Your &lt;span className=\"text-white\"&gt;Backbone?&lt;/span&gt;\n          &lt;/h2&gt;\n          &lt;p className=\"text-xl text-gray-300 mb-10 max-w-2xl mx-auto\"&gt;\n            Let&amp;apos;s talk about how Director can help your organization scale.\n          &lt;/p&gt;\n          &lt;div className=\"flex flex-wrap gap-4 justify-center\"&gt;\n            &lt;Button\n              asChild\n              size=\"lg\"\n              className=\"bg-white text-black hover:bg-gray-200 font-semibold text-lg px-8 py-6\"\n            &gt;\n              &lt;a href=\"mailto:hello@directorforgood.org\"&gt;Get in Touch&lt;/a&gt;\n            &lt;/Button&gt;\n            &lt;Button\n              asChild\n              size=\"lg\"\n              variant=\"outline\"\n              className=\"border-white text-white hover:bg-white hover:text-black text-lg px-8 py-6\"\n            &gt;\n              &lt;a href=\"#solution\"&gt;Learn More&lt;/a&gt;\n            &lt;/Button&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n      &lt;/section&gt;\n\n      &lt;SiteFooter /&gt;\n    &lt;/div&gt;\n  );\n}\n",
  "totalLinesInFile": 752
}
```
Status: **completed**


</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
This is a server component (no 'use client'), so it can use `getDeckContent` from the server file. I just need to update the import path.Let me check if there are any other files still importing the server functions from deck-content.ts</details></think>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "/Users/boskombp16/GitHub/directorforgood.org/app/page.tsx"
}
```
Additional data:

```json
{
  "codeblockId": "1b55b3cb-48e4-4b24-9a0f-00e0b7ddeacb"
}
```
Status: **completed**


</details>
</tool-use>

---



---

Let me check for any other files that might be importing from the old location:

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "getDeckContent|updateDeckContent|resetDeckContent",
  "path": "/Users/boskombp16/GitHub/directorforgood.org",
  "glob": "*.{ts,tsx}",
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "getDeckContent|updateDeckContent|resetDeckContent",
    "path": "/Users/boskombp16/GitHub/directorforgood.org",
    "outputMode": "content",
    "workspaceResults": {
      "/Users/boskombp16/GitHub/directorforgood.org": {
        "content": {
          "matches": [
            {
              "file": "./app/page.tsx",
              "matches": [
                {
                  "lineNumber": 6,
                  "content": "import { getDeckContent } from \"@/lib/deck-content-server\";"
                },
                {
                  "lineNumber": 11,
                  "content": "  const content = getDeckContent();"
                }
              ]
            },
            {
              "file": "./app/api/deck/ai-edit/route.ts",
              "matches": [
                {
                  "lineNumber": 5,
                  "content": "import { getDeckContent } from '@/lib/deck-content-server';"
                },
                {
                  "lineNumber": 52,
                  "content": "    const deckContent = currentContent || getDeckContent();"
                }
              ]
            },
            {
              "file": "./lib/deck-content-server.ts",
              "matches": [
                {
                  "lineNumber": 20,
                  "content": "export function getDeckContent(): DeckContent {"
                },
                {
                  "lineNumber": 34,
                  "content": "export function updateDeckContent(content: Partial&lt;DeckContent&gt;): DeckContent {"
                },
                {
                  "lineNumber": 37,
                  "content": "    const currentContent = getDeckContent();"
                },
                {
                  "lineNumber": 48,
                  "content": "export function resetDeckContent(): DeckContent {"
                }
              ]
            },
            {
              "file": "./app/api/deck-content/route.ts",
              "matches": [
                {
                  "lineNumber": 3,
                  "content": "import { getDeckContent, updateDeckContent, resetDeckContent } from '@/lib/deck-content-server';"
                },
                {
                  "lineNumber": 9,
                  "content": "    const content = getDeckContent();"
                },
                {
                  "lineNumber": 32,
                  "content": "    const updatedContent = updateDeckContent(contentToUpdate);"
                },
                {
                  "lineNumber": 54,
                  "content": "    const content = resetDeckContent();"
                }
              ]
            },
            {
              "file": "./app/api/deck-content/versions/[id]/restore/route.ts",
              "matches": [
                {
                  "lineNumber": 6,
                  "content": "import { updateDeckContent } from '@/lib/deck-content-server';"
                },
                {
                  "lineNumber": 33,
                  "content": "    const restoredContent = updateDeckContent(version.content as DeckContent);"
                }
              ]
            },
            {
              "file": "./lib/pdf/deck-pdf.tsx",
              "matches": [
                {
                  "lineNumber": 28,
                  "content": "import { getDeckContent, getOrderedSlides, DeckContent, SlideContent } from '@/lib/deck-content';"
                },
                {
                  "lineNumber": 427,
                  "content": "  const content = getDeckContent();"
                }
              ]
            }
          ],
          "totalLines": 16,
          "totalMatchedLines": 16
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
There's one more file that needs updating: `lib/pdf/deck-pdf.tsx` is importing `getDeckContent` from the old location. Let me fix that.</details></think>

---

One more file to fix:

---

<tool-use data-tool-type="unknown" data-tool-name="read_file_v2">
<details>
<summary>Tool use: **read_file_v2**</summary>


Parameters:

```json
{
  "targetFile": "/Users/boskombp16/GitHub/directorforgood.org/lib/pdf/deck-pdf.tsx",
  "limit": 35,
  "charsLimit": 1000000,
  "effectiveUri": "/Users/boskombp16/GitHub/directorforgood.org/lib/pdf/deck-pdf.tsx"
}
```
Result:

```json
{
  "contents": "import React from 'react';\nimport { Document, View, Text } from '@react-pdf/renderer';\nimport { StyleSheet } from '@react-pdf/renderer';\nimport { colors, fonts, fontSize, spacing } from './pdf-styles';\nimport {\n  Slide,\n  Title,\n  Heading,\n  BulletList,\n  Card,\n  TwoColumn,\n  BorderedSection,\n  IconUsers,\n  IconShield,\n  IconBot,\n  IconBox,\n  TeamMember,\n} from './pdf-components';\nimport {\n  EconomicsChart,\n  ScalingDiagram,\n  RoadmapTimeline,\n  AgentWorkflowDiagram,\n} from './pdf-charts';\nimport {\n  DirectorOSOverview,\n} from './pdf-mockups';\nimport { getDeckContent, getOrderedSlides, DeckContent, SlideContent } from '@/lib/deck-content';\n\n// Slide configuration: maps slide ID to component type and variant\ntype SlideType = 'content' | 'two-column' | 'what-we-are' | 'director-pod' | 'director-os' | 'ai-agents' | 'economics' | 'team' | 'roadmap';\n\ninterface SlideConfig {\n  type: SlideType;\n  variant?: 'dark' | 'light';",
  "totalLinesInFile": 451
}
```
Status: **completed**


</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
I need to update the import in `lib/pdf/deck-pdf.tsx` to use the server file for `getDeckContent`.All imports should now be fixed. Let me double-check there are no more references to the server functions in the old file.</details></think>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "/Users/boskombp16/GitHub/directorforgood.org/lib/pdf/deck-pdf.tsx"
}
```
Additional data:

```json
{
  "codeblockId": "89c2bc2b-e8c4-4512-b359-1ab71609d57c"
}
```
Status: **completed**


</details>
</tool-use>

---



---

Done. All server function imports now point to `deck-content-server.ts`. The build should work now.

---

_**User (2025-12-09 10:50Z)**_

Commit and push the remote. 

---

_**Agent (model claude-4.5-opus-high-thinking, mode Agent)**_

<think><details><summary>Thought Process</summary>
The user wants me to commit the changes and push to the remote repository. Let me first check the git status and recent commit messages to follow the repository's commit style.I see the changes. Let me stage and commit the relevant files for this fix. I should exclude the `.specstory` history files as those are auto-generated, and focus on the actual code changes. The key changes are:

1. `lib/deck-content.ts` - removed fs/path imports and server functions
2. `lib/deck-content-server.ts` - new file with server-only functions
3. Updated imports in:
   - `app/api/deck-content/route.ts`
   - `app/api/deck-content/versions/[id]/restore/route.ts`
   - `app/api/deck/ai-edit/route.ts`
   - `app/page.tsx`
   - `lib/pdf/deck-pdf.tsx`

I'll commit these changes with a proper fix message.Good, the files are staged. Now let me commit with a proper message.Good, commit succeeded. Now let me push to the remote.</details></think>

---

<tool-use data-tool-type="unknown" data-tool-name="run_terminal_command_v2">
<details>
<summary>Tool use: **run_terminal_command_v2**</summary>


Parameters:

```json
{
  "command": "cd /Users/boskombp16/GitHub/directorforgood.org &amp;&amp; git status",
  "cwd": "",
  "parsingResult": {
    "executableCommands": [
      {
        "name": "cd",
        "args": [
          {
            "type": "word",
            "value": "/Users/boskombp16/GitHub/directorforgood.org"
          }
        ],
        "fullText": "cd /Users/boskombp16/GitHub/directorforgood.org"
      },
      {
        "name": "git",
        "args": [
          {
            "type": "word",
            "value": "status"
          }
        ],
        "fullText": "git status"
      }
    ]
  }
}
```
Additional data:

```json
{
  "status": "success"
}
```
Result:

```json
{
  "output": "On branch main\nYour branch is up to date with 'origin/main'.\n\nChanges not staged for commit:\n  (use \"git add &lt;file&gt;...\" to update what will be committed)\n  (use \"git restore &lt;file&gt;...\" to discard changes in working directory)\n\tmodified:   .specstory/history/2025-12-09_19-36Z-ai-vision-for-nonprofit-back-office-automation.md\n\tmodified:   app/admin/deck/page.tsx\n\tmodified:   app/api/deck-content/route.ts\n\tmodified:   app/api/deck-content/versions/[id]/restore/route.ts\n\tmodified:   app/api/deck/ai-edit/route.ts\n\tmodified:   app/page.tsx\n\tmodified:   data/deck-content.json\n\tmodified:   lib/deck-content.ts\n\tmodified:   lib/pdf/deck-pdf.tsx\n\nUntracked files:\n  (use \"git add &lt;file&gt;...\" to include in what will be committed)\n\t.specstory/history/2025-12-11_00-50Z-assess-nonprofit-project-scope.md\n\t.specstory/history/2025-12-11_00-51Z-evaluate-customer-shift-to-foundations.md\n\t.specstory/history/2025-12-11_01-19Z-discuss-hiiiwav-fiscal-sponsorship-and-conflicts.md\n\t.specstory/history/2025-12-11_01-21Z-prepare-deck-for-chatgpt-analysis.md\n\t.specstory/history/2025-12-11_01-22Z-research-and-calculate-startup-market-potential.md\n\t.specstory/history/2025-12-11_02-01Z-fix-next-js-hydration-error.md\n\t.specstory/history/2025-12-11_02-03Z-founding-engineer-hiring-timing.md\n\t.specstory/history/2025-12-11_02-04Z-reorder-presentation-slides-and-add-interface.md\n\t.specstory/history/2025-12-11_02-12Z-fix-current-issue.md\n\tPITCH_DECK.txt\n\tlib/deck-content-server.ts\n\nno changes added to commit (use \"git add\" and/or \"git commit -a\")\n",
  "rejected": false
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="run_terminal_command_v2">
<details>
<summary>Tool use: **run_terminal_command_v2**</summary>


Parameters:

```json
{
  "command": "cd /Users/boskombp16/GitHub/directorforgood.org &amp;&amp; git diff --stat",
  "cwd": "",
  "parsingResult": {
    "executableCommands": [
      {
        "name": "cd",
        "args": [
          {
            "type": "word",
            "value": "/Users/boskombp16/GitHub/directorforgood.org"
          }
        ],
        "fullText": "cd /Users/boskombp16/GitHub/directorforgood.org"
      },
      {
        "name": "git",
        "args": [
          {
            "type": "word",
            "value": "diff"
          },
          {
            "type": "word",
            "value": "--stat"
          }
        ],
        "fullText": "git diff --stat"
      }
    ]
  }
}
```
Additional data:

```json
{
  "status": "success"
}
```
Result:

```json
{
  "output": " ...-vision-for-nonprofit-back-office-automation.md | 377 ++++++++++++++++++++-\n app/admin/deck/page.tsx                            | 134 ++++++--\n app/api/deck-content/route.ts                      |   3 +-\n .../deck-content/versions/[id]/restore/route.ts    |   3 +-\n app/api/deck/ai-edit/route.ts                      |   3 +-\n app/page.tsx                                       |  98 +++++-\n data/deck-content.json                             | 107 +++++-\n lib/deck-content.ts                                | 142 ++++----\n lib/pdf/deck-pdf.tsx                               | 158 ++++-----\n 9 files changed, 840 insertions(+), 185 deletions(-)\n",
  "rejected": false
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="run_terminal_command_v2">
<details>
<summary>Tool use: **run_terminal_command_v2**</summary>


Parameters:

```json
{
  "command": "cd /Users/boskombp16/GitHub/directorforgood.org &amp;&amp; git log --oneline -5",
  "cwd": "",
  "parsingResult": {
    "executableCommands": [
      {
        "name": "cd",
        "args": [
          {
            "type": "word",
            "value": "/Users/boskombp16/GitHub/directorforgood.org"
          }
        ],
        "fullText": "cd /Users/boskombp16/GitHub/directorforgood.org"
      },
      {
        "name": "git",
        "args": [
          {
            "type": "word",
            "value": "log"
          },
          {
            "type": "word",
            "value": "--oneline"
          },
          {
            "type": "number",
            "value": "-5"
          }
        ],
        "fullText": "git log --oneline -5"
      }
    ]
  }
}
```
Additional data:

```json
{
  "status": "success"
}
```
Result:

```json
{
  "output": "d4733dc feat: add ambitious long-term vision to pitch deck\n54e892d fix: update sitemap URL to directorforgood.org\nb3ddee5 fix: update Next.js to 16.0.8 (security patch)\n9ecfee3 fix: Zod v4 errors-&gt;issues, exclude scripts from build\n864d73e fix: convert Buffer to Uint8Array for NextResponse\n",
  "rejected": false
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="run_terminal_command_v2">
<details>
<summary>Tool use: **run_terminal_command_v2**</summary>


Parameters:

```json
{
  "command": "cd /Users/boskombp16/GitHub/directorforgood.org &amp;&amp; git add lib/deck-content.ts lib/deck-content-server.ts app/api/deck-content/route.ts \"app/api/deck-content/versions/[id]/restore/route.ts\" app/api/deck/ai-edit/route.ts app/page.tsx lib/pdf/deck-pdf.tsx",
  "cwd": "",
  "parsingResult": {
    "executableCommands": [
      {
        "name": "cd",
        "args": [
          {
            "type": "word",
            "value": "/Users/boskombp16/GitHub/directorforgood.org"
          }
        ],
        "fullText": "cd /Users/boskombp16/GitHub/directorforgood.org"
      },
      {
        "name": "git",
        "args": [
          {
            "type": "word",
            "value": "add"
          },
          {
            "type": "word",
            "value": "lib/deck-content.ts"
          },
          {
            "type": "word",
            "value": "lib/deck-content-server.ts"
          },
          {
            "type": "word",
            "value": "app/api/deck-content/route.ts"
          },
          {
            "type": "string",
            "value": "\"app/api/deck-content/versions/[id]/restore/route.ts\""
          },
          {
            "type": "word",
            "value": "app/api/deck/ai-edit/route.ts"
          },
          {
            "type": "word",
            "value": "app/page.tsx"
          },
          {
            "type": "word",
            "value": "lib/pdf/deck-pdf.tsx"
          }
        ],
        "fullText": "git add lib/deck-content.ts lib/deck-content-server.ts app/api/deck-content/route.ts \"app/api/deck-content/versions/[id]/restore/route.ts\" app/api/deck/ai-edit/route.ts app/page.tsx lib/pdf/deck-pdf.tsx"
      }
    ]
  }
}
```
Additional data:

```json
{
  "status": "success"
}
```
Result:

```json
{
  "rejected": false
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="run_terminal_command_v2">
<details>
<summary>Tool use: **run_terminal_command_v2**</summary>


Parameters:

```json
{
  "command": "cd /Users/boskombp16/GitHub/directorforgood.org &amp;&amp; git commit -m \"$(cat &lt;&lt;'EOF'\nfix: split deck-content into client/server modules\n\nNode.js fs/path modules can't be used in client components.\nMoved server-only functions (getDeckContent, updateDeckContent,\nresetDeckContent) to deck-content-server.ts and updated all imports.\nEOF\n)\"",
  "cwd": "",
  "parsingResult": {
    "executableCommands": [
      {
        "name": "cd",
        "args": [
          {
            "type": "word",
            "value": "/Users/boskombp16/GitHub/directorforgood.org"
          }
        ],
        "fullText": "cd /Users/boskombp16/GitHub/directorforgood.org"
      },
      {
        "name": "git",
        "args": [
          {
            "type": "word",
            "value": "commit"
          },
          {
            "type": "word",
            "value": "-m"
          },
          {
            "type": "string",
            "value": "\"$(cat &lt;&lt;'EOF'\nfix: split deck-content into client/server modules\n\nNode.js fs/path modules can't be used in client components.\nMoved server-only functions (getDeckContent, updateDeckContent,\nresetDeckContent) to deck-content-server.ts and updated all imports.\nEOF\n)\""
          }
        ],
        "fullText": "git commit -m \"$(cat &lt;&lt;'EOF'\nfix: split deck-content into client/server modules\n\nNode.js fs/path modules can't be used in client components.\nMoved server-only functions (getDeckContent, updateDeckContent,\nresetDeckContent) to deck-content-server.ts and updated all imports.\nEOF\n)\""
      },
      {
        "name": "cat",
        "fullText": "cat"
      }
    ],
    "hasRedirects": true,
    "hasCommandSubstitution": true
  }
}
```
Additional data:

```json
{
  "status": "success"
}
```
Result:

```json
{
  "output": "[main 3641070] fix: split deck-content into client/server modules\n 7 files changed, 318 insertions(+), 146 deletions(-)\n create mode 100644 lib/deck-content-server.ts\n",
  "rejected": false
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="run_terminal_command_v2">
<details>
<summary>Tool use: **run_terminal_command_v2**</summary>


Parameters:

```json
{
  "command": "cd /Users/boskombp16/GitHub/directorforgood.org &amp;&amp; git push",
  "cwd": "",
  "parsingResult": {
    "executableCommands": [
      {
        "name": "cd",
        "args": [
          {
            "type": "word",
            "value": "/Users/boskombp16/GitHub/directorforgood.org"
          }
        ],
        "fullText": "cd /Users/boskombp16/GitHub/directorforgood.org"
      },
      {
        "name": "git",
        "args": [
          {
            "type": "word",
            "value": "push"
          }
        ],
        "fullText": "git push"
      }
    ]
  }
}
```
Additional data:

```json
{
  "status": "success"
}
```
Result:

```json
{
  "output": "To https://github.com/boscokante/directorforgood.org.git\n   d4733dc..3641070  main -&gt; main\n",
  "rejected": false
}
```
Status: **completed**


</details>
</tool-use>

---



---

